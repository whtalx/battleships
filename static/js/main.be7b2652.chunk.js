(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{37:function(e,t,n){e.exports=n(51)},42:function(e,t,n){},43:function(e,t,n){},49:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=49},51:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),c=n(18),a=n.n(c),i=n(33),u=n(15),s=(n(42),n(43),n(6)),l=n(14),p=n(29),f=n(1);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var b=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{isAllyReady:!0})};function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var O=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{isAllyWantRepeat:!0})};function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var g=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{move:!e.move})};function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var j=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{status:t.payload?"connect":"place",type:t.payload?"pvp":"comp",move:!t.payload||e.move,firstMove:!t.payload||e.firstMove})};function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var E=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{move:t.payload,firstMove:t.payload})};function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var w=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{status:t.payload,firstMove:"victory"===t.payload||"defeat"===t.payload?!e.firstMove:e.firstMove})};function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var S=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{isEnemyReady:!0})};function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var x=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{isEnemyWantRepeat:!0})},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"choose",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:null,isAllyReady:!1,isEnemyReady:!1,isAllyWantRepeat:!1,isEnemyWantRepeat:!1,firstMove:t,status:e,move:t}},I=function(e){return e.match(/\d+-/g).map((function(e){return parseInt(e)}))};function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=function(e,t){var n="fire"===t.payload.type?{type:"fire",data:I(t.payload.data)}:C({},t.payload);return console.log("sent:     ",JSON.parse(JSON.stringify(n))),C({},e,{message:n,waitingForFeedback:"fire"===t.payload.type,lastSent:"fire"===t.payload.type?t.payload.data:e.lastSent})};function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var N=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{id:t.payload})};function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var L=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{lastSent:null,lastReceived:null})};function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var F=function(e,t){return console.log("received: ",JSON.parse(JSON.stringify(t.payload))),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{waitingForFeedback:!1,lastReceived:"fire"===t.payload.type?"cell-".concat(t.payload.data[0],"-").concat(t.payload.data[1],"-ally"):e.lastReceived})};function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var U=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{isClient:!0})};function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var V=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{interface:t.payload})};function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var H=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{message:null})};function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var G=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{isConnected:!0})};function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var B=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{isInitialised:!0})},K=n(4),Q=function(e){var t=Object(K.a)(Array(10).keys());return t.map((function(n){return t.map((function(t){return{id:"cell-".concat(t,"-").concat(n,"-").concat(e),hit:!1,miss:!1,ship:!1,sank:!1}}))}))},Z=n(7),$=function(e){return e.split("-").map((function(e){return parseInt(e)}))};function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ne=function(e){var t=e.squadron.reduce((function(e,t){return e+function(e){return e.map((function(e){return null===e[0]?1:1===e.length?0:e.reduce((function(e,t){return 1===e?1:null===t?1:0}))})).reduce((function(e,t){return e+t}))}(t)}),0),n=te({},e.deckToPlace);e:for(var r=0;r<e.squadron.length;r++)for(var o=0;o<e.squadron[r].length;o++)for(var c=0;c<e.squadron[r][o].length;c++)if(null===e.squadron[r][o][c]){n={type:r,ship:o,deck:c};break e}return te({},e,{shipsToPlace:t,deckToPlace:n})};function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var oe=function(e,t,n,r,o,c){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o);return c?(a.squadron[e][t].pop(),a.squadron[e][t].unshift(r)):a.squadron[e][t][n]=r,a.squadron[e][t].forEach((function(n,r){n&&(a.ally[n[1]][n[0]].ship="".concat(e,"-").concat(t,"-").concat(r))})),ne(a)};function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ae=function(e,t,n,r,o){var c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o);return c.squadron[e][t].splice(n,1),c.squadron[e][t].push(null),c.ally[r[1]][r[0]].ship=!1,c.squadron[e][t].forEach((function(n,r){n&&(c.ally[n[1]][n[0]].ship="".concat(e,"-").concat(t,"-").concat(r))})),ne(c)},ie=function(e,t){return e[t[1]][t[0]].ship};function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var se=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),r=I(t.payload),o=ie(n.ally,r);if(o){var c=$(o),a=Object(Z.a)(c,3),i=a[0],u=a[1],s=a[2];return 0!==s&&n.squadron[i][u][s+1]?n:ae(i,u,s,r,n)}if(function(e,t){return e[t[1]-1]&&(e[t[1]-1][t[0]-1]&&e[t[1]-1][t[0]-1].ship||e[t[1]-1][t[0]+1]&&e[t[1]-1][t[0]+1].ship)||e[t[1]+1]&&(e[t[1]+1][t[0]-1]&&e[t[1]+1][t[0]-1].ship||e[t[1]+1][t[0]+1]&&e[t[1]+1][t[0]+1].ship)}(n.ally,r))return n;var l=function(e,t){return[e[t[1]-1]&&e[t[1]-1][t[0]]&&e[t[1]-1][t[0]].ship,e[t[1]+1]&&e[t[1]+1][t[0]]&&e[t[1]+1][t[0]].ship,e[t[1]][t[0]-1]&&e[t[1]][t[0]-1].ship,e[t[1]][t[0]+1]&&e[t[1]][t[0]+1].ship].filter((function(e){return e}))}(n.ally,r);if(1===l.length){for(var p=l[0].split("-").map((function(e){return parseInt(e)})),y=Object(Z.a)(p,2),b=y[0],d=y[1],O=1;O<n.squadron[b][d].length;O++)if(null===n.squadron[b][d][O]){var h=r[0]<n.squadron[b][d][0][0]||r[1]<n.squadron[b][d][0][1];return oe(b,d,O,r,n,h)}return n}for(var g=0;g<n.squadron[n.deckToPlace.type].length;g++){var m=n.squadron[n.deckToPlace.type][g];if(!(m.filter((function(e){return e})).length===m.length))return null===m[0]?oe(n.deckToPlace.type,g,0,r,n,!1):n}return n},le=function(e,t){var n=Object(K.a)(e),r=Object(K.a)(t),o=1===r.length?[3,3]:r[1][1]-r[0][1]===0?[r.length+2,3]:[3,r.length+2],c=Object(Z.a)(o,2),a=c[0],i=c[1];return Object(K.a)(Array(i).keys()).forEach((function(e){Object(K.a)(Array(a).keys()).forEach((function(t){(function(e,t){return 1===r.length?!(1===e&&1===t):r[1][1]-r[0][1]===0?!(e>0&&e<r.length+1&&1===t):!(t>0&&t<r.length+1&&1===e)})(t,e)&&function(e,t){var o=r[0];n[t-1+o[1]]&&n[t-1+o[1]][e-1+o[0]]&&(n[t-1+o[1]][e-1+o[0]].miss=!0)}(t,e)}))})),n};function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var fe=function(e,t){var n,r=[],o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),c=Object(K.a)(t.payload.data),a=ie(o.ally,c);if(a){o.ally[c[1]][c[0]].hit=!0;var i=$(a),u=Object(Z.a)(i,2),s=u[0],l=u[1];if(function(e,t,n){return n.squadron[e][t].reduce((function(e,t){return n.ally[t[1]][t[0]].hit&&e}),!0)}(s,l,o)){if(o.allyShipsLeft-=1,0===o.allyShipsLeft)return o.feedback={type:"defeat"},o;o.squadron[s][l].forEach((function(e){o.ally[e[1]][e[0]].sank=!0,r.push(e)})),o.ally=le(o.ally,r),n="sank"}else n="hit"}else n="miss",o.ally[c[1]][c[0]].miss=!0;return 0===r.length&&r.push(c),o.feedback={type:"feedback",data:r,feedback:n},o};function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var be=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{feedback:{type:"victory",data:Object(K.a)(e.ally.map((function(e){return e.map((function(e){return e.miss?1:e.sank?2:e.hit?3:e.ship?4:0}))})))}})},de=function(){return Object(K.a)(Array(4).keys()).map((function(e){return Object(K.a)(Array(e+1)).map((function(t){return Object(K.a)(Array(4-e)).map((function(e){return null}))}))}))};function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var he=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{feedback:null})};function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var je=[[[-3,0],[0,-3]],[[-2,0],[0,-2]],[[-1,0],[0,-1]],[[0,0],[0,0]]],ve=function(e){var t=me({},e);try{t.squadron.forEach((function(e,n){t.squadron[n].forEach((function(e,r){var o=function e(t,n){var r=me({},t),o=Math.floor(Math.random()+.5),c=[Math.floor(Math.random()*(10+je[n][o][0])),Math.floor(Math.random()*(10+je[n][o][1]))];try{for(var a=-1;a<=r.squadron[n][0].length+1;a++)if(1===o&&r.ally[c[1]+a]&&(r.ally[c[1]+a][c[0]-1]&&r.ally[c[1]+a][c[0]-1].ship||r.ally[c[1]+a][c[0]]&&r.ally[c[1]+a][c[0]].ship||r.ally[c[1]+a][c[0]+1]&&r.ally[c[1]+a][c[0]+1].ship)||0===o&&(r.ally[c[1]-1]&&r.ally[c[1]-1][c[0]+a]&&r.ally[c[1]-1][c[0]+a].ship||r.ally[c[1]][c[0]+a]&&r.ally[c[1]][c[0]+a].ship||r.ally[c[1]+1]&&r.ally[c[1]+1][c[0]+a]&&r.ally[c[1]+1][c[0]+a].ship))return e(r,n)}catch(u){var i=u.message;return console.error(i),{}}return{coordinates:c,direction:o}}(t,n),c=o.coordinates,a=o.direction;if(!c)throw new Error("Browser too weak for such recursion \ud83d\ude14");t.squadron[n][r]=t.squadron[n][r].map((function(e,t){return 0===a?[c[0]+t,c[1]]:[c[0],c[1]+t]})),t.squadron[n][r].forEach((function(e,o){t.ally[e[1]][e[0]].ship="".concat(n,"-").concat(r,"-").concat(o)}))}))}))}catch(r){var n=r.message;console.error(n)}return ne(t)};function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Pe=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{enemy:Object(K.a)(t.payload.data.map((function(e,t){return e.map((function(e,n){return{id:"cell-".concat(n,"-").concat(t,"-enemy"),miss:1===e,sank:2===e,hit:3===e||2===e,ship:4===e||3===e||2===e}}))})))})};function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ke=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),r=Object(K.a)(t.payload.data);switch(t.payload.feedback){case"miss":n.enemy[r[0][1]][r[0][0]].miss=!0;break;case"hit":n.enemy[r[0][1]][r[0][0]].ship=!0,n.enemy[r[0][1]][r[0][0]].hit=!0;break;case"sank":if(r.forEach((function(e){n.enemy[e[1]][e[0]].hit=!0,n.enemy[e[1]][e[0]].ship=!0,n.enemy[e[1]][e[0]].sank=!0})),n.enemy=le(n.enemy,r),n.enemyShipsLeft-=1,0===n.enemyShipsLeft)return n.feedback={type:"victory",data:Object(K.a)(n.ally)},n}return n};function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xe=function(){return{ally:Q("ally"),enemy:Q("enemy"),squadron:de(),shipsToPlace:10,deckToPlace:{type:0,ship:0,deck:0},allyShipsLeft:10,enemyShipsLeft:10,feedback:null}},Te=Object(l.c)({game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_TYPE":return j(e,t);case"CHANGE_STATUS":return w(e,t);case"READY":return b(e);case"REPEAT":return O(e);case"SEND":switch(t.payload.type){case"feedback":return"miss"===t.payload.feedback?g(e):e;case"victory":return w(e,{payload:"victory"});default:return e}case"RECEIVE":switch(t.payload.type){case"ready":return S(e);case"repeat":return x(e);case"feedback":return"miss"===t.payload.feedback?g(e):e;case"victory":return w(e,{payload:"defeat"});default:return e}case"SET_FIRST_MOVE":return E(e,t);case"RESET":return T();case"NEW_ROUND":return T("place",e.firstMove);default:return e}},peer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:"",message:null,interface:null,isClient:!1,isConnected:!1,isInitialised:!1,waitingForFeedback:!1,lastSent:null,lastReceived:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_INTERFACE":return V(e,t);case"SEND":return _(e,t);case"CLEAR_MESSAGE":return H(e);case"READY":return _(e,{payload:{type:"ready"}});case"REPEAT":return _(e,{payload:{type:"repeat"}});case"RECEIVE":return F(e,t);case"SET_ID":return N(e,t);case"SET_IS_CLIENT":return U(e);case"SET_IS_CONNECTED":return G(e);case"SET_IS_INITIALISED":return B(e);case"RESET":return{id:"",message:null,interface:null,isClient:!1,isConnected:!1,isInitialised:!1,waitingForFeedback:!1,lastSent:null,lastReceived:null};case"NEW_ROUND":return L(e);default:return e}},sea:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND":return"feedback"===t.payload.type||"defeat"===t.payload.type||"victory"===t.payload.type?he(e):e;case"PLACE_SHIP":return se(e,t);case"RANDOM":return ve(De({},e,{ally:Q("ally"),squadron:de()}));case"RECEIVE":switch(t.payload.type){case"fire":return fe(e,t);case"feedback":return ke(e,t);case"victory":return Pe(e,t);case"defeat":return be(e);default:return e}case"RESET":case"NEW_ROUND":return xe();default:return e}}}),Ie=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,Re=Object(l.e)(Te,Ie(Object(l.a)(p.a))),Ce=n(19),_e=function e(t){var n=this;Object(Ce.a)(this,e),this.init=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n.state=0,n.shootLog=[],n.lastShoot=null,n.directions=["up","down","left","right"],n.directionsStack=null,n.sea=ve(xe()),n.fireDelay=250,n.firstShoot=t,e&&n.connect()},this.changeState=function(e){switch(n.state){case 0:"hit"===e&&(n.state=1);break;case 1:n.state="hit"===e?2:"sank"===e?0:1;break;case 2:n.state="hit"===e?2:"sank"===e?0:3;break;case 3:n.state="hit"===e?2:0}},this.findLogIndex=function(e){return n.shootLog.findIndex((function(t){return t.cell.toString()===e.toString()}))},this.anotherDirection=function(e){for(var t=Math.floor(4*Math.random());-1!==e.indexOf(t);)t=Math.floor(4*Math.random());return[].concat(Object(K.a)(e),[t])},this.randomDirectionsStack=function(){return Object(K.a)(Array(4)).reduce(n.anotherDirection,[]).map((function(e){return n.directions[e]}))},this.reverseDirection=function(){return(n.directions.indexOf(n.directionsStack[0])+1)%2===0?n.directions[n.directions.indexOf(n.directionsStack[0])-1]:n.directions[n.directions.indexOf(n.directionsStack[0])+1]},this.findHitIndex=function(){return n.shootLog.reduceRight((function(e,t,n){return"hit"===t.feedback&&(-1===e||e-n===1)?n:e}),-1)},this.cannotShoot=function(e){return!n.sea.enemy[e[1]]||!n.sea.enemy[e[1]][e[0]]||n.sea.enemy[e[1]][e[0]].ship||n.sea.enemy[e[1]][e[0]].miss},this.addShift=function(e,t,n){var r=Object(Z.a)(e,2),o=r[0],c=r[1];switch(t){case"up":return[o,c-n];case"down":return[o,c+n];case"left":return[o-n,c];case"right":return[o+n,c];default:return}},this.getRandomCoordinates=function(){for(var e=[],t=function(e,t){return e.findIndex((function(e){return e.toString()===t.toString()}))>=0};;){var r=[Math.floor(10*Math.random()),Math.floor(10*Math.random())];if(!t(e,r)){if(!n.cannotShoot(r))return r;e.push(r)}}},this.shoot=function(){switch(n.state){case 0:n.lastShoot=n.getRandomCoordinates();break;case 1:var e=n.findHitIndex();if(null===n.directionsStack?n.directionsStack=n.randomDirectionsStack():n.directionsStack.unshift(),0===n.directionsStack.length)return n.directionsStack=null,n.changeState("sank"),n.shoot();var t=n.directionsStack[0],r=n.addShift(n.shootLog[e].cell,t,1);if(n.cannotShoot(r)||r[0]<0||r[0]>9||r[1]<0||r[1]>9)return n.directionsStack.shift(),n.shoot();n.lastShoot=r;break;case 2:var o=n.directionsStack[0],c=n.addShift(n.lastShoot,o,1);if(n.cannotShoot(c)||c[0]<0||c[0]>9||c[1]<0||c[1]>9)return n.changeState("miss"),n.shoot();n.lastShoot=c;break;case 3:for(var a=n.reverseDirection(),i=n.findHitIndex(),u=n.addShift(n.shootLog[i].cell,a,1);n.cannotShoot(u);)u=n.addShift(u,a,1);n.lastShoot=u,n.directionsStack=[a];break;default:return}n.shootLog.push({cell:n.lastShoot}),setTimeout((function(){n.post({type:"fire",data:n.lastShoot})}),n.fireDelay)},this.send=function(e){switch(e.type){case"fire":n.sea=fe(n.sea,{payload:e}),n.post(n.sea.feedback),"miss"===n.sea.feedback.feedback&&n.shoot(),n.sea.feedback=null;break;case"feedback":n.sea=ke(n.sea,{payload:e});var t=n.findLogIndex(n.lastShoot);n.shootLog[t].feedback=e.feedback,n.changeState(e.feedback),"sank"===e.feedback&&(n.directionsStack=null),"miss"!==e.feedback&&n.shoot();break;case"defeat":n.sea=be(n.sea),n.post(n.sea.feedback),n.post({type:"repeat"}),n.init(!1,!n.firstShoot);break;case"ready":n.post({type:"ready"}),n.firstShoot&&n.shoot();break;case"victory":n.post({type:"repeat"}),n.init(!1,!n.firstShoot)}},this.connect=t.connect,this.post=t.post,this.init()},Ae=n(3),Ne=n(2);function qe(){var e=Object(Ae.a)(["var(--gray)"]);return qe=function(){return e},e}function Le(){var e=Object(Ae.a)(["var(--aqua)"]);return Le=function(){return e},e}function Me(){var e=Object(Ae.a)(["\n      :after {\n        content: '';\n        width: 10%;\n        height: 10%;\n        border-radius: 50%;\n        background-color: ",";\n      }\n    "]);return Me=function(){return e},e}function Fe(){var e=Object(Ae.a)(["var(--white)"]);return Fe=function(){return e},e}function We(){var e=Object(Ae.a)(["var(--silver)"]);return We=function(){return e},e}function Ue(){var e=Object(Ae.a)(["var(--gray)"]);return Ue=function(){return e},e}function ze(){var e=Object(Ae.a)(["var(--aqua)"]);return ze=function(){return e},e}function Ve(){var e=Object(Ae.a)(["\n      :after {\n        content: '';\n        width: 60%;\n        height: 50%;\n        background-color: ",";\n      }\n    "]);return Ve=function(){return e},e}function Ye(){var e=Object(Ae.a)(["\n  width: calc(5vmin);\n  height: calc(5vmin);\n  min-width: 26px;\n  min-height: 26px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-sizing: border-box;\n  background-color: var(--navy);\n\n  ","\n\n  ","\n"]);return Ye=function(){return e},e}var He=Ne.c.div(Ye(),(function(e){return e.ship&&Object(Ne.b)(Ve(),e.last?Object(Ne.b)(ze()):e.sank?Object(Ne.b)(Ue()):!e.isCompleted||e.hit?Object(Ne.b)(We()):Object(Ne.b)(Fe()))}),(function(e){return e.miss&&Object(Ne.b)(Me(),e.last?Object(Ne.b)(Le()):Object(Ne.b)(qe()))})),Je=function(e){var t=e.cell,n=e.squadron;if(!t)return!1;var r=$(t),o=Object(Z.a)(r,2),c=o[0],a=o[1];return n[c][a].reduce((function(e,t){return!!e&&null!==t}),!0)};function Ge(){var e=Object(Ae.a)(["\n      :before {\n        content: '","';\n        padding: 0 8px;\n        position: absolute;\n        top: -6px;\n        left: 50%;\n        width: max-content;\n        height: 16px;\n        background-color: ",";\n        transform: translateX(-50%);\n        z-index: 1;\n      }\n    "]);return Ge=function(){return e},e}function Xe(){var e=Object(Ae.a)(["\n  width: calc(50vmin + 19px);\n  height: calc(50vmin + 31px);\n  min-width: 279px;\n  min-height: 291px;\n  box-sizing: border-box;\n  position: relative;\n  border-color: ",";\n  background-color: ",";\n  color: ",";\n  border-style: solid;\n  border-width: 8px 2px;\n  box-shadow: 16px 16px var(--black);\n\n  ","\n"]);return Xe=function(){return e},e}var Be=Ne.c.div(Xe(),(function(e){return e.theme.background}),(function(e){return e.theme.background}),(function(e){return e.theme.foreground}),(function(e){return e.title&&Object(Ne.b)(Ge(),e.title,(function(e){return e.theme.background}))})),Ke=function(e){var t=e.theme,n=e.title,r=e.children;return o.a.createElement(Ne.a,{theme:t},o.a.createElement(Be,{title:n},r))},Qe={background:"var(--navy)",foreground:"var(--gray)",border:"var(--yellow)"},Ze={background:"var(--navy)",foreground:"var(--gray)",border:"var(--gray)"};function $e(){var e=Object(Ae.a)(["\n  display: grid;\n  grid-gap: 1px;\n  grid-template: repeat(10, 1fr) / repeat(10, 1fr);\n  position: relative;\n  background-color: var(--gray);\n  background-clip: content-box;\n  border: 3px double ",";\n"]);return $e=function(){return e},e}var et=Ne.c.div($e(),(function(e){return e.theme.border})),tt=Object(s.b)((function(e){return{game:e.game,peer:e.peer,sea:e.sea}}),(function(e){return{place:function(t){return e({type:"PLACE_SHIP",payload:t})}}}))((function(e){return o.a.createElement(Ke,{theme:"place"!==e.game.status&&"confirm"!==e.game.status&&e.game.move?Ze:Qe},o.a.createElement(et,null,e.sea.ally.map((function(t){return t.map((function(t){var n=t.id,r=t.ship,c=t.hit,a=t.miss,i=t.sank;return o.a.createElement(He,{key:n,id:n,last:n===e.peer.lastReceived,ship:r,hit:c,miss:a,sank:i,isCompleted:Je({cell:r,squadron:e.sea.squadron}),onClick:function(){("place"===e.game.status||"confirm"===e.game.status)&&(e.sea.shipsToPlace>0||r)&&e.place(n)}})}))}))))})),nt=Object(s.b)((function(e){return{game:e.game,peer:e.peer,sea:e.sea}}),(function(e){return{fire:function(t){return e({type:"SEND",payload:{type:"fire",data:t}})}}}))((function(e){return o.a.createElement(Ke,{theme:e.game.move?Qe:Ze},o.a.createElement(et,null,e.sea.enemy.map((function(t){return t.map((function(t){var n=t.id,r=t.ship,c=t.hit,a=t.miss,i=t.sank;return o.a.createElement(He,{key:n,id:n,last:n===e.peer.lastSent,ship:r,hit:c,miss:a,sank:i,onClick:function(){"play"===e.game.status&&e.game.move&&!e.peer.waitingForFeedback&&!c&&!a&&e.fire(n)},enemy:!0})}))}))))})),rt=n(32),ot=n.n(rt),ct=function e(t){var n=this;Object(Ce.a)(this,e),this.close=function(){n.connection=null,n.disconnect()},this.init=function(){n.peer=new ot.a,n.connection=null,n.lastPeerID=null,n.initialised(),n.peer.on("open",(function(){null===n.peer.id?n.peer.id=n.lastPeerID:n.lastPeerID=n.peer.id,n.setId(n.peer.id)})),n.peer.on("connection",(function(e){n.connection?e.on("open",e.close):(n.connection=e,n.ready())})),n.peer.on("disconnected",(function(){n.peer.id=n.lastPeerID,n.peer._lastServerID=n.lastPeerID,n.peer.reconnect()})),n.peer.on("close",n.close),n.peer.on("error",n.close)},this.join=function(e){n.connection=n.peer.connect(e,n.options),n.client(),n.ready()},this.ready=function(){n.connection.on("open",n.open),n.connection.on("data",n.data),n.connection.on("close",n.close)},this.send=function(e){n.connection&&n.connection.open&&n.connection.send(e)},this.disconnect=t.disconnect,this.initialised=t.initialised,this.client=t.client,this.setId=t.setId,this.open=t.open,this.data=t.data,this.options={reliable:!0,serialization:"json"},this.init()},at={background:"var(--teal)",foreground:"var(--black)",border:"var(--black)"};function it(){var e=Object(Ae.a)(["\n  padding: 8px;\n  height: 100%;\n  box-sizing: border-box;\n  display: flex;\n  flex-flow: row wrap;\n  align-items: center;\n  justify-content: center;\n  background-color: inherit;\n  border: 3px double ",";\n"]);return it=function(){return e},e}var ut=Ne.c.div(it(),(function(e){return e.theme.border}));function st(){var e=Object(Ae.a)(["\n  padding: 0 16px;\n  height: 16px;\n  min-width: 60px;\n  background-color: var(--white);\n  box-shadow: 8px 8px 0 var(--black);\n  color: var(--gray);\n\n  & + & {\n    margin-left: 24px;\n  }\n\n  :focus {\n    background-color: var(--yellow);\n    color: var(--maroon);\n  }\n\n  span {\n    color: var(--black);\n  }\n"]);return st=function(){return e},e}var lt=Ne.c.button(st()),pt=function(e){var t=e.autoFocus,n=e.className,r=e.onClick,c=e.text,a=void 0===c?"":c,i=e.index;return o.a.createElement(lt,{autoFocus:t,className:n,onClick:"function"===typeof r?r:void 0},void 0===i?a:[a.substring(0,i),o.a.createElement("span",{key:a},a[i]),a.substring(i+1)])};function ft(){var e=Object(Ae.a)(["\n  display: flex;\n  flex-flow: row;\n  justify-content: center;\n"]);return ft=function(){return e},e}function yt(){var e=Object(Ae.a)(["\n  position: relative;\n  background-color: var(--black);\n  color: var(--white);\n  overflow: hidden;\n\n  ",":not(:focus) + "," {\n    display: none;\n  }\n"]);return yt=function(){return e},e}function bt(){var e=Object(Ae.a)(["\n  position: absolute;\n  top: 0;\n  right: 3px;\n  z-index: 1;\n"]);return bt=function(){return e},e}function dt(){var e=Object(Ae.a)(["\n  position: absolute;\n  top: 0;\n  right: ","px;\n  animation: "," 1s linear infinite;\n"]);return dt=function(){return e},e}function Ot(){var e=Object(Ae.a)(["\n  margin: 0;\n  padding: 0 0 0 4px;\n  height: 16px;\n  min-width: 0;\n  position: relative;\n  z-index: 1;\n  background: none;\n  caret-color: transparent;\n"]);return Ot=function(){return e},e}function ht(){var e=Object(Ae.a)(["\n  0% { opacity: 1 }\n  50% { opacity: 1 }\n  51% { opacity: 0 }\n  to { opacity: 0 }\n"]);return ht=function(){return e},e}var gt=Object(Ne.d)(ht()),mt=Ne.c.input.attrs({type:"text",size:17,maxLength:16})(Ot()),jt=Ne.c.div(dt(),(function(e){return 147-9*e.caret}),gt),vt=Ne.c.div(bt()),Et=Ne.c.div(yt(),mt,jt),Pt=Ne.c.div(ft()),wt=function(e){var t=e.onInput,n=e.readonly,c=void 0!==n&&n,a=e.submit,i=e.symbols,u=e.value,s=void 0===u?"":u,l=Object(r.useRef)(null),p=Object(r.useState)(i),f=Object(Z.a)(p,2),y=f[0],b=f[1],d=function(e){"keydown"===e.type&&"Enter"===e.key?a():b(e.target.selectionEnd)};!c&&Object(r.useEffect)((function(){l.current.focus()}),[]);var O=c?{onChange:function(e){return e.preventDefault()},value:s}:{onClick:d,onKeyUp:d,onPaste:d,onChange:d,onKeyDown:d,onInput:t};return o.a.createElement(Pt,null,"[",o.a.createElement(Et,null,o.a.createElement(vt,null,"\xb7".repeat(17-i)),o.a.createElement(mt,Object.assign({ref:l},O)),!c&&o.a.createElement(jt,{caret:y},"_")),"]")};function kt(){var e=Object(Ae.a)(["\n  margin-bottom: 8px;\n  width: 100%;\n  flex: 1 0 100%;\n  align-self: flex-end;\n  display: flex;\n  justify-content: center;\n"]);return kt=function(){return e},e}var St=Ne.c.div(kt());function Dt(){var e=Object(Ae.a)(["\n  width: 100%;\n  flex: 1 0 100%;\n  align-self: flex-end;\n  text-align: center;\n"]);return Dt=function(){return e},e}var xt=Ne.c.p(Dt()),Tt=Object(s.b)((function(e){return{game:e.game,peer:e.peer}}),(function(e){return{disconnect:function(){return e({type:"RESET"})},client:function(){return e({type:"SET_IS_CLIENT"})},open:function(){return e({type:"SET_IS_CONNECTED"})},setId:function(t){return e({type:"SET_ID",payload:t})},data:function(t){return e({type:"RECEIVE",payload:t})},initialised:function(){return e({type:"SET_IS_INITIALISED"})},setInterface:function(t){return e({type:"SET_INTERFACE",payload:t})},selectType:function(t){return e({type:"SELECT_TYPE",payload:t})}}}))((function(e){var t=Object(r.useState)(""),n=Object(Z.a)(t,2),c=n[0],a=n[1],i=function(){c&&""!==c&&c!==e.peer.id&&e.peer.interface.join(c)},u=function(e){var t=e.target.value;a(t)},s=function(){a(""),e.disconnect()};Object(r.useEffect)((function(){"connect"===e.game.status&&null===e.peer.interface&&e.setInterface(new ct({disconnect:e.disconnect,initialised:e.initialised,client:e.client,setId:e.setId,open:e.open,data:e.data}))}),[e]);return o.a.createElement(Ke,{title:{choose:"select game type",connect:"connect to remote player"}[e.game.status],theme:at},o.a.createElement(ut,null,function(){switch(e.game.status){case"choose":return[o.a.createElement(xt,{key:"text"},"you want to play with"),o.a.createElement(St,{key:"buttons"},o.a.createElement(pt,{autoFocus:!0,onClick:function(){e.selectType(!0)},text:"person",index:0}),o.a.createElement(pt,{onClick:function(){e.selectType(!1)},text:"computer",index:0}))];case"connect":return""===e.peer.id?"please wait":[o.a.createElement(xt,{key:"text-input"},"share this code with someone you want to play:"),o.a.createElement(wt,{key:"output",symbols:e.peer.id.length,value:e.peer.id,readonly:!0}),o.a.createElement(xt,{key:"text-output"},"or paste code that was shared to you:"),o.a.createElement(wt,{key:"input",onInput:u,submit:i,symbols:c.length}),o.a.createElement(St,{key:"buttons"},o.a.createElement(pt,{onClick:i,text:"connect"}),o.a.createElement(pt,{onClick:s,text:"back"}))];default:return null}}()))}));function It(){var e=Object(Ae.a)(["\n  width: 0;\n  height: 0;\n"]);return It=function(){return e},e}function Rt(){var e=Object(Ae.a)(["\n  margin-top: 8px;\n  display: grid;\n  grid-gap: 1px;\n  grid-template: repeat(7, auto) / repeat(8, auto);\n"]);return Rt=function(){return e},e}var Ct=Ne.c.div(Rt()),_t=Ne.c.div(It()),At=Object(s.b)((function(e){return{game:e.game,sea:e.sea}}),(function(e){return{ready:function(){return e({type:"READY"})},random:function(){return e({type:"RANDOM"})}}}))((function(e){var t=function(t){var n=t.type,r=t.ship,o=t.deck;return null!==e.sea.squadron[n][r][o]},n=function(n){var r=n.type,c=n.ship,a=n.deck;return o.a.createElement(He,{last:e.sea.deckToPlace.type===r&&e.sea.deckToPlace.ship===c&&e.sea.deckToPlace.deck===a,ship:!t({type:r,ship:c,deck:a}),isCompleted:!0})};return o.a.createElement(Ct,null,Object(K.a)(Array(7)).reduce((function(t,r,c){return[].concat(Object(K.a)(t),c%2!==0?Object(K.a)(Object(K.a)(Array(8).keys()).map((function(e){return o.a.createElement(_t,{key:"".concat(e,"-").concat(c)})}))):Object(K.a)(e.sea.squadron[c/2].reduce((function(t,r,a){for(var i=a>0?e.sea.squadron[c/2][a-1].length*a+a:a,u=0;u<r.length;u++)t[u+i]=o.a.createElement(n,{key:"".concat(c/2,"-").concat(a,"-").concat(u),type:c/2,ship:e.sea.squadron[c/2].length-a-1,deck:r.length-u-1});return t}),Object(K.a)(Array(8)).map((function(e,t){return o.a.createElement(_t,{key:"".concat(t,"-").concat(c)})})))))}),[]))})),Nt={background:"var(--gray)",foreground:"var(--white)",border:"var(--white)"},qt=Object(s.b)((function(e){return{game:e.game}}),(function(e){return{repeat:function(){return e({type:"REPEAT"})},random:function(){return e({type:"RANDOM"})},reset:function(){return e({type:"RESET"})},ready:function(){return e({type:"READY"})}}}))((function(e){var t={victory:"you win!",defeat:"you loose!",wait:"please wait",place:"place your ships",confirm:"place your ships"};switch(e.game.status){case"defeat":case"victory":return e.game.isAllyWantRepeat?o.a.createElement(Ke,{theme:Nt,title:t[e.game.status]},o.a.createElement(ut,null,o.a.createElement("p",null,"please wait for your",o.a.createElement("br",null),"opponent to answer"))):o.a.createElement(Ke,{theme:Nt,title:t[e.game.status]},o.a.createElement(ut,null,o.a.createElement(xt,null,"play another round?"),o.a.createElement(xt,null,"pvp"===e.game.type&&e.game.isEnemyWantRepeat&&"your opponent insist"),o.a.createElement(St,null,o.a.createElement(pt,{text:"yes",index:0,onClick:e.repeat,autoFocus:!0}),o.a.createElement(pt,{text:"no",index:0,onClick:e.reset}))));case"wait":return o.a.createElement(Ke,{theme:Nt,title:t[e.game.status]},o.a.createElement(ut,null,o.a.createElement("p",null,"your opponent",o.a.createElement("br",null),"placing their ships")));case"place":case"confirm":return o.a.createElement(Ke,{theme:at,title:t[e.game.status]},o.a.createElement(ut,null,o.a.createElement(xt,null,"click on field to place",o.a.createElement("br",null),"or delete ship deck"),o.a.createElement(xt,null,"ships left:"),o.a.createElement(At,null),o.a.createElement(St,null,o.a.createElement(pt,{text:"random",index:0,onClick:e.random,autoFocus:!0}),o.a.createElement(pt,{text:"confirm",index:0,onClick:"confirm"===e.game.status&&e.ready}))));default:return null}}));function Lt(){var e=Object(Ae.a)(["\n  display: flex;\n  flex-flow: row wrap;\n  align-items: center;\n  justify-content: center;\n\n  & > div:nth-child(2) {\n    z-index: 1;\n  }\n"]);return Lt=function(){return e},e}var Mt=Ne.c.div(Lt()),Ft=Object(s.b)((function(e){return{status:e.game.status}}))((function(e){switch(e.status){case"choose":case"connect":return o.a.createElement(Tt,null);case"play":return o.a.createElement(Mt,null,o.a.createElement(tt,null),o.a.createElement(nt,null));case"defeat":return o.a.createElement(Mt,null,o.a.createElement(qt,null),o.a.createElement(nt,null));default:return o.a.createElement(Mt,null,o.a.createElement(tt,null),o.a.createElement(qt,null))}})),Wt=Object(s.b)((function(e){return{game:e.game,peer:e.peer,sea:e.sea}}),(function(e){return{changeStatus:function(t){return e({type:"CHANGE_STATUS",payload:t})},selectType:function(t){return e({type:"SELECT_TYPE",payload:t})},setInterface:function(t){return e({type:"SET_INTERFACE",payload:t})},setFirstMove:function(t){return e({type:"SET_FIRST_MOVE",payload:t})},post:function(t){return e({type:"RECEIVE",payload:t})},clearMessage:function(){return e({type:"CLEAR_MESSAGE"})},send:function(t){return e({type:"SEND",payload:t})},connect:function(){return e({type:"SET_IS_CONNECTED"})},newRound:function(){return e({type:"NEW_ROUND"})},random:function(){return e({type:"RANDOM"})},repeat:function(){return e({type:"REPEAT"})},ready:function(){return e({type:"READY"})},reset:function(){return e({type:"RESET"})}}}))((function(e){var t=function(t){var n=t.key.toLowerCase();switch(e.game.status){case"choose":"p"===n&&e.selectType(!0),"c"===n&&e.selectType(!1);break;case"place":"r"===n&&e.random();break;case"confirm":"r"===n&&e.random(),"c"===n&&e.ready();break;case"defeat":case"victory":"y"===n&&e.repeat(),"n"===n&&e.reset()}};return Object(r.useEffect)((function(){switch(document.removeEventListener("keypress",t),e.game.status){case"choose":document.addEventListener("keypress",t);break;case"connect":e.peer.isConnected&&(e.setFirstMove(e.peer.isClient),e.changeStatus("place"));break;case"place":"comp"===e.game.type&&null===e.peer.interface&&e.setInterface(new _e({connect:e.connect,post:e.post})),0===e.sea.shipsToPlace&&e.changeStatus("confirm"),document.addEventListener("keypress",t);break;case"confirm":if(0!==e.sea.shipsToPlace){e.changeStatus("place");break}if(e.game.isAllyReady){e.changeStatus(e.game.isEnemyReady?"play":"wait");break}document.addEventListener("keypress",t);break;case"wait":e.game.isEnemyReady&&e.changeStatus("play");break;case"play":break;case"defeat":case"victory":if(e.game.isAllyWantRepeat){e.game.isEnemyWantRepeat&&e.newRound();break}document.addEventListener("keypress",t)}return e.peer.message?(e.peer.interface.send(e.peer.message),e.clearMessage()):e.sea.feedback&&e.send(e.sea.feedback),function(){return document.removeEventListener("keypress",t)}}),[e]),o.a.createElement(Ft,null)}));a.a.render(o.a.createElement(s.a,{store:Re},o.a.createElement(i.a,null,o.a.createElement(u.a,{path:"/",component:Wt}))),document.getElementById("root"))}},[[37,1,2]]]);