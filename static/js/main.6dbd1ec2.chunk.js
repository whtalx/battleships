(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{25:function(e,t,r){e.exports=r(39)},30:function(e,t,r){},31:function(e,t,r){},38:function(e,t){function r(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id=38},39:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n),c=r(11),a=r.n(c),i=(r(30),r(31),r(6)),u=r(8),s=r(19),l=r(1);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var f=function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{isAllyReady:!0})};function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var b=function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{isAllyWantRepeat:!0})};function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var d=function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{move:!e.move})};function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var j=function(e,t){var r=t.payload;return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{status:r?"connect":"place",type:r?"pvp":"comp",move:!r||e.move,firstMove:!r||e.firstMove})};function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var g=function(e,t){var r=t.payload;return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{move:r,firstMove:r})};function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var P=function(e,t){var r=t.payload;return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{status:r,firstMove:"victory"===r||"defeat"===r?!e.firstMove:e.firstMove})};function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var E=function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{isEnemyReady:!0})};function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var S=function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{isEnemyWantRepeat:!0})},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"choose",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:null,isAllyReady:!1,isEnemyReady:!1,isAllyWantRepeat:!1,isEnemyWantRepeat:!1,firstMove:t,status:e,move:t}};function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var T=function(e,t){var r=t.payload;return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{message:r,waitingForFeedback:"fire"===r.type,lastSent:"fire"===r.type?"cell-".concat(r.data[0],"-").concat(r.data[1],"-enemy"):e.lastSent})};function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var C=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{id:t.payload})};function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var _=function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{message:{type:"disconnect"}})};function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var L=function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{lastSent:null,lastReceived:null})};function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var M=function(e,t){var r=t.payload;return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{waitingForFeedback:!1,lastReceived:"fire"===r.type?"cell-".concat(r.data[0],"-").concat(r.data[1],"-ally"):e.lastReceived})};function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var F=function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{isClient:!0})};function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var U=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{interface:t.payload})};function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var V=function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{message:null})};function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var H=function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{isConnected:!0})};function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var G=function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{isInitialised:!0})},X=r(5),J=function(e){return Object(X.a)(Array(10).keys()).map((function(t){return Object(X.a)(Array(10).keys()).map((function(r){return{id:"cell-".concat(r,"-").concat(t,"-").concat(e),hit:!1,miss:!1,ship:!1,sank:!1}}))}))},K=r(4);function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Z=function(e){var t=!1,r=e.squadron,n=e.deckToPlace;return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{shipsToPlace:r.reduce((function(e,r,o){return e+r.reduce((function(e,r,c){return e+r.reduce((function(e,r,a){return null===r?(t||(n={type:o,ship:c,deck:a},t=!0),1):e}),0)}),0)}),0),deckToPlace:n})};function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var ee=function(e,t,r,n,o,c){var a=o.squadron,i=o.ally;return c?(a[e][t].pop(),a[e][t].unshift(n)):a[e][t][r]=n,a[e][t].forEach((function(r,n){r&&(i[r[1]][r[0]].ship=[e,t,n])})),Z(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},o,{squadron:a,ally:i}))};function te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var re=function(e,t,r,n,o){var c=Object(K.a)(n,2),a=c[0],i=c[1],u=o.ally,s=o.squadron;return s[e][t].splice(r,1),s[e][t].push(null),u[i][a].ship=!1,s[e][t].forEach((function(r,n){r&&(u[r[1]][r[0]].ship=[e,t,n])})),Z(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?te(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},o,{ally:u,squadron:s}))},ne=function(e,t){var r=Object(K.a)(t,2),n=r[0],o=r[1];return e[o]&&e[o][n]&&e[o][n].ship},oe=function(e){return e.match(/\d+-/g).map((function(e){return parseInt(e)}))};function ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var ae=function(e,t){var r=t.payload,n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ce(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ce(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e),o=oe(r),c=ne(n.ally,o);if(c){var a=Object(K.a)(c,3),i=a[0],u=a[1],s=a[2];return 0!==s&&n.squadron[i][u][s+1]?n:re(i,u,s,o,n)}if(function(e,t){var r=Object(K.a)(t,2),n=r[0],o=r[1];return[ne(e,[n-1,o-1]),ne(e,[n+1,o-1]),ne(e,[n-1,o+1]),ne(e,[n+1,o+1])].filter((function(e){return e})).length>0}(n.ally,o))return n;var p=function(e,t){var r=Object(K.a)(t,2),n=r[0],o=r[1];return[ne(e,[n-1,o]),ne(e,[n+1,o]),ne(e,[n,o-1]),ne(e,[n,o+1])].filter((function(e){return e}))}(n.ally,o);if(1===p.length){for(var f=Object(K.a)(p[0],2),y=f[0],b=f[1],O=1;O<n.squadron[y][b].length;O++)if(null===n.squadron[y][b][O]){var d=o[0]<n.squadron[y][b][0][0]||o[1]<n.squadron[y][b][0][1];return ee(y,b,O,o,n,d)}return n}for(var h=0;h<n.squadron[n.deckToPlace.type].length;h++){var j=n.squadron[n.deckToPlace.type][h];if(j.filter((function(e){return e})).length!==j.length)return null===j[0]?ee(n.deckToPlace.type,h,0,o,n,!1):n}return n},ie=function(e){var t=e.ally,r=e.enemy,n=e.data,o=t||r,c=n,a=1===c.length?[3,3]:c[1][1]-c[0][1]===0?[c.length+2,3]:[3,c.length+2],i=Object(K.a)(a,2),u=i[0],s=i[1];return Object(X.a)(Array(s).keys()).forEach((function(e){return Object(X.a)(Array(u).keys()).forEach((function(t){return function(e,t){return 1===c.length?!(1===e&&1===t):c[1][1]-c[0][1]===0?!(e>0&&e<c.length+1&&1===t):!(t>0&&t<c.length+1&&1===e)}(t,e)&&function(e,t){var r=Object(K.a)(c[0],2),n=r[0],a=r[1];o[t+a-1]&&o[t+a-1][e+n-1]&&(o[t+a-1][e+n-1].miss=!0)}(t,e)}))})),o};function ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ue(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ue(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var le=function(e,t){var r,n=t.payload,o=e.ally,c=e.squadron,a=e.allyShipsLeft,i=Object(K.a)(n.data,2),u=i[0],s=i[1],l=ne(o,[u,s]),p=[u,s];if(l){o[s][u].hit=!0;var f=Object(K.a)(l,2),y=f[0],b=f[1];if(function(e,t){return e.reduce((function(e,r){var n=Object(K.a)(r,2),o=n[0],c=n[1];return t[c][o].hit&&e}),!0)}(c[y][b],o)){if(0===(a-=1))return se({},e,{ally:o,squadron:c,allyShipsLeft:a,feedback:{type:"defeat"}});(p=c[y][b]).forEach((function(e){o[e[1]][e[0]].sank=!0})),o=ie({ally:o,data:p}),r="sank"}else r="hit"}else r="miss",o[s][u].miss=!0;return se({},e,{ally:o,squadron:c,allyShipsLeft:a,feedback:{type:"feedback",data:p,feedback:r}})};function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var fe=function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{feedback:{type:"victory",data:e.ally.map((function(e){return e.map((function(e){return e.miss?1:e.sank?2:e.hit?3:e.ship?4:0}))}))}})},ye=function(){return Object(X.a)(Array(4).keys()).map((function(e){return Object(X.a)(Array(e+1)).map((function(){return Object(X.a)(Array(4-e)).map((function(){return null}))}))}))};function be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Oe=function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?be(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):be(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{feedback:null})};function de(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var he=[[[-3,0],[0,-3]],[[-2,0],[0,-2]],[[-1,0],[0,-1]],[[0,0],[0,0]]],je=function(e){var t=e.ally,r=e.squadron;try{r.forEach((function(e,n){r[n].forEach((function(e,o){var c=function e(t){var r=t.ally,n=t.squadron,o=t.type,c=Math.floor(Math.random()+.5),a=Math.floor(Math.random()*(10+he[o][c][0])),i=Math.floor(Math.random()*(10+he[o][c][1]));try{for(var u=-1;u<=n[o][0].length+1;u++)if(1===c&&r[i+u]&&(r[i+u][a-1]&&r[i+u][a-1].ship||r[i+u][a]&&r[i+u][a].ship||r[i+u][a+1]&&r[i+u][a+1].ship)||0===c&&(r[i-1]&&r[i-1][a+u]&&r[i-1][a+u].ship||r[i][a+u]&&r[i][a+u].ship||r[i+1]&&r[i+1][a+u]&&r[i+1][a+u].ship))return e({ally:r,squadron:n,type:o})}catch(l){var s=l.message;return console.error(s),{}}return{coordinates:[a,i],direction:c}}({ally:t,squadron:r,type:n}),a=c.coordinates,i=c.direction;if(!a)throw new Error("Browser too weak for such recursion \ud83d\ude14");var u=Object(K.a)(a,2),s=u[0],l=u[1];r[n][o]=r[n][o].map((function(e,t){return 0===i?[s+t,l]:[s,l+t]})),r[n][o].forEach((function(e,r){t[e[1]][e[0]].ship=[n,o,r]}))}))}))}catch(o){var n=o.message;console.error(n)}return Z(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?de(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):de(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{ally:t,squadron:r}))};function ve(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var ge=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ve(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ve(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{enemy:t.payload.data.map((function(e,t){return e.map((function(e,r){return{id:"cell-".concat(r,"-").concat(t,"-enemy"),miss:1===e,sank:2===e,hit:3===e||2===e,ship:4===e||3===e||2===e}}))}))})};function me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?me(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):me(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var we=function(e,t){var r=t.payload,n=r.data,o=r.feedback,c=e.ally,a=e.enemy,i=e.enemyShipsLeft;switch(o){case"miss":var u=Object(K.a)(n,2),s=u[0],l=u[1];a[l][s].miss=!0;break;case"hit":var p=Object(K.a)(n,2),f=p[0],y=p[1];a[y][f].ship=!0,a[y][f].hit=!0;break;case"sank":if(n.forEach((function(e){var t=Object(K.a)(e,2),r=t[0],n=t[1];a[n][r].hit=!0,a[n][r].ship=!0,a[n][r].sank=!0})),a=ie({enemy:a,data:n}),0===(i-=1))return Pe({},e,{ally:c,enemy:a,enemyShipsLeft:i,feedback:{type:"victory",data:c}})}return Pe({},e,{ally:c,enemy:a,enemyShipsLeft:i})};function Ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ke(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ee(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ee(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Se=function(){return{ally:J("ally"),enemy:J("enemy"),squadron:ye(),shipsToPlace:10,deckToPlace:{type:0,ship:0,deck:0},allyShipsLeft:10,enemyShipsLeft:10,feedback:null}},De=Object(u.c)({game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_TYPE":return j(e,t);case"CHANGE_STATUS":return P(e,t);case"READY":return f(e);case"REPEAT":return b(e);case"SEND":switch(t.payload.type){case"feedback":return"miss"===t.payload.feedback?d(e):e;case"victory":return P(e,{payload:"victory"});default:return e}case"RECEIVE":switch(t.payload.type){case"ready":return E(e);case"repeat":return S(e);case"feedback":return"miss"===t.payload.feedback?d(e):e;case"victory":return P(e,{payload:"defeat"});case"disconnect":return D();default:return e}case"SET_FIRST_MOVE":return g(e,t);case"RESET":return D();case"NEW_ROUND":return D("place",e.firstMove);default:return e}},peer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:"",message:null,interface:null,isClient:!1,isConnected:!1,isInitialised:!1,waitingForFeedback:!1,lastSent:null,lastReceived:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_INTERFACE":return U(e,t);case"SEND":return T(e,t);case"CLEAR_MESSAGE":return"disconnect"===e.message.type?{id:"",message:null,interface:null,isClient:!1,isConnected:!1,isInitialised:!1,waitingForFeedback:!1,lastSent:null,lastReceived:null}:V(e);case"READY":return T(e,{payload:{type:"ready"}});case"REPEAT":return T(e,{payload:{type:"repeat"}});case"RECEIVE":return"disconnect"===t.payload.type?{id:"",message:null,interface:null,isClient:!1,isConnected:!1,isInitialised:!1,waitingForFeedback:!1,lastSent:null,lastReceived:null}:M(e,t);case"SET_ID":return C(e,t);case"SET_IS_CLIENT":return F(e);case"SET_IS_CONNECTED":return H(e);case"SET_IS_INITIALISED":return G(e);case"RESET":return _(e);case"NEW_ROUND":return L(e);default:return e}},sea:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND":return"feedback"===t.payload.type||"defeat"===t.payload.type||"victory"===t.payload.type?Oe(e):e;case"PLACE_SHIP":return ae(e,t);case"RANDOM":return je(ke({},e,{ally:J("ally"),squadron:ye()}));case"RECEIVE":switch(t.payload.type){case"fire":return le(e,t);case"feedback":return we(e,t);case"victory":return ge(e,t);case"defeat":return fe(e);case"disconnect":return Se();default:return e}case"RESET":case"NEW_ROUND":return Se();default:return e}}}),xe=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,Te=Object(u.e)(De,xe(Object(u.a)(s.a))),Re=r(12),Ce=function e(t){var r=this;Object(Re.a)(this,e),this.init=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];r.state=0,r.shootLog=[],r.lastShoot=null,r.directions=["up","down","left","right"],r.directionsStack=null,r.sea=je(Se()),r.fireDelay=250,r.firstShoot=t,e&&r.connect()},this.changeState=function(e){switch(r.state){case 0:"hit"===e&&(r.state=1);break;case 1:r.state="hit"===e?2:"sank"===e?0:1;break;case 2:r.state="hit"===e?2:"sank"===e?0:3;break;case 3:r.state="hit"===e?2:0}},this.findLogIndex=function(e){return r.shootLog.findIndex((function(t){return t.cell.toString()===e.toString()}))},this.anotherDirection=function(e){for(var t=Math.floor(4*Math.random());-1!==e.indexOf(t);)t=Math.floor(4*Math.random());return[].concat(Object(X.a)(e),[t])},this.randomDirectionsStack=function(){return Object(X.a)(Array(4)).reduce(r.anotherDirection,[]).map((function(e){return r.directions[e]}))},this.reverseDirection=function(){return(r.directions.indexOf(r.directionsStack[0])+1)%2===0?r.directions[r.directions.indexOf(r.directionsStack[0])-1]:r.directions[r.directions.indexOf(r.directionsStack[0])+1]},this.findHitIndex=function(){return r.shootLog.reduceRight((function(e,t,r){return"hit"===t.feedback&&(-1===e||e-r===1)?r:e}),-1)},this.cannotShoot=function(e){return!r.sea.enemy[e[1]]||!r.sea.enemy[e[1]][e[0]]||r.sea.enemy[e[1]][e[0]].ship||r.sea.enemy[e[1]][e[0]].miss},this.addShift=function(e,t,r){var n=Object(K.a)(e,2),o=n[0],c=n[1];switch(t){case"up":return[o,c-r];case"down":return[o,c+r];case"left":return[o-r,c];case"right":return[o+r,c];default:return}},this.getRandomCoordinates=function(){for(var e=[],t=function(e,t){return e.findIndex((function(e){return e.toString()===t.toString()}))>=0};;){var n=[Math.floor(10*Math.random()),Math.floor(10*Math.random())];if(!t(e,n)){if(!r.cannotShoot(n))return n;e.push(n)}}},this.shoot=function(){switch(r.state){case 0:r.lastShoot=r.getRandomCoordinates();break;case 1:var e=r.findHitIndex();if(null===r.directionsStack?r.directionsStack=r.randomDirectionsStack():r.directionsStack.unshift(),0===r.directionsStack.length)return r.directionsStack=null,r.changeState("sank"),r.shoot();var t=r.directionsStack[0],n=r.addShift(r.shootLog[e].cell,t,1);if(r.cannotShoot(n)||n[0]<0||n[0]>9||n[1]<0||n[1]>9)return r.directionsStack.shift(),r.shoot();r.lastShoot=n;break;case 2:var o=r.directionsStack[0],c=r.addShift(r.lastShoot,o,1);if(r.cannotShoot(c)||c[0]<0||c[0]>9||c[1]<0||c[1]>9)return r.changeState("miss"),r.shoot();r.lastShoot=c;break;case 3:for(var a=r.reverseDirection(),i=r.findHitIndex(),u=r.addShift(r.shootLog[i].cell,a,1);r.cannotShoot(u);)u=r.addShift(u,a,1);r.lastShoot=u,r.directionsStack=[a];break;default:return}r.shootLog.push({cell:r.lastShoot}),setTimeout((function(){r.post({type:"fire",data:r.lastShoot})}),r.fireDelay)},this.send=function(e){switch(e.type){case"fire":r.sea=le(r.sea,{payload:e}),r.post(r.sea.feedback),"miss"===r.sea.feedback.feedback&&r.shoot(),r.sea.feedback=null;break;case"feedback":r.sea=we(r.sea,{payload:e});var t=r.findLogIndex(r.lastShoot);r.shootLog[t].feedback=e.feedback,r.changeState(e.feedback),"sank"===e.feedback&&(r.directionsStack=null),"miss"!==e.feedback&&r.shoot();break;case"defeat":r.sea=fe(r.sea),r.post(r.sea.feedback),r.post({type:"repeat"}),r.init(!1,!r.firstShoot);break;case"ready":r.post({type:"ready"}),r.firstShoot&&r.shoot();break;case"victory":r.post({type:"repeat"}),r.init(!1,!r.firstShoot)}},this.connect=t.connect,this.post=t.post,this.init()},Ie=r(3),_e=r(2);function Ae(){var e=Object(Ie.a)(["var(--gray)"]);return Ae=function(){return e},e}function Le(){var e=Object(Ie.a)(["var(--aqua)"]);return Le=function(){return e},e}function Ne(){var e=Object(Ie.a)(["\n        :after {\n          content: '';\n          width: 10%;\n          height: 10%;\n          border-radius: 50%;\n          background-color: ",";\n        }\n      "]);return Ne=function(){return e},e}function Me(){var e=Object(Ie.a)(["var(--white)"]);return Me=function(){return e},e}function qe(){var e=Object(Ie.a)(["var(--silver)"]);return qe=function(){return e},e}function Fe(){var e=Object(Ie.a)(["var(--gray)"]);return Fe=function(){return e},e}function We(){var e=Object(Ie.a)(["var(--aqua)"]);return We=function(){return e},e}function Ue(){var e=Object(Ie.a)(["\n        :after {\n          content: '';\n          width: 60%;\n          height: 50%;\n          background-color: ",";\n        }\n      "]);return Ue=function(){return e},e}function ze(){var e=Object(Ie.a)(["\n  width: 5vmin;\n  height: 5vmin;\n  min-width: 26px;\n  min-height: 26px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-sizing: border-box;\n  background-color: var(--navy);\n\n  ","\n"]);return ze=function(){return e},e}var Ve=_e.c.div(ze(),(function(e){return e.ship?Object(_e.b)(Ue(),e.last?Object(_e.b)(We()):e.sank?Object(_e.b)(Fe()):!e.isCompleted||e.hit?Object(_e.b)(qe()):Object(_e.b)(Me())):e.miss&&Object(_e.b)(Ne(),e.last?Object(_e.b)(Le()):Object(_e.b)(Ae()))}));function Ye(){var e=Object(Ie.a)(["\n  margin: 2px;\n  display: grid;\n  grid-gap: 1px;\n  grid-template: repeat(10, 1fr) / repeat(10, 1fr);\n  background-color: var(--gray);\n  border: 2px solid ",";\n"]);return Ye=function(){return e},e}var He=_e.c.div(Ye(),(function(e){return e.move?"var(--yellow)":"var(--gray)"})),Be=function(e,t){var r=Object(K.a)(e,2),n=r[0],o=r[1];return t[n][o].reduce((function(e,t){return!!e&&null!==t}),!0)};function Ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Xe=Object(i.b)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ge(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ge(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e)}),(function(e){return{place:function(t){return e({type:"PLACE_SHIP",payload:t})}}}))((function(e){var t=e.game,r=e.peer,n=e.sea,c=e.place;return o.a.createElement(He,{move:"place"===t.status||"confirm"===t.status||!t.move},n.ally.map((function(e){return e.map((function(e){var a=e.id,i=e.ship,u=e.hit,s=e.miss,l=e.sank;return o.a.createElement(Ve,{key:a,id:a,last:a===r.lastReceived,ship:Boolean(i),hit:u,miss:s,sank:l,isCompleted:i&&Be(i,n.squadron),onClick:function(){("place"===t.status||"confirm"===t.status)&&(n.shipsToPlace>0||i)&&c(a)}})}))})))}));function Je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Ke=Object(i.b)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Je(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Je(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e)}),(function(e){return{fire:function(t){return e({type:"SEND",payload:t})}}}))((function(e){var t=e.game,r=e.peer,n=e.sea,c=e.fire;return o.a.createElement(He,{move:t.move},n.enemy.map((function(e){return e.map((function(e){var n=e.id,a=e.ship,i=e.hit,u=e.miss,s=e.sank;return o.a.createElement(Ve,{enemy:!0,key:n,id:n,last:n===r.lastSent,ship:Boolean(a),hit:i,miss:u,sank:s,onClick:function(){"play"===t.status&&t.move&&!r.waitingForFeedback&&!i&&!u&&c({type:"fire",data:oe(n)})}})}))})))})),Qe=r(22),Ze=r.n(Qe),$e=function e(t){var r=this;Object(Re.a)(this,e),this.close=function(){r.connection&&r.connection.close(),r.connection=null,r.disconnect()},this.init=function(){r.peer=new Ze.a,r.connection=null,r.lastPeerID=null,r.initialised(),r.peer.on("open",(function(){null===r.peer.id?r.peer.id=r.lastPeerID:r.lastPeerID=r.peer.id,r.setId(r.peer.id)})),r.peer.on("connection",(function(e){r.connection?e.on("open",e.close):(r.connection=e,r.ready())})),r.peer.on("close",r.close),r.peer.on("error",r.error)},this.join=function(e){r.connection=r.peer.connect(e,r.options),r.client(),r.ready()},this.ready=function(){r.connection.on("open",r.open),r.connection.on("data",r.data),r.connection.on("close",r.close)},this.send=function(e){r.connection&&r.connection.open&&r.connection.send(e)},this.disconnect=t.disconnect,this.initialised=t.initialised,this.client=t.client,this.setId=t.setId,this.error=t.error,this.open=t.open,this.data=t.data,this.options={reliable:!0,serialization:"json"},this.init()},et={background:"var(--teal)",foreground:"var(--black)"};function tt(){var e=Object(Ie.a)(["\n      :before {\n        content: '","';\n        padding: 0 8px;\n        position: absolute;\n        top: -6px;\n        left: 50%;\n        width: max-content;\n        height: 16px;\n        background-color: ",";\n        transform: translateX(-50%);\n        z-index: 1;\n      }\n    "]);return tt=function(){return e},e}function rt(){var e=Object(Ie.a)(["\n  margin: 2px;\n  box-sizing: border-box;\n  position: relative;\n  border-color: ",";\n  background-color: ",";\n  color: ",";\n  border-style: solid;\n  border-width: 8px 4px;\n  box-shadow: ",";\n\n  ","\n"]);return rt=function(){return e},e}var nt=_e.c.div(rt(),(function(e){return e.theme.background}),(function(e){return e.theme.background}),(function(e){return e.theme.foreground}),(function(e){return e.modal?"none":"16px 16px var(--black)"}),(function(e){return e.title_&&Object(_e.b)(tt(),e.title_,(function(e){return e.theme.background}))})),ot=function(e){var t=e.theme,r=e.title,n=e.modal,c=e.children;return o.a.createElement(_e.a,{theme:t},o.a.createElement(nt,{title_:r,modal:n},c))};function ct(){var e=Object(Ie.a)(["\n        width: 265px;\n        height: 257px;\n      "]);return ct=function(){return e},e}function at(){var e=Object(Ie.a)(["\n        width: calc(50vmin + 5px);\n        height: calc(50vmin - 4px);\n        min-width: 265px;\n        min-height: 257px;\n      "]);return at=function(){return e},e}function it(){var e=Object(Ie.a)(["\n  padding: 8px;\n  box-sizing: border-box;\n  display: flex;\n  flex-flow: row wrap;\n  align-items: center;\n  justify-content: center;\n  background-color: inherit;\n  border: 3px double ",";\n\n  ","\n"]);return it=function(){return e},e}var ut=_e.c.div(it(),(function(e){return e.theme.border}),(function(e){return e.modal?Object(_e.b)(at()):e.select&&Object(_e.b)(ct())}));function st(){var e=Object(Ie.a)(["\n  padding: 0 16px;\n  height: 16px;\n  min-width: 64px;\n  background-color: var(--white);\n  box-shadow: 8px 8px 0 var(--black);\n  color: var(--gray);\n\n  & + & {\n    margin-left: 24px;\n  }\n\n  :focus {\n    background-color: var(--yellow);\n    color: var(--maroon);\n  }\n\n  span {\n    color: var(--black);\n  }\n"]);return st=function(){return e},e}var lt=_e.c.button(st()),pt=function(e){var t=e.autoFocus,r=e.className,n=e.onClick,c=e.text,a=void 0===c?"":c,i=e.index;return o.a.createElement(lt,{autoFocus:t,className:r,onClick:"function"===typeof n?n:void 0},function(e){var t=e.index,r=e.text;return void 0===t?r:[r.substring(0,t),o.a.createElement("span",{key:r},r[t]),r.substring(t+1)]}({index:i,text:a}))};function ft(){var e=Object(Ie.a)(["\n  display: flex;\n  flex-flow: row;\n  justify-content: center;\n"]);return ft=function(){return e},e}function yt(){var e=Object(Ie.a)(["\n  position: relative;\n  background-color: var(--black);\n  color: var(--white);\n  overflow: hidden;\n\n  ",":not(:focus) + "," {\n    display: none;\n  }\n"]);return yt=function(){return e},e}function bt(){var e=Object(Ie.a)(["\n  position: absolute;\n  top: 0;\n  right: 1px;\n  z-index: 1;\n"]);return bt=function(){return e},e}function Ot(){var e=Object(Ie.a)(["\n  position: absolute;\n  top: 0;\n  right: ","px;\n  animation: "," 1s linear infinite;\n"]);return Ot=function(){return e},e}function dt(){var e=Object(Ie.a)(["\n  margin: 0;\n  padding: 0 0 0 4px;\n  height: 16px;\n  min-width: 0;\n  position: relative;\n  z-index: 1;\n  background: none;\n  caret-color: transparent;\n  color: ",";\n"]);return dt=function(){return e},e}function ht(){var e=Object(Ie.a)(["\n  0% { opacity: 1 }\n  50% { opacity: 1 }\n  51% { opacity: 0 }\n  to { opacity: 0 }\n"]);return ht=function(){return e},e}var jt=Object(_e.d)(ht()),vt=_e.c.input.attrs({type:"text",size:17,maxLength:16})(dt(),(function(e){return e.error?"var(--maroon)":"inherit"})),gt=_e.c.div.attrs({children:"_"})(Ot(),(function(e){return 145-9*e.caret}),jt),mt=_e.c.div(bt()),Pt=_e.c.div(yt(),vt,gt),wt=_e.c.div(ft()),Et=function(e){var t=e.onInput,r=e.readonly,c=void 0!==r&&r,a=e.submit,i=e.symbols,u=e.value,s=void 0===u?"":u,l=e.error,p=Object(n.useRef)(null),f=Object(n.useState)(i),y=Object(K.a)(f,2),b=y[0],O=y[1],d=function(e){"keydown"===e.type&&"Enter"===e.key?a():O(e.target.selectionEnd)};!c&&Object(n.useEffect)((function(){p.current.focus()}),[]);var h=c?{onChange:function(e){(0,e.preventDefault)()},value:s}:{onClick:d,onKeyUp:d,onPaste:d,onChange:d,onKeyDown:d,onInput:t,error:l};return o.a.createElement(wt,null,"[",o.a.createElement(Pt,null,o.a.createElement(mt,null,"\xb7".repeat(17-i)),o.a.createElement(vt,Object.assign({ref:p},h)),!c&&o.a.createElement(gt,{caret:b})),"]")};function kt(){var e=Object(Ie.a)(["\n  margin-bottom: 8px;\n  width: 100%;\n  flex: 1 0 100%;\n  align-self: flex-end;\n  display: flex;\n  justify-content: center;\n"]);return kt=function(){return e},e}var St=_e.c.div(kt());function Dt(){var e=Object(Ie.a)(["\n  width: 100%;\n  flex: 1 0 100%;\n  align-self: flex-end;\n  text-align: center;\n"]);return Dt=function(){return e},e}var xt=_e.c.p(Dt()),Tt=Object(i.b)((function(e){return{game:e.game,peer:e.peer}}),(function(e){return{disconnect:function(){return e({type:"RESET"})},client:function(){return e({type:"SET_IS_CLIENT"})},open:function(){return e({type:"SET_IS_CONNECTED"})},setId:function(t){return e({type:"SET_ID",payload:t})},data:function(t){return e({type:"RECEIVE",payload:t})},initialised:function(){return e({type:"SET_IS_INITIALISED"})},setInterface:function(t){return e({type:"SET_INTERFACE",payload:t})},computer:function(){return e({type:"SELECT_TYPE",payload:!1})},person:function(){return e({type:"SELECT_TYPE",payload:!0})}}}))((function(e){var t=e.game,r=e.peer,c=e.disconnect,a=e.client,i=e.open,u=e.setId,s=e.data,l=e.initialised,p=e.setInterface,f=e.computer,y=e.person,b=Object(n.useState)(""),O=Object(K.a)(b,2),d=O[0],h=O[1],j=Object(n.useState)(!1),v=Object(K.a)(j,2),g=v[0],m=v[1],P=function(){!g&&d&&""!==d&&d!==r.id&&r.interface.join(d)},w=function(e){var t=e.target.value;m(!1),h(t)},E=function(){h(""),c()};Object(n.useEffect)((function(){"connect"===t.status&&null===r.interface&&p(new $e({initialised:l,disconnect:c,client:a,setId:u,open:i,data:s,error:function(){return m(!0)}}))}),[t.status]);return o.a.createElement(ot,{title:{choose:"select game type",connect:"connect to remote player"}[t.status],theme:et},function(){switch(t.status){case"choose":return o.a.createElement(ut,{select:!0},o.a.createElement(xt,null,"you want to play with"),o.a.createElement(St,null,o.a.createElement(pt,{autoFocus:!0,onClick:y,text:"person",index:0}),o.a.createElement(pt,{onClick:f,text:"computer",index:0})));case"connect":return""===r.id?o.a.createElement(ut,{select:!0},"please wait"):o.a.createElement(ut,{select:!0},o.a.createElement(xt,null,"share this code with someone you want to play:"),o.a.createElement(Et,{symbols:r.id.length,value:r.id,readonly:!0}),o.a.createElement(xt,null,"or paste code that was shared to you:"),o.a.createElement(Et,{onInput:w,submit:P,symbols:d.length,error:g}),o.a.createElement(St,null,o.a.createElement(pt,{onClick:P,text:"connect"}),o.a.createElement(pt,{onClick:E,text:"back"})));default:return null}}())}));function Rt(){var e=Object(Ie.a)(["\n  width: 0;\n  height: 0;\n"]);return Rt=function(){return e},e}function Ct(){var e=Object(Ie.a)(["\n  margin-top: 8px;\n  display: grid;\n  grid-gap: 1px;\n  grid-template: repeat(7, auto) / repeat(8, auto);\n"]);return Ct=function(){return e},e}var It=_e.c.div(Ct()),_t=_e.c.div(Rt()),At=Object(i.b)((function(e){return{sea:e.sea}}))((function(e){var t=e.sea,r=function(e){var r=e.type,n=e.ship,o=e.deck;return null!==t.squadron[r][n][o]},n=function(e){var n=e.type,c=e.ship,a=e.deck;return o.a.createElement(Ve,{key:"".concat(n,"-").concat(c,"-").concat(a),last:t.deckToPlace.type===n&&t.deckToPlace.ship===c&&t.deckToPlace.deck===a,ship:!r({type:n,ship:c,deck:a}),isCompleted:!0})},c=function(e){var t=e.y;return Object(X.a)(Array(8).keys()).map((function(e){return o.a.createElement(_t,{key:"".concat(e,"-").concat(t)})}))};return o.a.createElement(It,null,Object(X.a)(Array(7)).reduce((function(e,r,o){return[].concat(Object(X.a)(e),o%2!==0?Object(X.a)(c({y:o})):Object(X.a)(t.squadron[o/2].reduce((function(e,r,c){for(var a=o/2,i=t.squadron[a].length-c-1,u=c>0?t.squadron[a][c-1].length*c+c:c,s=0;s<r.length;s++){var l=r.length-s-1;e[s+u]=n({type:a,ship:i,deck:l})}return e}),c({y:o}))))}),[]))})),Lt={background:"var(--gray)",foreground:"var(--white)"},Nt=Object(i.b)((function(e){return{game:e.game}}),(function(e){return{repeat:function(){return e({type:"REPEAT"})},random:function(){return e({type:"RANDOM"})},ready:function(){return e({type:"READY"})},reset:function(){return e({type:"RESET"})}}}))((function(e){var t=e.game,r=e.repeat,n=e.random,c=e.reset,a=e.ready,i={wait:"please wait",victory:"you win!",defeat:"you loose!",place:"place your ships",confirm:"place your ships"};switch(t.status){case"defeat":case"victory":return o.a.createElement(ot,{theme:Lt,title:i[t.status],modal:!0},t.isAllyWantRepeat?o.a.createElement(ut,{modal:!0},o.a.createElement("p",null,"please wait for your",o.a.createElement("br",null),"opponent to answer")):o.a.createElement(ut,{modal:!0},o.a.createElement(xt,null,"play another round?"),o.a.createElement(xt,null,"pvp"===t.type&&t.isEnemyWantRepeat&&"your opponent insist"),o.a.createElement(St,null,o.a.createElement(pt,{text:"yes",index:0,onClick:r,autoFocus:!0}),o.a.createElement(pt,{text:"no",index:0,onClick:c}))));case"wait":return o.a.createElement(ot,{theme:Lt,title:i[t.status],modal:!0},o.a.createElement(ut,{modal:!0},o.a.createElement("p",null,"your opponent",o.a.createElement("br",null),"placing their ships")));case"place":case"confirm":return o.a.createElement(ot,{theme:et,title:i[t.status],modal:!0},o.a.createElement(ut,{modal:!0},o.a.createElement(xt,null,"click on field to place",o.a.createElement("br",null),"or delete ship deck"),o.a.createElement(xt,null,"ships left:"),o.a.createElement(At,null),o.a.createElement(St,null,o.a.createElement(pt,{text:"random",index:0,onClick:n,autoFocus:!0}),o.a.createElement(pt,{text:"confirm",index:0,onClick:"confirm"===t.status&&a}))));default:return null}})),Mt={background:"var(--navy)",foreground:"var(--white)"};function qt(){var e=Object(Ie.a)(["\n  padding: 8px 2px;\n  display: flex;\n  flex-flow: row;\n  align-items: center;\n  justify-content: center;\n  border: 3px double ",";\n\n  & > div:nth-child(2) {\n    margin-left: 8px;\n  }\n\n  @media screen and (max-aspect-ratio: 11/10) {\n    flex-flow: column;\n\n    & > div:nth-child(2) {\n      margin: 8px 2px 2px;\n    }\n  }\n"]);return qt=function(){return e},e}var Ft=_e.c.div(qt(),(function(e){return e.theme.border})),Wt=function(e){var t=e.children;return o.a.createElement(ot,{title:"battleships",theme:Mt},o.a.createElement(Ft,null,t))},Ut=Object(i.b)((function(e){return{status:e.game.status}}))((function(e){switch(e.status){case"choose":case"connect":return o.a.createElement(Tt,null);case"play":return o.a.createElement(Wt,null,o.a.createElement(Xe,null),o.a.createElement(Ke,null));case"defeat":return o.a.createElement(Wt,null,o.a.createElement(Nt,null),o.a.createElement(Ke,null));default:return o.a.createElement(Wt,null,o.a.createElement(Xe,null),o.a.createElement(Nt,null))}}));function zt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Vt=Object(i.b)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zt(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zt(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e)}),(function(e){return{changeStatus:function(t){return e({type:"CHANGE_STATUS",payload:t})},selectType:function(t){return e({type:"SELECT_TYPE",payload:t})},setFirstMove:function(t){return e({type:"SET_FIRST_MOVE",payload:t})},setInterface:function(t){return e({type:"SET_INTERFACE",payload:t})},post:function(t){return e({type:"RECEIVE",payload:t})},clearMessage:function(){return e({type:"CLEAR_MESSAGE"})},send:function(t){return e({type:"SEND",payload:t})},connect:function(){return e({type:"SET_IS_CONNECTED"})},newRound:function(){return e({type:"NEW_ROUND"})},random:function(){return e({type:"RANDOM"})},repeat:function(){return e({type:"REPEAT"})},ready:function(){return e({type:"READY"})},reset:function(){return e({type:"RESET"})}}}))((function(e){var t=e.game,r=e.peer,c=e.sea,a=e.changeStatus,i=e.selectType,u=e.setFirstMove,s=e.setInterface,l=e.post,p=e.clearMessage,f=e.send,y=e.connect,b=e.newRound,O=e.random,d=e.repeat,h=e.ready,j=e.reset,v=function(e){switch(t.status){case"choose":var r=e.key.toLowerCase();return"p"===r&&i(!0),void("c"===r&&i(!1));case"place":return void("r"===e.key.toLowerCase()&&O());case"confirm":var n=e.key.toLowerCase();return"r"===n&&O(),void("c"===n&&h());case"defeat":case"victory":var o=e.key.toLowerCase();return"y"===o&&d(),void("n"===o&&j());default:return}};return Object(n.useEffect)((function(){switch(document.removeEventListener("keypress",v),t.status){case"choose":document.addEventListener("keypress",v);break;case"connect":r.isConnected&&(u(r.isClient),a("place"));break;case"place":"comp"===t.type&&null===r.interface&&s(new Ce({connect:y,post:l})),0===c.shipsToPlace&&a("confirm"),document.addEventListener("keypress",v);break;case"confirm":if(0!==c.shipsToPlace){a("place");break}if(t.isAllyReady){a(t.isEnemyReady?"play":"wait");break}document.addEventListener("keypress",v);break;case"wait":t.isEnemyReady&&a("play");break;case"play":break;case"defeat":case"victory":if(t.isAllyWantRepeat){t.isEnemyWantRepeat&&b();break}document.addEventListener("keypress",v)}return r.message?(r.interface.send(r.message),p()):c.feedback&&f(c.feedback),function(){return document.removeEventListener("keypress",v)}}),[t.status,t.isAllyReady,t.isEnemyReady,t.isAllyWantRepeat,t.isEnemyWantRepeat,r.isConnected,r.message,c.feedback,c.shipsToPlace]),o.a.createElement(Ut,null)}));a.a.render(o.a.createElement(i.a,{store:Te},o.a.createElement(Vt,null)),document.getElementById("root"))}},[[25,1,2]]]);