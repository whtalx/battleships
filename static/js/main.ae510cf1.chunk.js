(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{36:function(e,t,n){e.exports=n(49)},41:function(e,t,n){},47:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=47},49:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),o=n(18),a=n.n(o),i=n(32),u=n(15),s=(n(41),n(6)),l=n(14),p=n(28),f=n(1);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var b=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{isAllyReady:!0})};function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var d=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{isAllyWantRepeat:!0})};function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var g=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{move:!e.move})};function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var h=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{status:t.payload?"connect":"place",type:t.payload?"pvp":"comp",isEnemyReady:!t.payload||e.isEnemyReady})};function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var P=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{status:t.payload})};function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var E=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{isEnemyReady:!0})};function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var k=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{isEnemyWantRepeat:!0})},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"connect",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:null,isAllyReady:!1,isEnemyReady:!1,isAllyWantRepeat:!1,isEnemyWantRepeat:!1,status:e,move:t}},I=function(e){return e.match(/\d+-/g).map((function(e){return parseInt(e)}))};function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var T=function(e,t){var n="fire"===t.payload.type?{type:"fire",data:I(t.payload.data)}:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t.payload);return e.interface.send(n),console.log("sent:     ",JSON.parse(JSON.stringify(n))),e};function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var A=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{},t.payload)},N=function(e,t){return console.log("received: ",JSON.parse(JSON.stringify(t.payload))),e};function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var M=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{peerID:t.payload})};function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var _=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{isConnected:t.payload})};function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var L=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{isInitialised:t.payload})},Z=n(5),H=function(e){var t=Object(Z.a)(Array(10).keys());return t.map((function(n){return t.map((function(t){return{id:"cell-".concat(t,"-").concat(n,"-").concat(e),hit:!1,miss:!1,ship:!1,sank:!1}}))}))},W=n(11),B=function(e){return e.split("-").map((function(e){return parseInt(e)}))};function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var U=function(e){return e.map((function(e){return null===e[0]?1:1===e.length?0:e.reduce((function(e,t){return 1===e?1:null===t?1:0}))})).reduce((function(e,t){return e+t}))},J=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);t.shipsToPlace.fourDecker=U(e.squadron[0]),t.shipsToPlace.threeDecker=U(e.squadron[1]),t.shipsToPlace.twoDecker=U(e.squadron[2]),t.shipsToPlace.singleDecker=U(e.squadron[3]),t.shipsToPlace.total=0;var n=Object.values(t.shipsToPlace);return t.shipsToPlace.total=n.reduce((function(e,t){return e+t})),t.currentType=n.findIndex((function(e){return 0!==e})),t};function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Y=function(e,t,n,r,c,o){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},c);return o?(a.squadron[e][t].pop(),a.squadron[e][t].unshift(r)):a.squadron[e][t][n]=r,a.squadron[e][t].forEach((function(n,r){n&&(a.ally[n[1]][n[0]].ship="".concat(e,"-").concat(t,"-").concat(r))})),J(a)},Q=function(e,t){return e[t[1]][t[0]].ship};function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var X=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),r=I(t.payload),c=Q(n.ally,r);if(c){var o=B(c),a=Object(W.a)(o,3),i=a[0],u=a[1],s=a[2];return 0===s?(n.squadron[i][u].shift(),n.squadron[i][u].push(null),n.squadron[i][u].forEach((function(e,t){e&&(n.ally[e[1]][e[0]].ship="".concat(i,"-").concat(u,"-").concat(t))})),n.ally[r[1]][r[0]].ship=!1):s!==n.squadron[i][u].length-1&&null!==n.squadron[i][u][s+1]||(n.squadron[i][u][s]=null,n.ally[r[1]][r[0]].ship=!1),J(n)}if(function(e,t){return e[t[1]-1]&&(e[t[1]-1][t[0]-1]&&e[t[1]-1][t[0]-1].ship||e[t[1]-1][t[0]+1]&&e[t[1]-1][t[0]+1].ship)||e[t[1]+1]&&(e[t[1]+1][t[0]-1]&&e[t[1]+1][t[0]-1].ship||e[t[1]+1][t[0]+1]&&e[t[1]+1][t[0]+1].ship)}(n.ally,r))return n;var l=function(e,t){return e[t[1]-1]&&e[t[1]-1][t[0]]&&e[t[1]-1][t[0]].ship||e[t[1]+1]&&e[t[1]+1][t[0]]&&e[t[1]+1][t[0]].ship||e[t[0]-1]&&e[t[1]][t[0]-1]&&e[t[1]][t[0]-1].ship||e[t[0]+1]&&e[t[1]][t[0]+1]&&e[t[1]][t[0]+1].ship}(n.ally,r);if(l){for(var p=l.split("-").map((function(e){return parseInt(e)})),y=Object(W.a)(p,2),b=y[0],O=y[1],d=1;d<n.squadron[b][O].length;d++)if(null===n.squadron[b][O][d]){var m=r[0]<n.squadron[b][O][0][0]||r[1]<n.squadron[b][O][0][1];return Y(b,O,d,r,n,m)}return n}for(var g=0;g<n.squadron.length;g++)for(var j=0;j<n.squadron[g].length;j++)for(var h=0;h<n.squadron[g][j].length;h++)if(null===n.squadron[g][j][h])return 0===h?Y(g,j,h,r,n,!1):n;return n},K=function(e,t){var n=1===t.length?[3,3]:t[1][1]-t[0][1]===0?[t.length+2,3]:[3,t.length+2],r=Object(W.a)(n,2),c=r[0],o=r[1];return Object(Z.a)(Array(o).keys()).forEach((function(n){Object(Z.a)(Array(c).keys()).forEach((function(r){(function(e,n){return 1===t.length?!(1===e&&1===n):t[1][1]-t[0][1]===0?!(e>0&&e<t.length+1&&1===n):!(n>0&&n<t.length+1&&1===e)})(r,n)&&function(n,r){var c=t[0];e[r-1+c[1]]&&e[r-1+c[1]][n-1+c[0]]&&(e[r-1+c[1]][n-1+c[0]].miss=!0)}(r,n)}))})),e};function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ee=function(e,t){var n,r,c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),o=Object(Z.a)(t.payload.data),a=Q(c.ally,o);if(a){n="hit",c.ally[o[1]][o[0]].hit=!0;var i=B(a),u=Object(W.a)(i,2),s=u[0],l=u[1];if(c.squadron[s][l].reduce((function(e,t){return c.ally[t[1]][t[0]].hit&&e}),!0)){if(n="sank",r=[],c.squadron[s][l].forEach((function(e){c.ally[e[1]][e[0]].sank=!0,r.push(e)})),c.ally=K(c.ally,r),c.allyShipsLeft-=1,0===c.allyShipsLeft)return c.feedback={type:"defeat"},c}else r=[o]}else n="miss",c.ally[o[1]][o[0]].miss=!0,r=[o];return c.feedback={type:"feedback",data:r,feedback:n},c};function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ne=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{feedback:null})};function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var oe=function(e){var t=ce({},e),n=[[[-3,0],[0,-3]],[[-2,0],[0,-2]],[[-1,0],[0,-1]],[[0,0],[0,0]]];return function(e){var r=ce({},e);try{return r.squadron.forEach((function(e,c){r.squadron[c].forEach((function(e,o){var a=Math.round(Math.random()),i=function e(r,c){var o=[Math.floor(Math.random()*(10+n[r][c][0])),Math.floor(Math.random()*(10+n[r][c][1]))];try{for(var a=-1;a<=t.squadron[r][0].length+1;a++)if(c&&void 0!==t.ally[o[1]+a]&&(void 0!==t.ally[o[1]+a][o[0]-1]&&t.ally[o[1]+a][o[0]-1].ship||void 0!==t.ally[o[1]+a][o[0]]&&t.ally[o[1]+a][o[0]].ship||void 0!==t.ally[o[1]+a][o[0]+1]&&t.ally[o[1]+a][o[0]+1].ship)||void 0!==t.ally[o[1]-1]&&void 0!==t.ally[o[1]-1][o[0]+a]&&t.ally[o[1]-1][o[0]+a].ship||void 0!==t.ally[o[1]][o[0]+a]&&t.ally[o[1]][o[0]+a].ship||void 0!==t.ally[o[1]+1]&&void 0!==t.ally[o[1]+1][o[0]+a]&&t.ally[o[1]+1][o[0]+a].ship)return e(r,c)}catch(i){return void console.error(i)}return o}(c,a);if(!i)throw new Error("javascript too weak for much recursion");r.squadron[c][o]=r.squadron[c][o].map((function(e,t){return 0===a?[i[0]+t,i[1]]:[i[0],i[1]+t]})),r.squadron[c][o].forEach((function(e,t){e&&(r.ally[e[1]][e[0]].ship="".concat(c,"-").concat(o,"-").concat(t))}))}))})),r.shipsToPlace={fourDecker:0,threeDecker:0,twoDecker:0,singleDecker:0,total:0},J(r)}catch(c){return console.error(c),e}}(t)};function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ie=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{feedback:{type:"victory",data:Object(Z.a)(e.ally.map((function(e){return e.map((function(e){var t={};return e.ship&&(t.ship=!0),e.hit&&(t.hit=e.hit),e.miss&&(t.miss=e.miss),e.sank&&(t.sank=e.sank),t}))})))}})};function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var le=function(e,t){return se({},e,{enemy:Object(Z.a)(t.payload.data.map((function(e,t){return e.map((function(e,n){return se({},e,{id:"cell-".concat(n,"-").concat(t,"-enemy")})}))})))})};function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var fe=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),r=Object(Z.a)(t.payload.data);switch(t.payload.feedback){case"miss":n.enemy[r[0][1]][r[0][0]].miss=!0;break;case"hit":n.enemy[r[0][1]][r[0][0]].ship=!0,n.enemy[r[0][1]][r[0][0]].hit=!0;break;case"sank":if(r.forEach((function(e){n.enemy[e[1]][e[0]].hit=!0,n.enemy[e[1]][e[0]].ship=!0,n.enemy[e[1]][e[0]].sank=!0})),n.enemy=K(n.enemy,r),n.enemyShipsLeft-=1,0===n.enemyShipsLeft)return n.feedback={type:"victory",data:Object(Z.a)(n.ally)},n}return n};function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Oe=function(){return{ally:H("ally"),enemy:H("enemy"),squadron:Object(Z.a)(Array(4).keys()).map((function(e){return Object(Z.a)(Array(e+1)).map((function(t){return Object(Z.a)(Array(4-e)).map((function(e){return null}))}))})),shipsToPlace:{fourDecker:1,threeDecker:2,twoDecker:3,singleDecker:4,total:10},currentType:0,allyShipsLeft:10,enemyShipsLeft:10,feedback:null}},de=Object(l.c)({game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_TYPE":return h(e,t);case"CHANGE_STATUS":return P(e,t);case"READY":return b(e);case"REPEAT":return d(e);case"SEND":switch(t.payload.type){case"feedback":return"miss"===t.payload.feedback?g(e):e;case"victory":return P(e,{payload:"victory"});default:return e}case"RECEIVE":switch(t.payload.type){case"ready":return E(e);case"repeat":return k(e);case"feedback":return"miss"===t.payload.feedback?g(e):e;case"victory":return P(e,{payload:"defeat"});default:return e}case"SET_MOVE":return t.payload?g(e):e;case"RESET":return S();case"NEW_ROUND":return S("place",!e.move);default:return e}},rtc:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{peerID:"",interface:null,isClient:!1,isConnected:!1,isInitialised:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_RTC":return A(e,t);case"SEND":return T(e,t);case"READY":return T(e,{payload:{type:"ready"}});case"REPEAT":return T(e,{payload:{type:"repeat"}});case"RECEIVE":return N(e,t);case"SET_PEER_ID":return M(e,t);case"SET_IS_CONNECTED":return _(e,t);case"SET_IS_INITIALISED":return L(e,t);case"RESET":return{peerID:"",interface:null,isClient:!1,isConnected:!1,isInitialised:!1};default:return e}},sea:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND":return"feedback"===t.payload.type?ne(e):e;case"PLACE_SHIP":return X(e,t);case"RANDOM":return oe(be({},e,{ally:H("ally")}));case"RECEIVE":switch(t.payload.type){case"fire":return ee(e,t);case"feedback":return fe(e,t);case"victory":return le(e,t);case"defeat":return ie(e);default:return e}case"RESET":case"NEW_ROUND":return Oe();default:return e}}}),me=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,ge=Object(l.e)(de,me(Object(l.a)(p.a))),je=n(2),he=n(3);function ve(){var e=Object(je.a)(["\n  margin: 10px;\n  padding: 0 1px 1px 0;\n  min-width: 300px;\n  min-height: 300px;\n  width: calc(50vmin - 26px);\n  height: calc(50vmin - 26px);\n  position: relative;\n  display: grid;\n  grid-template: repeat(10, 1fr) / repeat(10, 1fr);\n  border: 3px double ",";\n  // TODO: fix padding-bottom in ios\n"]);return ve=function(){return e},e}var Pe=he.b.div(ve(),(function(e){return e.border?e.move?"#555":"#aaa":"#000"}));function we(){var e=Object(je.a)(["\n      :hover {\n        background-image: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMzAgMzAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgZmlsbD0iI2FhYSI+PGNpcmNsZSBjeD0iMTUiIGN5PSIxNSIgcj0iMSIvPjwvc3ZnPg==);\n      }\n    "]);return we=function(){return e},e}function Ee(){var e=Object(je.a)(["\n      background-image: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMzAgMzAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgZmlsbD0iIzU1NSI+PGNpcmNsZSBjeD0iMTUiIGN5PSIxNSIgcj0iMSIvPjwvc3ZnPg==);\n    "]);return Ee=function(){return e},e}function De(){var e=Object(je.a)(["\n          background-image: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMzAgMzAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjYWFhIiBzdHJva2Utd2lkdGg9IjEiPjxwYXRoIGQ9Ik0wIDBMMzAgMzBaTTAgMzBMMzAgMFoiLz48L3N2Zz4=);\n        "]);return De=function(){return e},e}function ke(){var e=Object(je.a)(["\n          border-color: #333;\n          background-image: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMzAgMzAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNTU1IiBzdHJva2Utd2lkdGg9IjEiPjxwYXRoIGQ9Ik0wIDBMMzAgMzBaTTAgMzBMMzAgMFoiLz48L3N2Zz4=);\n        "]);return ke=function(){return e},e}function Se(){var e=Object(je.a)(["\n      border: 1px solid #aaa;\n    "]);return Se=function(){return e},e}function Ie(){var e=Object(je.a)(["\n      z-index: 1;\n      border-color: #aaa;\n      border-style: solid;\n      border-width: 0;\n\n      :nth-child(n + 11) {\n        border-top-width: 1px;\n      }\n\n      :not(:nth-child(10n + 1)) {\n        border-left-width: 1px;\n      }\n\n      :not(:nth-child(10n + 10)) {\n        border-right-width: 1px;\n      }\n\n      :not(:nth-child(n + 91)) {\n        border-bottom-width: 1px;\n      }\n    "]);return Ie=function(){return e},e}function xe(){var e=Object(je.a)(["\n      :nth-child(n + 11) {\n        border-top: 1px dotted #333;\n      }\n\n      :not(:nth-child(10n + 1)) {\n        border-left: 1px dotted #333;\n      }\n    "]);return xe=function(){return e},e}function Te(){var e=Object(je.a)(["\n  margin: 0 -1px -1px 0;\n  box-sizing: border-box;\n  background-clip: content-box;\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: 100% 100%;\n\n\n  ","\n\n  ","\n\n  ","\n\n  ","\n\n  ","\n\n  ","\n"]);return Te=function(){return e},e}var Re=he.b.div(Te(),(function(e){return!e.place&&!e.ship&&Object(he.a)(xe())}),(function(e){return e.ship&&Object(he.a)(Ie())}),(function(e){return e.place&&Object(he.a)(Se())}),(function(e){return(e.hit||e.times)&&(e.sank?Object(he.a)(ke()):Object(he.a)(De()))}),(function(e){return e.miss&&Object(he.a)(Ee())}),(function(e){return e.enemy&&e.move&&!e.miss&&!e.hit&&!e.ship&&Object(he.a)(we())})),Ae=function(e){return c.a.createElement(Re,{enemy:e.enemy,ship:e.data&&e.data.ship,sank:e.data&&e.data.sank,hit:e.data&&e.data.hit,miss:e.data&&e.data.miss,place:e.place,times:e.times,move:e.move,className:e.className,children:e.children,onClick:function(){e.onClick&&e.enemy===e.move&&!e.data.hit&&!e.data.miss&&e.onClick(e.data.id)}})},Ne=Object(s.b)((function(e){return{game:e.game,sea:e.sea}}),(function(e){return{place:function(t){return e({type:"PLACE_SHIP",payload:t})}}}))((function(e){return c.a.createElement(Pe,{border:!0,move:e.game.move},e.sea.ally.map((function(t){return t.map((function(t){return c.a.createElement(Ae,{key:t.id,data:t,onClick:("place"===e.game.status||"confirm"===e.game.status)&&e.place})}))})))})),Ce=Object(s.b)((function(e){return{game:e.game,sea:e.sea}}),(function(e){return{fire:function(t){return e({type:"SEND",payload:{type:"fire",data:t}})}}}))((function(e){return c.a.createElement(Pe,{border:!0,move:!e.game.move},e.sea.enemy.map((function(t){return t.map((function(t){return c.a.createElement(Ae,{key:t.id,data:t,onClick:e.fire,move:"play"===e.game.status&&e.game.move,enemy:!0})}))})))}));function Me(){var e=Object(je.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-flow: row wrap;\n  align-items: center;\n  justify-content: center;\n"]);return Me=function(){return e},e}var ze=he.b.div(Me()),_e=n(31),qe=n.n(_e);function Le(e){var t=this;this.lastPeerID=null,this.init=function(){t.peer=new qe.a,t.connection=null,e.setIsInitialised(!0),t.peer.on("open",(function(){null===t.peer.id?t.peer.id=t.lastPeerID:t.lastPeerID=t.peer.id,e.setPeerID(t.peer.id)})),t.peer.on("connection",(function(e){t.connection?e.on("open",e.close):(t.connection=e,t.ready())})),t.peer.on("disconnected",(function(){t.peer.reconnect()})),t.peer.on("close",(function(){t.connection=null})),t.peer.on("error",(function(){e.handleDisconnect()})),t.peer.on("close",(function(){t.connection=null}))},this.ready=function(){e.setIsConnected(!0),t.connection.on("data",e.receive),t.connection.on("close",(function(){t.connection=null,e.handleDisconnect()}))},this.join=function(){t.connection&&t.connection.close(),t.connection=t.peer.connect(e.peerID,{reliable:!0,serialization:"json"}),t.connection.on("open",(function(){e.setIsConnected(!0)})),t.connection.on("close",(function(){t.connection=null,e.handleDisconnect()})),t.connection.on("data",e.receive)},this.send=function(e){t.connection&&t.connection.open&&t.connection.send(e)}}function Ze(){var e=Object(je.a)(["\n  border-bottom: 1px dotted #444;\n  cursor: pointer;\n\n  :hover {\n    border-bottom: 1px solid #aaa;\n  }\n"]);return Ze=function(){return e},e}var He=he.b.span(Ze());function We(){var e=Object(je.a)(["\n  font-family: 'Material Icons';\n"]);return We=function(){return e},e}function Be(){var e=Object(je.a)(["\n  border-bottom: 1px solid #aaa;\n"]);return Be=function(){return e},e}function Ge(){var e=Object(je.a)(["\n  background-color: #000;\n  border: none;\n  color: inherit;\n  outline: none;\n  font-size: inherit;\n  font-weight: 300;\n  text-align: center;\n  border-radius: 0;\n"]);return Ge=function(){return e},e}function Ue(){var e=Object(je.a)(["\n  width: 100%;\n  height: 100%;\n  flex-flow: column;\n  align-items: center;\n  justify-content: center;\n  font-size: 36px;\n  display: flex;\n\n  label {\n    text-align: center;\n    user-select: none;\n  }\n\n  p {\n    min-height: 1em;\n    outline: 1px dotted #555;\n  }\n\n  button {\n    margin: 16px 16px;\n    width: 108px;\n    height: 64px;\n  }\n"]);return Ue=function(){return e},e}var Je=he.b.div(Ue()),Ve=he.b.input(Ge()),Ye=Object(he.b)(Ve)(Be()),Qe=he.b.button(We()),Fe=Object(s.b)((function(e){return{game:e.game,rtc:e.rtc}}),(function(e){return{receive:function(t){return e({type:"RECEIVE",payload:t})},setRTC:function(t){return e({type:"SET_RTC",payload:t})},setPeerID:function(t){return e({type:"SET_PEER_ID",payload:t})},selectType:function(t){return e({type:"SELECT_TYPE",payload:t})},setIsInitialised:function(t){return e({type:"SET_IS_INITIALISED",payload:t})},setIsConnected:function(t){return e({type:"SET_IS_CONNECTED",payload:t})},handleDisconnect:function(){return e({type:"RESET"})}}}))((function(e){var t=Object(r.useRef)(null),n=Object(r.useRef)(null),o=Object(r.useState)(!1),a=Object(W.a)(o,2),i=a[0],u=a[1],s=Object(r.useState)(!1),l=Object(W.a)(s,2),p=l[0],f=l[1];function y(){var n=t.current.value;n&&""!==n&&n!==e.rtc.peerID&&b(n,!0,!1)}function b(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.setRTC({interface:new Le({peerID:t,setPeerID:e.setPeerID,setIsConnected:e.setIsConnected,setIsInitialised:e.setIsInitialised,receive:e.receive,handleDisconnect:e.handleDisconnect}),isClient:n,isInitialised:r})}switch(Object(r.useEffect)((function(){"connect"===e.game.status&&(null===e.rtc.interface?b(e.rtc.peerID):e.rtc.isInitialised?e.rtc.peerID&&!i&&(n.current.focus(),n.current.select()):(e.rtc.interface.init(),e.rtc.isClient&&e.rtc.interface.join()))}),[e]),e.game.status){case"choose":return c.a.createElement(Je,null,c.a.createElement("label",null,"select game type:"),c.a.createElement("div",null,c.a.createElement(Qe,{onClick:function(){return e.selectType(!0)}},"\ue7fd\ue8d4\ue7fd")));case"connect":return c.a.createElement(Je,null,c.a.createElement("label",null,"copy this text and share",c.a.createElement("br",null),"with someone you want to play:"),c.a.createElement(Ve,{type:"text",size:"20",ref:n,value:e.rtc.peerID,onChange:function(e){e.preventDefault()},onSelect:function(){u(!0)}}),c.a.createElement("label",null,"or paste text",c.a.createElement("br",null),"that was shared to you:"),c.a.createElement(Ye,{type:"text",size:"16",ref:t,onChange:function(){return f(!0)},onKeyPress:function(e){"Enter"===e.key&&y()}}),p&&c.a.createElement("label",null,c.a.createElement(He,{onClick:y},"connect")));default:return null}}));function Xe(){var e=Object(je.a)(["\n  display: flex;\n  justify-content: center;\n  font-size: 20px;\n  font-weight: 200;\n  text-align: center;\n  user-select: none;\n"]);return Xe=function(){return e},e}var Ke=he.b.label(Xe());function $e(){var e=Object(je.a)(["\n  grid-row: 10;\n  grid-column: 1 / span 10;\n  align-items: center;\n"]);return $e=function(){return e},e}function et(){var e=Object(je.a)(["\n  grid-row: 1 / span 2;\n  grid-column: 1 / span 10;\n  text-align: center;\n"]);return et=function(){return e},e}function tt(){var e=Object(je.a)(["\n  user-select: none;\n\n  :after {\n    grid-column-start: 1;\n    grid-row-start: 3;\n    display: ",";\n    align-items: center;\n    justify-content: center;\n    transform: translateY(","%);\n    transition: transform .5s;\n    font-family: 'Material Icons';\n    font-size: 30px;\n    line-height: 30px;\n    content: '\ue315';\n  }\n"],["\n  user-select: none;\n\n  :after {\n    grid-column-start: 1;\n    grid-row-start: 3;\n    display: ",";\n    align-items: center;\n    justify-content: center;\n    transform: translateY(","%);\n    transition: transform .5s;\n    font-family: 'Material Icons';\n    font-size: 30px;\n    line-height: 30px;\n    content: '\\u{E315}';\n  }\n"]);return tt=function(){return e},e}function nt(){var e=Object(je.a)(["\n  grid-row-start: ",";\n  grid-column-start: 8;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 0;\n  font-size: 30px;\n  font-weight: 200;\n  line-height: 30px;\n\n  @media screen and (min-width: 600px) and (min-height: 600px) {\n    font-size: 5vmin;\n    line-height: 4vmin;\n  }\n"]);return nt=function(){return e},e}function rt(){var e=Object(je.a)(["\n  grid-row-start: ",";\n  grid-column-start: 7;\n  border: 0;\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: 70% 70%;\n"]);return rt=function(){return e},e}function ct(){var e=Object(je.a)(["\n  grid-row-start: ",";\n  grid-column-start: ",";\n"]);return ct=function(){return e},e}function ot(){var e=Object(je.a)(["\n  grid-column: 2 / span 8;\n  grid-row: ",";\n  display: grid;\n  grid-template: auto / repeat(8, 1fr);\n"]);return ot=function(){return e},e}var at=he.b.div(ot(),(function(e){return e.row})),it=Object(he.b)(Ae)(ct(),(function(e){return e.row}),(function(e){return e.column})),ut=Object(he.b)(Ae)(rt(),(function(e){return e.row})),st=Object(he.b)(Ae)(nt(),(function(e){return e.row})),lt=Object(he.b)(Pe)(tt(),(function(e){return-1===e.currentType?"none":"flex"}),(function(e){return 200*e.currentType})),pt=function(e){var t=e.decks,n=e.row,r=e.number;return c.a.createElement(at,{row:n},Object(Z.a)(Array(t).keys()).map((function(e){return c.a.createElement(it,{key:"placing-deck-".concat(t,"-").concat(e),column:e+1,place:!0})})),c.a.createElement(ut,{times:!0,place:!0}),c.a.createElement(st,{place:!0},r))},ft=he.b.label(et()),yt=Object(he.b)(Ke)($e()),bt=Object(s.b)((function(e){return{game:e.game,sea:e.sea}}),(function(e){return{ready:function(){return e({type:"READY"})},random:function(){return e({type:"RANDOM"})}}}))((function(e){return c.a.createElement(lt,{currentType:e.sea.currentType},c.a.createElement(ft,null,"click on field to place ship manually",c.a.createElement("br",null),"or place them ",c.a.createElement(He,{onClick:e.random},"randomly")),c.a.createElement(pt,{decks:4,row:3,number:e.sea.shipsToPlace.fourDecker}),c.a.createElement(pt,{decks:3,row:5,number:e.sea.shipsToPlace.threeDecker}),c.a.createElement(pt,{decks:2,row:7,number:e.sea.shipsToPlace.twoDecker}),c.a.createElement(pt,{decks:1,row:9,number:e.sea.shipsToPlace.singleDecker}),"confirm"===e.game.status&&c.a.createElement(yt,null,c.a.createElement(He,{onClick:e.ready},"confirm and proceed")))}));function Ot(){var e=Object(je.a)(["\n  grid-row: 8;\n"]);return Ot=function(){return e},e}function dt(){var e=Object(je.a)(["\n  grid-row: 6;\n  justify-content: space-around;\n"]);return dt=function(){return e},e}function mt(){var e=Object(je.a)(["\n  grid-row: 3 / span 3;\n  align-items: flex-start;\n"]);return mt=function(){return e},e}function gt(){var e=Object(je.a)(["\n  grid-row: 4 / span 4;\n  grid-column: 1 / span 10;\n  align-items: center;\n  font-size: 25px;\n"]);return gt=function(){return e},e}var jt=Object(he.b)(Ke)(gt()),ht=Object(he.b)(jt)(mt()),vt=Object(he.b)(jt)(dt()),Pt=Object(he.b)(jt)(Ot()),wt={victory:"you win!",defeat:"you loose!"},Et=Object(s.b)((function(e){return{game:e.game}}),(function(e){return{repeat:function(){return e({type:"REPEAT"})},reset:function(){return e({type:"RESET"})}}}))((function(e){switch(e.game.status){case"defeat":case"victory":return c.a.createElement(Pe,null,c.a.createElement(ht,null,wt[e.game.status],c.a.createElement("br",null),e.game.isAllyWantRepeat?c.a.createElement("br",null):"play another round?"),c.a.createElement(vt,null,e.game.isAllyWantRepeat?"waiting for yor opponent answer":[c.a.createElement(He,{key:"yes",onClick:e.repeat},"yes"),c.a.createElement(He,{key:"no",onClick:e.reset},"no")]),e.game.isEnemyWantRepeat&&c.a.createElement(Pt,null,"your opponent said \xabyes\xbb"));case"wait":return c.a.createElement(Pe,null,c.a.createElement(jt,null,"wait until opponent",c.a.createElement("br",null),"place their ships"));default:return null}})),Dt=Object(s.b)((function(e){return{game:e.game,rtc:e.rtc,sea:e.sea}}),(function(e){return{changeStatus:function(t){return e({type:"CHANGE_STATUS",payload:t})},setMove:function(t){return e({type:"SET_MOVE",payload:t})},send:function(t){return e({type:"SEND",payload:t})},newRound:function(){return e({type:"NEW_ROUND"})}}}))((function(e){switch(Object(r.useEffect)((function(){switch(e.game.status){case"connect":e.rtc.isConnected&&(e.changeStatus("place"),e.setMove(e.rtc.isClient));break;case"place":0===e.sea.shipsToPlace.total&&e.changeStatus("confirm");break;case"confirm":if(0!==e.sea.shipsToPlace.total){e.changeStatus("place");break}e.game.isAllyReady&&(e.game.isEnemyReady?e.changeStatus("play"):e.changeStatus("wait"));break;case"wait":e.game.isEnemyReady&&e.changeStatus("play");break;case"play":e.sea.feedback&&e.send(e.sea.feedback);break;case"defeat":case"victory":e.game.isAllyWantRepeat&&e.game.isEnemyWantRepeat&&e.newRound()}}),[e]),e.game.status){case"choose":case"connect":return c.a.createElement(Fe,null);case"place":case"confirm":return c.a.createElement(ze,null,c.a.createElement(Ne,null),c.a.createElement(bt,null));case"victory":case"wait":return c.a.createElement(ze,null,c.a.createElement(Ne,null),c.a.createElement(Et,null));case"play":return c.a.createElement(ze,null,c.a.createElement(Ne,null),c.a.createElement(Ce,null));case"defeat":return c.a.createElement(ze,null,c.a.createElement(Et,null),c.a.createElement(Ce,null));default:return null}}));a.a.render(c.a.createElement(s.a,{store:ge},c.a.createElement(i.a,null,c.a.createElement(u.a,{path:"/",component:Dt}))),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.ae510cf1.chunk.js.map