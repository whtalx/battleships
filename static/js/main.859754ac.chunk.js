(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{36:function(e,t,n){e.exports=n(49)},41:function(e,t,n){},47:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=47},49:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(18),o=n.n(a),i=n(32),u=n(15),s=(n(41),n(6)),l=n(14),f=n(28),p=n(1);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var b=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{isAllyReady:!0})};function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var d=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{isAllyWantRepeat:!0})};function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var g=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{move:!e.move})};function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var j=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{status:t.payload?"connect":"place",type:t.payload?"pvp":"comp",move:!t.payload||e.move})};function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var w=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{status:t.payload})};function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var E=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{isEnemyReady:!0})};function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var D=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{isEnemyWantRepeat:!0})},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"choose",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:null,isAllyReady:!1,isEnemyReady:!1,isAllyWantRepeat:!1,isEnemyWantRepeat:!1,status:e,move:t}},I=function(e){return e.match(/\d+-/g).map((function(e){return parseInt(e)}))};function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=function(e,t){var n="fire"===t.payload.type?{type:"fire",data:I(t.payload.data)}:x({},t.payload);return console.log("sent:     ",JSON.parse(JSON.stringify(n))),x({},e,{message:n,waitingForFeedback:"fire"===t.payload.type})};function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var _=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{},t.payload)};function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var M=function(e,t){return console.log("received: ",JSON.parse(JSON.stringify(t.payload))),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{waitingForFeedback:!1})};function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var q=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{peerID:t.payload})};function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var z=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{message:null})};function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var F=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{isConnected:t.payload})};function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var V=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{isInitialised:t.payload})},H=n(5),Y=function(e){var t=Object(H.a)(Array(10).keys());return t.map((function(n){return t.map((function(t){return{id:"cell-".concat(t,"-").concat(n,"-").concat(e),hit:!1,miss:!1,ship:!1,sank:!1}}))}))},J=n(10),G=function(e){return e.split("-").map((function(e){return parseInt(e)}))};function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var X=function(e){return e.map((function(e){return null===e[0]?1:1===e.length?0:e.reduce((function(e,t){return 1===e?1:null===t?1:0}))})).reduce((function(e,t){return e+t}))},K=function(e){var t={fourDecker:X(e.squadron[0]),threeDecker:X(e.squadron[1]),twoDecker:X(e.squadron[2]),singleDecker:X(e.squadron[3])},n=Object.values(t);return t.total=n.reduce((function(e,t){return e+t})),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{shipsToPlace:t,currentType:n.findIndex((function(e){return 0!==e}))})};function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Z=function(e,t,n,r,c,a){var o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},c);return a?(o.squadron[e][t].pop(),o.squadron[e][t].unshift(r)):o.squadron[e][t][n]=r,o.squadron[e][t].forEach((function(n,r){n&&(o.ally[n[1]][n[0]].ship="".concat(e,"-").concat(t,"-").concat(r))})),K(o)};function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ee=function(e,t,n,r,c){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},c);return a.squadron[e][t].splice(n,1),a.squadron[e][t].push(null),a.ally[r[1]][r[0]].ship=!1,a.squadron[e][t].forEach((function(n,r){n&&(a.ally[n[1]][n[0]].ship="".concat(e,"-").concat(t,"-").concat(r))})),K(a)},te=function(e,t){return e[t[1]][t[0]].ship};function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var re=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),r=I(t.payload),c=te(n.ally,r);if(c){var a=G(c),o=Object(J.a)(a,3),i=o[0],u=o[1],s=o[2];return 0!==s&&n.squadron[i][u][s+1]?n:ee(i,u,s,r,n)}if(function(e,t){return e[t[1]-1]&&(e[t[1]-1][t[0]-1]&&e[t[1]-1][t[0]-1].ship||e[t[1]-1][t[0]+1]&&e[t[1]-1][t[0]+1].ship)||e[t[1]+1]&&(e[t[1]+1][t[0]-1]&&e[t[1]+1][t[0]-1].ship||e[t[1]+1][t[0]+1]&&e[t[1]+1][t[0]+1].ship)}(n.ally,r))return n;var l=function(e,t){return[e[t[1]-1]&&e[t[1]-1][t[0]]&&e[t[1]-1][t[0]].ship,e[t[1]+1]&&e[t[1]+1][t[0]]&&e[t[1]+1][t[0]].ship,e[t[1]][t[0]-1]&&e[t[1]][t[0]-1].ship,e[t[1]][t[0]+1]&&e[t[1]][t[0]+1].ship].filter((function(e){return e}))}(n.ally,r);if(1===l.length){for(var f=l[0].split("-").map((function(e){return parseInt(e)})),y=Object(J.a)(f,2),b=y[0],O=y[1],d=1;d<n.squadron[b][O].length;d++)if(null===n.squadron[b][O][d]){var h=r[0]<n.squadron[b][O][0][0]||r[1]<n.squadron[b][O][0][1];return Z(b,O,d,r,n,h)}return n}for(var g=0;g<n.squadron[n.currentType].length;g++){var m=n.squadron[n.currentType][g];if(!(m.filter((function(e){return e})).length===m.length))return null===m[0]?Z(n.currentType,g,0,r,n,!1):n}return n},ce=function(e,t){var n=Object(H.a)(e),r=Object(H.a)(t),c=1===r.length?[3,3]:r[1][1]-r[0][1]===0?[r.length+2,3]:[3,r.length+2],a=Object(J.a)(c,2),o=a[0],i=a[1];return Object(H.a)(Array(i).keys()).forEach((function(e){Object(H.a)(Array(o).keys()).forEach((function(t){(function(e,t){return 1===r.length?!(1===e&&1===t):r[1][1]-r[0][1]===0?!(e>0&&e<r.length+1&&1===t):!(t>0&&t<r.length+1&&1===e)})(t,e)&&function(e,t){var c=r[0];n[t-1+c[1]]&&n[t-1+c[1]][e-1+c[0]]&&(n[t-1+c[1]][e-1+c[0]].miss=!0)}(t,e)}))})),n};function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var oe=function(e,t){var n,r=[],c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),a=Object(H.a)(t.payload.data),o=te(c.ally,a);if(o){c.ally[a[1]][a[0]].hit=!0;var i=G(o),u=Object(J.a)(i,2),s=u[0],l=u[1];if(function(e,t,n){return n.squadron[e][t].reduce((function(e,t){return n.ally[t[1]][t[0]].hit&&e}),!0)}(s,l,c)){if(c.allyShipsLeft-=1,0===c.allyShipsLeft)return c.feedback={type:"defeat"},c;c.squadron[s][l].forEach((function(e){c.ally[e[1]][e[0]].sank=!0,r.push(e)})),c.ally=ce(c.ally,r),n="sank"}else n="hit"}else n="miss",c.ally[a[1]][a[0]].miss=!0;return 0===r.length&&r.push(a),c.feedback={type:"feedback",data:r,feedback:n},c};function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ue=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{feedback:{type:"victory",data:Object(H.a)(e.ally.map((function(e){return e.map((function(e){return e.miss?1:e.sank?2:e.hit?3:e.ship?4:0}))})))}})},se=function(){return Object(H.a)(Array(4).keys()).map((function(e){return Object(H.a)(Array(e+1)).map((function(t){return Object(H.a)(Array(4-e)).map((function(e){return null}))}))}))};function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var fe=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{feedback:null})};function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var be=[[[-3,0],[0,-3]],[[-2,0],[0,-2]],[[-1,0],[0,-1]],[[0,0],[0,0]]],Oe=function(e){var t=ye({},e);try{t.squadron.forEach((function(e,n){t.squadron[n].forEach((function(e,r){var c=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=ye({},t),a=Math.floor(Math.random()+.5),o=[Math.floor(Math.random()*(10+be[n][a][0])),Math.floor(Math.random()*(10+be[n][a][1]))];try{for(var i=-1;i<=c.squadron[n][0].length+1;i++)if(1===a&&c.ally[o[1]+i]&&(c.ally[o[1]+i][o[0]-1]&&c.ally[o[1]+i][o[0]-1].ship||c.ally[o[1]+i][o[0]]&&c.ally[o[1]+i][o[0]].ship||c.ally[o[1]+i][o[0]+1]&&c.ally[o[1]+i][o[0]+1].ship)||0===a&&(c.ally[o[1]-1]&&c.ally[o[1]-1][o[0]+i]&&c.ally[o[1]-1][o[0]+i].ship||c.ally[o[1]][o[0]+i]&&c.ally[o[1]][o[0]+i].ship||c.ally[o[1]+1]&&c.ally[o[1]+1][o[0]+i]&&c.ally[o[1]+1][o[0]+i].ship))return e(c,n,r+1)}catch(s){var u=s.message;return console.error(u,"calls: ".concat(r)),{}}return{coordinates:o,direction:a}}(t,n),a=c.coordinates,o=c.direction;if(!a)throw new Error("Browser too weak for such recursion \ud83d\ude14");t.squadron[n][r]=t.squadron[n][r].map((function(e,t){return 0===o?[a[0]+t,a[1]]:[a[0],a[1]+t]})),t.squadron[n][r].forEach((function(e,c){t.ally[e[1]][e[0]].ship="".concat(n,"-").concat(r,"-").concat(c)}))}))}))}catch(r){var n=r.message;console.error(n)}return K(t)};function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var he=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{enemy:Object(H.a)(t.payload.data.map((function(e,t){return e.map((function(e,n){return{id:"cell-".concat(n,"-").concat(t,"-enemy"),miss:1===e,sank:2===e,hit:3===e||2===e,ship:4===e||3===e||2===e}}))})))})};function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var me=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),r=Object(H.a)(t.payload.data);switch(t.payload.feedback){case"miss":n.enemy[r[0][1]][r[0][0]].miss=!0;break;case"hit":n.enemy[r[0][1]][r[0][0]].ship=!0,n.enemy[r[0][1]][r[0][0]].hit=!0;break;case"sank":if(r.forEach((function(e){n.enemy[e[1]][e[0]].hit=!0,n.enemy[e[1]][e[0]].ship=!0,n.enemy[e[1]][e[0]].sank=!0})),n.enemy=ce(n.enemy,r),n.enemyShipsLeft-=1,0===n.enemyShipsLeft)return n.feedback={type:"victory",data:Object(H.a)(n.ally)},n}return n};function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var we=function(){return{ally:Y("ally"),enemy:Y("enemy"),squadron:se(),shipsToPlace:{fourDecker:1,threeDecker:2,twoDecker:3,singleDecker:4,total:10},currentType:0,allyShipsLeft:10,enemyShipsLeft:10,feedback:null}},Pe=Object(l.c)({game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_TYPE":return j(e,t);case"CHANGE_STATUS":return w(e,t);case"READY":return b(e);case"REPEAT":return d(e);case"SEND":switch(t.payload.type){case"feedback":return"miss"===t.payload.feedback?g(e):e;case"victory":return w(e,{payload:"victory"});default:return e}case"RECEIVE":switch(t.payload.type){case"ready":return E(e);case"repeat":return D(e);case"feedback":return"miss"===t.payload.feedback?g(e):e;case"victory":return w(e,{payload:"defeat"});default:return e}case"SET_MOVE":return t.payload?g(e):e;case"RESET":return S();case"NEW_ROUND":return S("place","pvp"!==e.type||!e.move);default:return e}},rtc:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{peerID:"",message:null,interface:null,isClient:!1,isConnected:!1,isInitialised:!1,waitingForFeedback:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_RTC":return _(e,t);case"SEND":return C(e,t);case"CLEAR_MESSAGE":return z(e);case"READY":return C(e,{payload:{type:"ready"}});case"REPEAT":return C(e,{payload:{type:"repeat"}});case"RECEIVE":return M(e,t);case"SET_PEER_ID":return q(e,t);case"SET_IS_CONNECTED":return F(e,t);case"SET_IS_INITIALISED":return V(e,t);case"RESET":return{peerID:"",message:null,interface:null,isClient:!1,isConnected:!1,isInitialised:!1,waitingForFeedback:!1};default:return e}},sea:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND":return"feedback"===t.payload.type||"defeat"===t.payload.type||"victory"===t.payload.type?fe(e):e;case"PLACE_SHIP":return re(e,t);case"RANDOM":return Oe(ve({},e,{ally:Y("ally"),squadron:se()}));case"RECEIVE":switch(t.payload.type){case"fire":return oe(e,t);case"feedback":return me(e,t);case"victory":return he(e,t);case"defeat":return ue(e,t);default:return e}case"RESET":case"NEW_ROUND":return we();default:return e}}}),Ee=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,ke=Object(l.e)(Pe,Ee(Object(l.a)(f.a))),De=function(){return{ally:Y("ally"),enemy:Y("enemy"),squadron:se(),shipsToPlace:{fourDecker:1,threeDecker:2,twoDecker:3,singleDecker:4,total:10},currentType:0,allyShipsLeft:10,enemyShipsLeft:10,feedback:null}};function Se(e){var t=this;this.init=function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t.state=0,t.shootLog=[],t.lastShoot=null,t.directions=["up","down","left","right"],t.directionsStack=null,t.sea=Oe(De()),t.fireDelay=250,n&&e.setIsConnected(!0)},this.sendMessage=e.receive,this.findLogIndex=function(e){return t.shootLog.findIndex((function(t){return t.cell.toString()===e.toString()}))},this.randomDirectionsStack=function(){return Object(H.a)(Array(4)).reduce((function(e){for(var t=Math.floor(4*Math.random());-1!==e.indexOf(t);)t=Math.floor(4*Math.random());return[].concat(Object(H.a)(e),[t])}),[]).map((function(e){return t.directions[e]}))},this.reverseDirection=function(){return(t.directions.indexOf(t.directionsStack[0])+1)%2===0?t.directions[t.directions.indexOf(t.directionsStack[0])-1]:t.directions[t.directions.indexOf(t.directionsStack[0])+1]},this.findHitIndex=function(){return t.shootLog.reduceRight((function(e,t,n){return"hit"===t.feedback&&(-1===e||e-n===1)?n:e}),-1)},this.alreadyShoot=function(e){return!t.sea.enemy[e[1]]||!t.sea.enemy[e[1]][e[0]]||t.sea.enemy[e[1]][e[0]].ship||t.sea.enemy[e[1]][e[0]].miss},this.addShift=function(e,t,n){var r=Object(J.a)(e,2),c=r[0],a=r[1];switch(t){case"up":return[c,a-n];case"down":return[c,a+n];case"left":return[c-n,a];case"right":return[c+n,a];default:return}},this.getRandomCoordinates=function(){for(var e=[],n=function(e,t){return e.findIndex((function(e){return e.toString()===t.toString()}))>=0};;){var r=[Math.floor(10*Math.random()),Math.floor(10*Math.random())];if(!n(e,r)){if(!t.alreadyShoot(r))return r;e.push(r)}}},this.shoot=function(){switch(t.state){case 0:t.lastShoot=t.getRandomCoordinates();break;case 1:var e=t.findHitIndex();if(null===t.directionsStack?t.directionsStack=t.randomDirectionsStack():t.directionsStack.unshift(),0===t.directionsStack.length)return t.directionsStack=null,t.changeState("sank"),t.shoot();var n=t.directionsStack[0],r=t.addShift(t.shootLog[e].cell,n,1);if(t.alreadyShoot(r)||r[0]<0||r[0]>9||r[1]<0||r[1]>9)return t.directionsStack.shift(),t.shoot();t.lastShoot=r;break;case 2:var c=t.directionsStack[0],a=t.addShift(t.lastShoot,c,1);if(t.alreadyShoot(a)||a[0]<0||a[0]>9||a[1]<0||a[1]>9)return t.changeState("miss"),t.shoot();t.lastShoot=a;break;case 3:for(var o=t.reverseDirection(),i=t.findHitIndex(),u=t.addShift(t.shootLog[i].cell,o,1);t.alreadyShoot(u);)u=t.addShift(u,o,1);t.lastShoot=u,t.directionsStack=[o];break;default:return}t.shootLog.push({cell:t.lastShoot}),setTimeout((function(){t.sendMessage({type:"fire",data:t.lastShoot})}),t.fireDelay)},this.changeState=function(e){switch(t.state){case 0:"hit"===e&&(t.state=1);break;case 1:t.state="hit"===e?2:"sank"===e?0:1;break;case 2:t.state="hit"===e?2:"sank"===e?0:3;break;case 3:t.state="hit"===e?2:0}},this.send=function(e){switch(e.type){case"fire":t.sea=oe(t.sea,{payload:e}),t.sendMessage(t.sea.feedback),"miss"===t.sea.feedback.feedback&&t.shoot(),t.sea.feedback=null;break;case"feedback":t.sea=me(t.sea,{payload:e});var n=t.findLogIndex(t.lastShoot);t.shootLog[n].feedback=e.feedback,t.changeState(e.feedback),"sank"===e.feedback&&(t.directionsStack=null),"miss"!==e.feedback&&t.shoot();break;case"defeat":t.sea=ue(t.sea),t.sendMessage(t.sea.feedback),t.sendMessage({type:"repeat"}),t.init(!1);break;case"ready":t.sendMessage({type:"ready"});break;case"victory":t.sendMessage({type:"repeat"}),t.init(!1)}}}var Ie=n(2),Te=n(3);function xe(){var e=Object(Ie.a)(["\n  width: 100%;\n  height: 100%;\n  position: relative;\n  display: grid;\n  grid-gap: 1px;\n  grid-template: repeat(10, 1fr) / repeat(10, 1fr);\n"]);return xe=function(){return e},e}function Ce(){var e=Object(Ie.a)(["\n  margin: 10px;\n  width: calc(50vmin - 26px);\n  height: calc(50vmin - 26px);\n  min-width: 300px;\n  min-height: 300px;\n  box-sizing: border-box;\n  border: 3px double ",";\n  overflow: hidden;\n  user-select: none;\n"]);return Ce=function(){return e},e}var Re=Te.b.div(Ce(),(function(e){return e.border?e.move?"#555":"#aaa":"#000"})),_e=Te.b.div(xe()),Ae=function(e){return c.a.createElement(Re,e,c.a.createElement(_e,{grid:e.grid},e.children))};function Me(){var e=Object(Ie.a)(["\n      :hover {\n        background-image: var(--hover);\n      }\n    "]);return Me=function(){return e},e}function Ne(){var e=Object(Ie.a)(["\n      background-image: var(--miss);\n    "]);return Ne=function(){return e},e}function qe(){var e=Object(Ie.a)(["\n      outline: 1px solid #555;\n      background-image: var(--sank);\n      z-index: 1;\n    "]);return qe=function(){return e},e}function Le(){var e=Object(Ie.a)(["\n      background-image: var(--hit);\n    "]);return Le=function(){return e},e}function ze(){var e=Object(Ie.a)(["\n      outline: 1px solid #aaa;\n      z-index: 1;\n    "]);return ze=function(){return e},e}function We(){var e=Object(Ie.a)(["\n      outline: 1px dotted #222;\n    "]);return We=function(){return e},e}function Fe(){var e=Object(Ie.a)(["\n  box-sizing: border-box;\n  background-color: #000;\n  background-clip: content-box;\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: 110% 110%;\n\n  ","\n\n  ","\n\n  ","\n\n  ","\n\n  ","\n\n  ","\n"]);return Fe=function(){return e},e}var Ue=Te.b.div(Fe(),(function(e){return e.grid&&Object(Te.a)(We())}),(function(e){return(e.ship&&!e.sank||e.place)&&Object(Te.a)(ze())}),(function(e){return(e.hit&&!e.sank||e.times)&&Object(Te.a)(Le())}),(function(e){return e.sank&&Object(Te.a)(qe())}),(function(e){return e.miss&&Object(Te.a)(Ne())}),(function(e){return e.enemy&&e.move&&!e.miss&&!e.hit&&!e.ship&&Object(Te.a)(Me())})),Ve=function(e){var t={move:e.move,enemy:e.enemy,place:e.place,times:e.times,children:e.children,className:e.className,hit:e.data&&e.data.hit,miss:e.data&&e.data.miss,sank:e.data&&e.data.sank,ship:e.data&&e.data.ship,grid:e.data&&!e.ship};return c.a.createElement(Ue,Object.assign({onClick:function(){e.onClick&&e.enemy===e.move&&!e.data.hit&&!e.data.miss&&e.onClick(e.data.id)}},t))},He=Object(s.b)((function(e){return{game:e.game,sea:e.sea}}),(function(e){return{place:function(t){return e({type:"PLACE_SHIP",payload:t})}}}))((function(e){return c.a.createElement(Ae,{border:!0,grid:!0,move:e.game.move},e.sea.ally.map((function(t){return t.map((function(t){return c.a.createElement(Ve,{key:t.id,data:t,onClick:("place"===e.game.status||"confirm"===e.game.status)&&e.place})}))})))})),Ye=Object(s.b)((function(e){return{game:e.game,rtc:e.rtc,sea:e.sea}}),(function(e){return{fire:function(t){return e({type:"SEND",payload:{type:"fire",data:t}})}}}))((function(e){return c.a.createElement(Ae,{border:!0,grid:!0,move:!e.game.move},e.sea.enemy.map((function(t){return t.map((function(t){return c.a.createElement(Ve,{key:t.id,data:t,onClick:e.fire,move:"play"===e.game.status&&e.game.move&&!e.rtc.waitingForFeedback,enemy:!0})}))})))}));function Je(){var e=Object(Ie.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-flow: row wrap;\n  align-items: center;\n  justify-content: center;\n"]);return Je=function(){return e},e}var Ge=Te.b.div(Je()),Be=n(31),Xe=n.n(Be);function Ke(e){var t=this;this.lastPeerID=null,this.init=function(){t.peer=new Xe.a,t.connection=null,e.setIsInitialised(!0),t.peer.on("open",(function(){null===t.peer.id?t.peer.id=t.lastPeerID:t.lastPeerID=t.peer.id,e.setPeerID(t.peer.id)})),t.peer.on("connection",(function(e){t.connection?e.on("open",e.close):(t.connection=e,t.ready())})),t.peer.on("disconnected",(function(){t.peer.reconnect()})),t.peer.on("close",(function(){t.connection=null})),t.peer.on("error",(function(){e.handleDisconnect()})),t.peer.on("close",(function(){t.connection=null}))},this.ready=function(){e.setIsConnected(!0),t.connection.on("data",e.receive),t.connection.on("close",(function(){t.connection=null,e.handleDisconnect()}))},this.join=function(){t.connection&&t.connection.close(),t.connection=t.peer.connect(e.peerID,{reliable:!0,serialization:"json"}),t.connection.on("open",(function(){e.setIsConnected(!0)})),t.connection.on("close",(function(){t.connection=null,e.handleDisconnect()})),t.connection.on("data",e.receive)},this.send=function(e){t.connection&&t.connection.open&&t.connection.send(e)}}function Qe(){var e=Object(Ie.a)(["\n  border-bottom: 1px dotted #444;\n  cursor: pointer;\n\n  :hover {\n    border-bottom: 1px solid #aaa;\n  }\n"]);return Qe=function(){return e},e}var Ze=Te.b.span(Qe());function $e(){var e=Object(Ie.a)(["\n  margin: 16px 16px;\n  width: 108px;\n  height: 64px;\n  font-family: 'Material Icons';\n"]);return $e=function(){return e},e}function et(){var e=Object(Ie.a)(["\n  border-bottom: 1px solid #aaa;\n"]);return et=function(){return e},e}function tt(){var e=Object(Ie.a)(["\n  max-width: 90%;\n  min-height: 1.5em;\n  background-color: #000;\n  border: none;\n  border-radius: 0;\n  outline: none;\n  color: #ddd;\n  font-size: inherit;\n  font-weight: 300;\n  line-height: 1.5em;\n  text-align: center;\n"]);return tt=function(){return e},e}function nt(){var e=Object(Ie.a)(["\n  width: 100%;\n  height: 100%;\n  flex-flow: column;\n  align-items: center;\n  justify-content: center;\n  font-size: 30px;\n  display: flex;\n\n  label {\n    text-align: center;\n    min-height: 1.2em;\n    line-height: 1.2em;\n    user-select: none;\n  }\n"]);return nt=function(){return e},e}var rt=Te.b.div(nt()),ct=Te.b.input.attrs({type:"text"})(tt()),at=Object(Te.b)(ct)(et()),ot=Te.b.button($e()),it=Object(s.b)((function(e){return{game:e.game,rtc:e.rtc}}),(function(e){return{setRTC:function(t){return e({type:"SET_RTC",payload:t})},receive:function(t){return e({type:"RECEIVE",payload:t})},setPeerID:function(t){return e({type:"SET_PEER_ID",payload:t})},selectType:function(t){return e({type:"SELECT_TYPE",payload:t})},setIsConnected:function(t){return e({type:"SET_IS_CONNECTED",payload:t})},setIsInitialised:function(t){return e({type:"SET_IS_INITIALISED",payload:t})},handleDisconnect:function(){return e({type:"RESET"})}}}))((function(e){var t=Object(r.useRef)(null),n=Object(r.useRef)(null),a=Object(r.useState)(!1),o=Object(J.a)(a,2),i=o[0],u=o[1],s=Object(r.useState)(!1),l=Object(J.a)(s,2),f=l[0],p=l[1],y=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.setRTC({interface:new Ke({peerID:t,setPeerID:e.setPeerID,setIsConnected:e.setIsConnected,setIsInitialised:e.setIsInitialised,receive:e.receive,handleDisconnect:e.handleDisconnect}),isClient:n,isInitialised:r})},b=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.current.value;return n&&""!==n&&n!==e.rtc.peerID&&y(n,!0)};switch(Object(r.useEffect)((function(){"connect"===e.game.status&&(null===e.rtc.interface?y(e.rtc.peerID):e.rtc.isInitialised?e.rtc.peerID&&!f&&n.current.select():(e.rtc.interface.init(),e.rtc.isClient&&e.rtc.interface.join()))}),[e]),e.game.status){case"choose":return c.a.createElement(rt,null,c.a.createElement("label",null,"select game type:"),c.a.createElement("div",null,c.a.createElement(ot,{onClick:function(){return e.selectType(!0)}},"\ue7fd\ue8d4\ue7fd"),c.a.createElement(ot,{onClick:function(){return e.selectType(!1)}},"\ue7fd\ue8d4\ue30a")));case"connect":return c.a.createElement(rt,null,c.a.createElement("label",null,"share this text",c.a.createElement("br",null),"with someone",c.a.createElement("br",null),"you want to play:"),c.a.createElement(ct,{ref:n,onChange:function(e){e.preventDefault()},onSelect:function(){return p(!0)},value:e.rtc.peerID}),c.a.createElement("label",null,"or paste text that",c.a.createElement("br",null),"was shared to you:"),c.a.createElement(at,{ref:t,onChange:function(){return u(!0)},onKeyPress:function(e){"Enter"===e.key&&b()}}),c.a.createElement("label",null,i&&c.a.createElement(Ze,{onClick:function(){b()}},"connect")));default:return null}}));function ut(){var e=Object(Ie.a)(["\n  display: flex;\n  justify-content: center;\n  font-size: 20px;\n  font-weight: 200;\n  text-align: center;\n  user-select: none;\n"]);return ut=function(){return e},e}var st=Te.b.label(ut());function lt(){var e=Object(Ie.a)(["\n  & > div:after {\n    grid-column-start: 1;\n    grid-row-start: 3;\n    display: ",";\n    align-items: center;\n    justify-content: center;\n    transform: translateY(","%);\n    transition: transform .5s;\n    font-family: 'Material Icons';\n    font-size: 29px;\n    line-height: 29px;\n    content: '\ue315';\n  }\n"],["\n  & > div:after {\n    grid-column-start: 1;\n    grid-row-start: 3;\n    display: ",";\n    align-items: center;\n    justify-content: center;\n    transform: translateY(","%);\n    transition: transform .5s;\n    font-family: 'Material Icons';\n    font-size: 29px;\n    line-height: 29px;\n    content: '\\u{E315}';\n  }\n"]);return lt=function(){return e},e}function ft(){var e=Object(Ie.a)(["\n  grid-row-start: ",";\n  grid-column-start: 8;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 0;\n  font-size: 30px;\n  font-weight: 200;\n  line-height: 30px;\n\n  @media screen and (min-width: 600px) and (min-height: 600px) {\n    font-size: 5vmin;\n    line-height: 4vmin;\n  }\n"]);return ft=function(){return e},e}function pt(){var e=Object(Ie.a)(["\n  grid-row-start: ",";\n  grid-column-start: 7;\n  border: 0;\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: 70% 70%;\n"]);return pt=function(){return e},e}function yt(){var e=Object(Ie.a)(["\n  grid-row-start: ",";\n  grid-column-start: ",";\n"]);return yt=function(){return e},e}function bt(){var e=Object(Ie.a)(["\n  grid-column: 2 / span 8;\n  grid-row: ",";\n  display: grid;\n  grid-template: auto / repeat(8, 1fr);\n"]);return bt=function(){return e},e}function Ot(){var e=Object(Ie.a)(["\n  grid-row: 10;\n  grid-column: 1 / span 10;\n  align-items: center;\n"]);return Ot=function(){return e},e}function dt(){var e=Object(Ie.a)(["\n  grid-row: 1 / span 2;\n  grid-column: 1 / span 10;\n  text-align: center;\n"]);return dt=function(){return e},e}var ht=Te.b.label(dt()),gt=Object(Te.b)(st)(Ot()),mt=Te.b.div(bt(),(function(e){return e.row})),jt=Object(Te.b)(Ve)(yt(),(function(e){return e.row}),(function(e){return e.column})),vt=Object(Te.b)(Ve)(pt(),(function(e){return e.row})),wt=Object(Te.b)(Ve)(ft(),(function(e){return e.row})),Pt=Object(Te.b)(Ae)(lt(),(function(e){return-1===e.currentType?"none":"flex"}),(function(e){return 200*e.currentType})),Et=function(e){var t=e.decks,n=e.row,r=e.number;return c.a.createElement(mt,{row:n},Object(H.a)(Array(t).keys()).map((function(e){return c.a.createElement(jt,{key:"placing-deck-".concat(t,"-").concat(e),column:e+1,place:!0})})),c.a.createElement(vt,{times:!0}),c.a.createElement(wt,null,r))},kt=Object(s.b)((function(e){return{game:e.game,sea:e.sea}}),(function(e){return{ready:function(){return e({type:"READY"})},random:function(){return e({type:"RANDOM"})}}}))((function(e){return c.a.createElement(Pt,{currentType:e.sea.currentType},c.a.createElement(ht,null,"click on field to place ship manually",c.a.createElement("br",null),"or place them ",c.a.createElement(Ze,{onClick:e.random},"randomly")),c.a.createElement(Et,{decks:4,row:3,number:e.sea.shipsToPlace.fourDecker}),c.a.createElement(Et,{decks:3,row:5,number:e.sea.shipsToPlace.threeDecker}),c.a.createElement(Et,{decks:2,row:7,number:e.sea.shipsToPlace.twoDecker}),c.a.createElement(Et,{decks:1,row:9,number:e.sea.shipsToPlace.singleDecker}),"confirm"===e.game.status&&c.a.createElement(gt,null,c.a.createElement(Ze,{onClick:e.ready},"confirm and proceed")))}));function Dt(){var e=Object(Ie.a)(["\n  grid-row: 8;\n"]);return Dt=function(){return e},e}function St(){var e=Object(Ie.a)(["\n  grid-row: 6;\n  justify-content: space-around;\n"]);return St=function(){return e},e}function It(){var e=Object(Ie.a)(["\n  grid-row: 3 / span 3;\n  align-items: flex-start;\n"]);return It=function(){return e},e}function Tt(){var e=Object(Ie.a)(["\n  grid-row: 4 / span 4;\n  grid-column: 1 / span 10;\n  align-items: center;\n  font-size: 25px;\n"]);return Tt=function(){return e},e}var xt=Object(Te.b)(st)(Tt()),Ct=Object(Te.b)(xt)(It()),Rt=Object(Te.b)(xt)(St()),_t=Object(Te.b)(xt)(Dt()),At={victory:"you win!",defeat:"you loose!"},Mt=Object(s.b)((function(e){return{game:e.game}}),(function(e){return{repeat:function(){return e({type:"REPEAT"})},reset:function(){return e({type:"RESET"})}}}))((function(e){switch(e.game.status){case"defeat":case"victory":return c.a.createElement(Ae,null,c.a.createElement(Ct,null,At[e.game.status],c.a.createElement("br",null),!e.game.isAllyWantRepeat&&"play another round?"),c.a.createElement(Rt,null,e.game.isAllyWantRepeat?"waiting for yor opponent answer":[c.a.createElement(Ze,{key:"yes",onClick:e.repeat},"yes"),c.a.createElement(Ze,{key:"no",onClick:e.reset},"no")]),"pvp"===e.game.type&&e.game.isEnemyWantRepeat&&c.a.createElement(_t,null,"your opponent said \xabyes\xbb"));case"wait":return c.a.createElement(Ae,null,c.a.createElement(xt,null,"wait until opponent",c.a.createElement("br",null),"place their ships"));default:return null}})),Nt=Object(s.b)((function(e){return{status:e.game.status}}))((function(e){switch(e.status){case"choose":case"connect":return c.a.createElement(it,null);case"place":case"confirm":return c.a.createElement(Ge,null,c.a.createElement(He,null),c.a.createElement(kt,null));case"victory":case"wait":return c.a.createElement(Ge,null,c.a.createElement(He,null),c.a.createElement(Mt,null));case"play":return c.a.createElement(Ge,null,c.a.createElement(He,null),c.a.createElement(Ye,null));case"defeat":return c.a.createElement(Ge,null,c.a.createElement(Mt,null),c.a.createElement(Ye,null));default:return null}})),qt=Object(s.b)((function(e){return{game:e.game,rtc:e.rtc,sea:e.sea}}),(function(e){return{changeStatus:function(t){return e({type:"CHANGE_STATUS",payload:t})},setIsConnected:function(t){return e({type:"SET_IS_CONNECTED",payload:t})},setMove:function(t){return e({type:"SET_MOVE",payload:t})},receive:function(t){return e({type:"RECEIVE",payload:t})},setRTC:function(t){return e({type:"SET_RTC",payload:t})},send:function(t){return e({type:"SEND",payload:t})},clearMessage:function(){return e({type:"CLEAR_MESSAGE"})},newRound:function(){return e({type:"NEW_ROUND"})}}}))((function(e){return Object(r.useEffect)((function(){switch(e.game.status){case"connect":e.rtc.isConnected&&(e.changeStatus("place"),e.setMove(e.rtc.isClient));break;case"place":"comp"===e.game.type&&(null===e.rtc.interface?e.setRTC({interface:new Se({setIsConnected:e.setIsConnected,receive:e.receive})}):e.rtc.isConnected||e.rtc.interface.init()),0===e.sea.shipsToPlace.total&&e.changeStatus("confirm");break;case"confirm":if(0!==e.sea.shipsToPlace.total){e.changeStatus("place");break}e.game.isAllyReady&&(e.game.isEnemyReady?e.changeStatus("play"):e.changeStatus("wait"));break;case"wait":e.game.isEnemyReady&&e.changeStatus("play");break;case"play":break;case"defeat":case"victory":e.game.isAllyWantRepeat&&e.game.isEnemyWantRepeat&&e.newRound()}e.rtc.message?(e.rtc.interface.send(e.rtc.message),e.clearMessage()):e.sea.feedback&&e.send(e.sea.feedback)}),[e]),c.a.createElement(Nt,null)}));o.a.render(c.a.createElement(s.a,{store:ke},c.a.createElement(i.a,null,c.a.createElement(u.a,{path:"/",component:qt}))),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.859754ac.chunk.js.map