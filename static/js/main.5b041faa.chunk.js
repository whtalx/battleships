(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{36:function(e,t,n){e.exports=n(50)},41:function(e,t,n){},42:function(e,t,n){},48:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=48},50:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(18),o=n.n(c),i=n(32),u=n(15),s=(n(41),n(42),n(6)),l=n(14),p=n(28),f=n(1);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var b=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{isAllyReady:!0})};function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var O=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{isAllyWantRepeat:!0})};function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var g=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{move:!e.move})};function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var v=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{status:t.payload?"connect":"place",type:t.payload?"pvp":"comp",move:!t.payload||e.move})};function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var E=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{status:t.payload})};function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var P=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{isEnemyReady:!0})};function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var S=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{isEnemyWantRepeat:!0})},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"choose",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:null,isAllyReady:!1,isEnemyReady:!1,isAllyWantRepeat:!1,isEnemyWantRepeat:!1,status:e,move:t}},x=function(e){return e.match(/\d+-/g).map((function(e){return parseInt(e)}))};function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=function(e,t){var n="fire"===t.payload.type?{type:"fire",data:x(t.payload.data)}:T({},t.payload);return console.log("sent:     ",JSON.parse(JSON.stringify(n))),T({},e,{message:n,waitingForFeedback:"fire"===t.payload.type,lastSent:"fire"===t.payload.type?t.payload.data:e.lastSent})};function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var _=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{},t.payload)};function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var q=function(e,t){return console.log("received: ",JSON.parse(JSON.stringify(t.payload))),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{waitingForFeedback:!1,lastReceived:"fire"===t.payload.type?"cell-".concat(t.payload.data[0],"-").concat(t.payload.data[1],"-ally"):e.lastReceived})};function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var N=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{peerID:t.payload})};function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var F=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{message:null})};function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var W=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{isConnected:t.payload})};function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var V=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{isInitialised:t.payload})},H=n(4),Y=function(e){var t=Object(H.a)(Array(10).keys());return t.map((function(n){return t.map((function(t){return{id:"cell-".concat(t,"-").concat(n,"-").concat(e),hit:!1,miss:!1,ship:!1,sank:!1}}))}))},J=n(7),X=function(e){return e.split("-").map((function(e){return parseInt(e)}))};function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K=function(e){var t=e.squadron.reduce((function(e,t){return e+function(e){return e.map((function(e){return null===e[0]?1:1===e.length?0:e.reduce((function(e,t){return 1===e?1:null===t?1:0}))})).reduce((function(e,t){return e+t}))}(t)}),0),n=B({},e.deckToPlace);e:for(var r=0;r<e.squadron.length;r++)for(var a=0;a<e.squadron[r].length;a++)for(var c=0;c<e.squadron[r][a].length;c++)if(null===e.squadron[r][a][c]){n={type:r,ship:a,deck:c};break e}return B({},e,{shipsToPlace:t,deckToPlace:n})};function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Z=function(e,t,n,r,a,c){var o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},a);return c?(o.squadron[e][t].pop(),o.squadron[e][t].unshift(r)):o.squadron[e][t][n]=r,o.squadron[e][t].forEach((function(n,r){n&&(o.ally[n[1]][n[0]].ship="".concat(e,"-").concat(t,"-").concat(r))})),K(o)};function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ee=function(e,t,n,r,a){var c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},a);return c.squadron[e][t].splice(n,1),c.squadron[e][t].push(null),c.ally[r[1]][r[0]].ship=!1,c.squadron[e][t].forEach((function(n,r){n&&(c.ally[n[1]][n[0]].ship="".concat(e,"-").concat(t,"-").concat(r))})),K(c)},te=function(e,t){return e[t[1]][t[0]].ship};function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var re=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),r=x(t.payload),a=te(n.ally,r);if(a){var c=X(a),o=Object(J.a)(c,3),i=o[0],u=o[1],s=o[2];return 0!==s&&n.squadron[i][u][s+1]?n:ee(i,u,s,r,n)}if(function(e,t){return e[t[1]-1]&&(e[t[1]-1][t[0]-1]&&e[t[1]-1][t[0]-1].ship||e[t[1]-1][t[0]+1]&&e[t[1]-1][t[0]+1].ship)||e[t[1]+1]&&(e[t[1]+1][t[0]-1]&&e[t[1]+1][t[0]-1].ship||e[t[1]+1][t[0]+1]&&e[t[1]+1][t[0]+1].ship)}(n.ally,r))return n;var l=function(e,t){return[e[t[1]-1]&&e[t[1]-1][t[0]]&&e[t[1]-1][t[0]].ship,e[t[1]+1]&&e[t[1]+1][t[0]]&&e[t[1]+1][t[0]].ship,e[t[1]][t[0]-1]&&e[t[1]][t[0]-1].ship,e[t[1]][t[0]+1]&&e[t[1]][t[0]+1].ship].filter((function(e){return e}))}(n.ally,r);if(1===l.length){for(var p=l[0].split("-").map((function(e){return parseInt(e)})),y=Object(J.a)(p,2),b=y[0],d=y[1],O=1;O<n.squadron[b][d].length;O++)if(null===n.squadron[b][d][O]){var h=r[0]<n.squadron[b][d][0][0]||r[1]<n.squadron[b][d][0][1];return Z(b,d,O,r,n,h)}return n}for(var g=0;g<n.squadron[n.deckToPlace.type].length;g++){var m=n.squadron[n.deckToPlace.type][g];if(!(m.filter((function(e){return e})).length===m.length))return null===m[0]?Z(n.deckToPlace.type,g,0,r,n,!1):n}return n},ae=function(e,t){var n=Object(H.a)(e),r=Object(H.a)(t),a=1===r.length?[3,3]:r[1][1]-r[0][1]===0?[r.length+2,3]:[3,r.length+2],c=Object(J.a)(a,2),o=c[0],i=c[1];return Object(H.a)(Array(i).keys()).forEach((function(e){Object(H.a)(Array(o).keys()).forEach((function(t){(function(e,t){return 1===r.length?!(1===e&&1===t):r[1][1]-r[0][1]===0?!(e>0&&e<r.length+1&&1===t):!(t>0&&t<r.length+1&&1===e)})(t,e)&&function(e,t){var a=r[0];n[t-1+a[1]]&&n[t-1+a[1]][e-1+a[0]]&&(n[t-1+a[1]][e-1+a[0]].miss=!0)}(t,e)}))})),n};function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var oe=function(e,t){var n,r=[],a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),c=Object(H.a)(t.payload.data),o=te(a.ally,c);if(o){a.ally[c[1]][c[0]].hit=!0;var i=X(o),u=Object(J.a)(i,2),s=u[0],l=u[1];if(function(e,t,n){return n.squadron[e][t].reduce((function(e,t){return n.ally[t[1]][t[0]].hit&&e}),!0)}(s,l,a)){if(a.allyShipsLeft-=1,0===a.allyShipsLeft)return a.feedback={type:"defeat"},a;a.squadron[s][l].forEach((function(e){a.ally[e[1]][e[0]].sank=!0,r.push(e)})),a.ally=ae(a.ally,r),n="sank"}else n="hit"}else n="miss",a.ally[c[1]][c[0]].miss=!0;return 0===r.length&&r.push(c),a.feedback={type:"feedback",data:r,feedback:n},a};function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ue=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{feedback:{type:"victory",data:Object(H.a)(e.ally.map((function(e){return e.map((function(e){return e.miss?1:e.sank?2:e.hit?3:e.ship?4:0}))})))}})},se=function(){return Object(H.a)(Array(4).keys()).map((function(e){return Object(H.a)(Array(e+1)).map((function(t){return Object(H.a)(Array(4-e)).map((function(e){return null}))}))}))};function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var pe=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{feedback:null})};function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var be=[[[-3,0],[0,-3]],[[-2,0],[0,-2]],[[-1,0],[0,-1]],[[0,0],[0,0]]],de=function(e){var t=ye({},e);try{t.squadron.forEach((function(e,n){t.squadron[n].forEach((function(e,r){var a=function e(t,n){var r=ye({},t),a=Math.floor(Math.random()+.5),c=[Math.floor(Math.random()*(10+be[n][a][0])),Math.floor(Math.random()*(10+be[n][a][1]))];try{for(var o=-1;o<=r.squadron[n][0].length+1;o++)if(1===a&&r.ally[c[1]+o]&&(r.ally[c[1]+o][c[0]-1]&&r.ally[c[1]+o][c[0]-1].ship||r.ally[c[1]+o][c[0]]&&r.ally[c[1]+o][c[0]].ship||r.ally[c[1]+o][c[0]+1]&&r.ally[c[1]+o][c[0]+1].ship)||0===a&&(r.ally[c[1]-1]&&r.ally[c[1]-1][c[0]+o]&&r.ally[c[1]-1][c[0]+o].ship||r.ally[c[1]][c[0]+o]&&r.ally[c[1]][c[0]+o].ship||r.ally[c[1]+1]&&r.ally[c[1]+1][c[0]+o]&&r.ally[c[1]+1][c[0]+o].ship))return e(r,n)}catch(u){var i=u.message;return console.error(i),{}}return{coordinates:c,direction:a}}(t,n),c=a.coordinates,o=a.direction;if(!c)throw new Error("Browser too weak for such recursion \ud83d\ude14");t.squadron[n][r]=t.squadron[n][r].map((function(e,t){return 0===o?[c[0]+t,c[1]]:[c[0],c[1]+t]})),t.squadron[n][r].forEach((function(e,a){t.ally[e[1]][e[0]].ship="".concat(n,"-").concat(r,"-").concat(a)}))}))}))}catch(r){var n=r.message;console.error(n)}return K(t)};function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var he=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{enemy:Object(H.a)(t.payload.data.map((function(e,t){return e.map((function(e,n){return{id:"cell-".concat(n,"-").concat(t,"-enemy"),miss:1===e,sank:2===e,hit:3===e||2===e,ship:4===e||3===e||2===e}}))})))})};function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var me=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),r=Object(H.a)(t.payload.data);switch(t.payload.feedback){case"miss":n.enemy[r[0][1]][r[0][0]].miss=!0;break;case"hit":n.enemy[r[0][1]][r[0][0]].ship=!0,n.enemy[r[0][1]][r[0][0]].hit=!0;break;case"sank":if(r.forEach((function(e){n.enemy[e[1]][e[0]].hit=!0,n.enemy[e[1]][e[0]].ship=!0,n.enemy[e[1]][e[0]].sank=!0})),n.enemy=ae(n.enemy,r),n.enemyShipsLeft-=1,0===n.enemyShipsLeft)return n.feedback={type:"victory",data:Object(H.a)(n.ally)},n}return n};function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ee=function(){return{ally:Y("ally"),enemy:Y("enemy"),squadron:se(),shipsToPlace:10,deckToPlace:{type:0,ship:0,deck:0},allyShipsLeft:10,enemyShipsLeft:10,feedback:null}},we=Object(l.c)({game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_TYPE":return v(e,t);case"CHANGE_STATUS":return E(e,t);case"READY":return b(e);case"REPEAT":return O(e);case"SEND":switch(t.payload.type){case"feedback":return"miss"===t.payload.feedback?g(e):e;case"victory":return E(e,{payload:"victory"});default:return e}case"RECEIVE":switch(t.payload.type){case"ready":return P(e);case"repeat":return S(e);case"feedback":return"miss"===t.payload.feedback?g(e):e;case"victory":return E(e,{payload:"defeat"});default:return e}case"SET_MOVE":return t.payload?g(e):e;case"RESET":return D();case"NEW_ROUND":return D("place","pvp"!==e.type||!e.move);default:return e}},rtc:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{peerID:"",message:null,interface:null,isClient:!1,isConnected:!1,isInitialised:!1,waitingForFeedback:!1,lastSent:null,lastReceived:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_RTC":return _(e,t);case"SEND":return C(e,t);case"CLEAR_MESSAGE":return F(e);case"READY":return C(e,{payload:{type:"ready"}});case"REPEAT":return C(e,{payload:{type:"repeat"}});case"RECEIVE":return q(e,t);case"SET_PEER_ID":return N(e,t);case"SET_IS_CONNECTED":return W(e,t);case"SET_IS_INITIALISED":return V(e,t);case"RESET":return{peerID:"",message:null,interface:null,isClient:!1,isConnected:!1,isInitialised:!1,waitingForFeedback:!1,lastSent:null,lastReceived:null};default:return e}},sea:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND":return"feedback"===t.payload.type||"defeat"===t.payload.type||"victory"===t.payload.type?pe(e):e;case"PLACE_SHIP":return re(e,t);case"RANDOM":return de(je({},e,{ally:Y("ally"),squadron:se()}));case"RECEIVE":switch(t.payload.type){case"fire":return oe(e,t);case"feedback":return me(e,t);case"victory":return he(e,t);case"defeat":return ue(e,t);default:return e}case"RESET":case"NEW_ROUND":return Ee();default:return e}}}),Pe=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,ke=Object(l.e)(we,Pe(Object(l.a)(p.a))),Se=function(){return{ally:Y("ally"),enemy:Y("enemy"),squadron:se(),shipsToPlace:{fourDecker:1,threeDecker:2,twoDecker:3,singleDecker:4,total:10},currentType:0,allyShipsLeft:10,enemyShipsLeft:10,feedback:null}};function De(e){var t=this;this.init=function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t.state=0,t.shootLog=[],t.lastShoot=null,t.directions=["up","down","left","right"],t.directionsStack=null,t.sea=de(Se()),t.fireDelay=250,n&&e.setIsConnected(!0)},this.sendMessage=e.receive,this.findLogIndex=function(e){return t.shootLog.findIndex((function(t){return t.cell.toString()===e.toString()}))},this.randomDirectionsStack=function(){return Object(H.a)(Array(4)).reduce((function(e){for(var t=Math.floor(4*Math.random());-1!==e.indexOf(t);)t=Math.floor(4*Math.random());return[].concat(Object(H.a)(e),[t])}),[]).map((function(e){return t.directions[e]}))},this.reverseDirection=function(){return(t.directions.indexOf(t.directionsStack[0])+1)%2===0?t.directions[t.directions.indexOf(t.directionsStack[0])-1]:t.directions[t.directions.indexOf(t.directionsStack[0])+1]},this.findHitIndex=function(){return t.shootLog.reduceRight((function(e,t,n){return"hit"===t.feedback&&(-1===e||e-n===1)?n:e}),-1)},this.alreadyShoot=function(e){return!t.sea.enemy[e[1]]||!t.sea.enemy[e[1]][e[0]]||t.sea.enemy[e[1]][e[0]].ship||t.sea.enemy[e[1]][e[0]].miss},this.addShift=function(e,t,n){var r=Object(J.a)(e,2),a=r[0],c=r[1];switch(t){case"up":return[a,c-n];case"down":return[a,c+n];case"left":return[a-n,c];case"right":return[a+n,c];default:return}},this.getRandomCoordinates=function(){for(var e=[],n=function(e,t){return e.findIndex((function(e){return e.toString()===t.toString()}))>=0};;){var r=[Math.floor(10*Math.random()),Math.floor(10*Math.random())];if(!n(e,r)){if(!t.alreadyShoot(r))return r;e.push(r)}}},this.shoot=function(){switch(t.state){case 0:t.lastShoot=t.getRandomCoordinates();break;case 1:var e=t.findHitIndex();if(null===t.directionsStack?t.directionsStack=t.randomDirectionsStack():t.directionsStack.unshift(),0===t.directionsStack.length)return t.directionsStack=null,t.changeState("sank"),t.shoot();var n=t.directionsStack[0],r=t.addShift(t.shootLog[e].cell,n,1);if(t.alreadyShoot(r)||r[0]<0||r[0]>9||r[1]<0||r[1]>9)return t.directionsStack.shift(),t.shoot();t.lastShoot=r;break;case 2:var a=t.directionsStack[0],c=t.addShift(t.lastShoot,a,1);if(t.alreadyShoot(c)||c[0]<0||c[0]>9||c[1]<0||c[1]>9)return t.changeState("miss"),t.shoot();t.lastShoot=c;break;case 3:for(var o=t.reverseDirection(),i=t.findHitIndex(),u=t.addShift(t.shootLog[i].cell,o,1);t.alreadyShoot(u);)u=t.addShift(u,o,1);t.lastShoot=u,t.directionsStack=[o];break;default:return}t.shootLog.push({cell:t.lastShoot}),setTimeout((function(){t.sendMessage({type:"fire",data:t.lastShoot})}),t.fireDelay)},this.changeState=function(e){switch(t.state){case 0:"hit"===e&&(t.state=1);break;case 1:t.state="hit"===e?2:"sank"===e?0:1;break;case 2:t.state="hit"===e?2:"sank"===e?0:3;break;case 3:t.state="hit"===e?2:0}},this.send=function(e){switch(e.type){case"fire":t.sea=oe(t.sea,{payload:e}),t.sendMessage(t.sea.feedback),"miss"===t.sea.feedback.feedback&&t.shoot(),t.sea.feedback=null;break;case"feedback":t.sea=me(t.sea,{payload:e});var n=t.findLogIndex(t.lastShoot);t.shootLog[n].feedback=e.feedback,t.changeState(e.feedback),"sank"===e.feedback&&(t.directionsStack=null),"miss"!==e.feedback&&t.shoot();break;case"defeat":t.sea=ue(t.sea),t.sendMessage(t.sea.feedback),t.sendMessage({type:"repeat"}),t.init(!1);break;case"ready":t.sendMessage({type:"ready"});break;case"victory":t.sendMessage({type:"repeat"}),t.init(!1)}}}var xe=n(2),Ie=n(3);function Te(){var e=Object(xe.a)(["\n  width: 100%;\n  height: 100%;\n  position: relative;\n  display: grid;\n  grid-gap: 1px;\n  grid-template: repeat(10, 1fr) / repeat(10, 1fr);\n"]);return Te=function(){return e},e}function Ce(){var e=Object(xe.a)(["var(--gray)"]);return Ce=function(){return e},e}function Re(){var e=Object(xe.a)(["var(--silver)"]);return Re=function(){return e},e}function _e(){var e=Object(xe.a)(["var(--olive)"]);return _e=function(){return e},e}function Ae(){var e=Object(xe.a)(["var(--yellow)"]);return Ae=function(){return e},e}function qe(){var e=Object(xe.a)(["\n  margin: 8px;\n  width: calc(50vmin - 20px);\n  height: calc(50vmin - 20px);\n  min-width: 292px;\n  min-height: 292px;\n  box-sizing: border-box;\n  border: 2px solid ",";\n  background-color: ",";\n  overflow: hidden;\n"]);return qe=function(){return e},e}var Le=Ie.b.div(qe(),(function(e){return e.move?Object(Ie.a)(Ae()):Object(Ie.a)(_e())}),(function(e){return e.move?Object(Ie.a)(Re()):Object(Ie.a)(Ce())})),Ne=Ie.b.div(Te()),Me=function(e){var t=e.move,n=e.children;return a.a.createElement(Le,{move:t},a.a.createElement(Ne,{move:t,children:n}))};function Fe(){var e=Object(xe.a)(["var(--white)"]);return Fe=function(){return e},e}function ze(){var e=Object(xe.a)(["var(--silver)"]);return ze=function(){return e},e}function We(){var e=Object(xe.a)(["var(--gray)"]);return We=function(){return e},e}function Ue(){var e=Object(xe.a)(["var(--aqua)"]);return Ue=function(){return e},e}function Ve(){var e=Object(xe.a)(["\n      :after {\n        content: '';\n        width: 60%;\n        height: 50%;\n        background-color: ",";\n      }\n    "]);return Ve=function(){return e},e}function He(){var e=Object(xe.a)(["var(--gray)"]);return He=function(){return e},e}function Ye(){var e=Object(xe.a)(["var(--aqua)"]);return Ye=function(){return e},e}function Je(){var e=Object(xe.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-sizing: border-box;\n  background-color: var(--blue);\n  color: ",";\n\n  ","\n"]);return Je=function(){return e},e}var Xe=Ie.b.div(Je(),(function(e){return e.last?Object(Ie.a)(Ye()):Object(Ie.a)(He())}),(function(e){return e.ship&&Object(Ie.a)(Ve(),e.last?Object(Ie.a)(Ue()):e.sank?Object(Ie.a)(We()):!e.isCompleted||e.hit?Object(Ie.a)(ze()):Object(Ie.a)(Fe()))})),Ge=function(e){return a.a.createElement(Xe,e,e.miss&&"*")},Be=function(e){var t=e.cell,n=e.squadron;if(!t)return!1;var r=X(t),a=Object(J.a)(r,2),c=a[0],o=a[1];return n[c][o].reduce((function(e,t){return!!e&&null!==t}),!0)},Ke=Object(s.b)((function(e){return{game:e.game,rtc:e.rtc,sea:e.sea}}),(function(e){return{place:function(t){return e({type:"PLACE_SHIP",payload:t})}}}))((function(e){return a.a.createElement(Me,{move:"place"===e.game.status||"confirm"===e.game.status||!e.game.move},e.sea.ally.map((function(t){return t.map((function(t){var n=t.id,r=t.ship,c=t.hit,o=t.miss,i=t.sank;return a.a.createElement(Ge,{key:n,id:n,last:n===e.rtc.lastReceived,ship:r,hit:c,miss:o,sank:i,isCompleted:Be({cell:r,squadron:e.sea.squadron}),onClick:function(){("place"===e.game.status||"confirm"===e.game.status)&&(e.sea.shipsToPlace>0||r)&&e.place(n)}})}))})))})),Qe=Object(s.b)((function(e){return{game:e.game,rtc:e.rtc,sea:e.sea}}),(function(e){return{fire:function(t){return e({type:"SEND",payload:{type:"fire",data:t}})}}}))((function(e){return a.a.createElement(Me,{move:e.game.move},e.sea.enemy.map((function(t){return t.map((function(t){var n=t.id,r=t.ship,c=t.hit,o=t.miss,i=t.sank;return a.a.createElement(Ge,{key:n,id:n,last:n===e.rtc.lastSent,ship:r,hit:c,miss:o,sank:i,onClick:function(){"play"===e.game.status&&e.game.move&&!e.rtc.waitingForFeedback&&!c&&!o&&e.fire(n)},enemy:!0})}))})))}));function Ze(){var e=Object(xe.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-flow: row wrap;\n  align-items: center;\n  justify-content: center;\n"]);return Ze=function(){return e},e}var $e=Ie.b.div(Ze()),et=n(31),tt=n.n(et);function nt(e){var t=this;this.lastPeerID=null,this.init=function(){t.peer=new tt.a,t.connection=null,e.setIsInitialised(!0),t.peer.on("open",(function(){null===t.peer.id?t.peer.id=t.lastPeerID:t.lastPeerID=t.peer.id,e.setPeerID(t.peer.id)})),t.peer.on("connection",(function(e){t.connection?e.on("open",e.close):(t.connection=e,t.ready())})),t.peer.on("disconnected",(function(){t.peer.reconnect()})),t.peer.on("close",(function(){t.connection=null})),t.peer.on("error",(function(){e.handleDisconnect()})),t.peer.on("close",(function(){t.connection=null}))},this.ready=function(){e.setIsConnected(!0),t.connection.on("data",e.receive),t.connection.on("close",(function(){t.connection=null,e.handleDisconnect()}))},this.join=function(){t.connection&&t.connection.close(),t.connection=t.peer.connect(e.peerID,{reliable:!0,serialization:"json"}),t.connection.on("open",(function(){e.setIsConnected(!0)})),t.connection.on("close",(function(){t.connection=null,e.handleDisconnect()})),t.connection.on("data",e.receive)},this.send=function(e){t.connection&&t.connection.open&&t.connection.send(e)}}function rt(){var e=Object(xe.a)(["\n  margin: 16px auto;\n  display: flex;\n  flex-flow: row;\n  justify-content: center;\n"]);return rt=function(){return e},e}function at(){var e=Object(xe.a)(["\n  position: relative;\n  background-color: var(--black);\n  color: var(--white);\n  overflow: hidden;\n\n  ",":not(:focus) + "," {\n    display: none;\n  }\n"]);return at=function(){return e},e}function ct(){var e=Object(xe.a)(["\n  position: absolute;\n  top: 0;\n  right: 3px;\n  z-index: 1;\n"]);return ct=function(){return e},e}function ot(){var e=Object(xe.a)(["\n  position: absolute;\n  top: 0;\n  right: ","px;\n  animation: "," 1s linear infinite;\n"]);return ot=function(){return e},e}function it(){var e=Object(xe.a)(["\n  margin: 0;\n  padding: 0 0 0 4px;\n  height: 16px;\n  min-width: 0;\n  position: relative;\n  z-index: 1;\n  background: none;\n  caret-color: transparent;\n"]);return it=function(){return e},e}function ut(){var e=Object(xe.a)(["\n  0% { opacity: 1 }\n  50% { opacity: 1 }\n  51% { opacity: 0 }\n  to { opacity: 0 }\n"]);return ut=function(){return e},e}var st=Object(Ie.c)(ut()),lt=Ie.b.input.attrs({type:"text",size:17,maxLength:16})(it()),pt=Ie.b.div(ot(),(function(e){return 147-9*e.caret}),st),ft=Ie.b.div(ct()),yt=Ie.b.div(at(),lt,pt),bt=Ie.b.div(rt()),dt=function(e){var t=e.onInput,n=e.readonly,c=void 0!==n&&n,o=e.submit,i=e.symbols,u=e.value,s=void 0===u?"":u,l=Object(r.useRef)(null),p=Object(r.useState)(i),f=Object(J.a)(p,2),y=f[0],b=f[1],d=function(e){"keydown"===e.type&&"Enter"===e.key?o():b(e.target.selectionEnd)};!c&&Object(r.useEffect)((function(){l.current.focus()}),[]);var O=c?{onChange:function(e){return e.preventDefault()},value:s}:{onClick:d,onKeyUp:d,onPaste:d,onChange:d,onKeyDown:d,onInput:t};return a.a.createElement(bt,null,"[",a.a.createElement(yt,null,a.a.createElement(ft,null,"\xb7".repeat(17-i)),a.a.createElement(lt,Object.assign({ref:l},O)),!c&&a.a.createElement(pt,{caret:y},"_")),"]")};function Ot(){var e=Object(xe.a)(["\n  padding: 0 16px;\n  height: 16px;\n  min-width: 60px;\n  background-color: var(--white);\n  box-shadow: 8px 8px 0 var(--black);\n  color: var(--gray);\n\n  & + & {\n    margin-left: 24px;\n  }\n\n  :focus {\n    background-color: var(--yellow);\n    color: var(--maroon);\n  }\n\n  span {\n    color: var(--black);\n  }\n"]);return Ot=function(){return e},e}var ht=Ie.b.button(Ot()),gt=function(e){var t=e.autoFocus,n=e.className,r=e.onClick,c=e.text,o=void 0===c?"":c,i=e.index;return a.a.createElement(ht,{autoFocus:t,className:n,onClick:"function"===typeof r?r:void 0},void 0===i?o:[o.substring(0,i),a.a.createElement("span",{key:o},o[i]),o.substring(i+1)])};function mt(){var e=Object(xe.a)(["\n  margin-top: 32px;\n"]);return mt=function(){return e},e}function vt(){var e=Object(xe.a)(["\n  padding: 32px 0;\n  height: 100%;\n  box-sizing: border-box;\n  min-height: 294px;\n  display: flex;\n  flex-flow: column;\n  align-items: center;\n  justify-content: center;\n  border: 3px double var(--black);\n"]);return vt=function(){return e},e}function jt(){var e=Object(xe.a)(["\n  margin: 16px 0;\n  padding: 8px 4px;\n  width: 320px;\n  max-width: 80%;\n  position: relative;\n  background-color: var(--teal);\n  box-shadow: 16px 16px 0 var(--black);\n  color: var(--black);\n\n  :before {\n    content: '","';\n    padding: 0 8px;\n    position: absolute;\n    top: 2px;\n    left: 50%;\n    width: max-content;\n    height: 16px;\n    background-color: inherit;\n    color: inherit;\n    transform: translateX(-50%);\n    z-index: 1;\n  }\n"]);return jt=function(){return e},e}var Et=Ie.b.div(jt(),(function(e){return e.title_})),wt=Ie.b.div(vt()),Pt=Ie.b.div(mt()),kt=Object(s.b)((function(e){return{game:e.game,rtc:e.rtc}}),(function(e){return{setRTC:function(t){return e({type:"SET_RTC",payload:t})},receive:function(t){return e({type:"RECEIVE",payload:t})},setPeerID:function(t){return e({type:"SET_PEER_ID",payload:t})},selectType:function(t){return e({type:"SELECT_TYPE",payload:t})},setIsConnected:function(t){return e({type:"SET_IS_CONNECTED",payload:t})},setIsInitialised:function(t){return e({type:"SET_IS_INITIALISED",payload:t})},handleDisconnect:function(){return e({type:"RESET"})}}}))((function(e){var t=Object(r.useState)(""),n=Object(J.a)(t,2),c=n[0],o=n[1],i=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.setRTC({interface:new nt({peerID:t,setPeerID:e.setPeerID,setIsConnected:e.setIsConnected,setIsInitialised:e.setIsInitialised,receive:e.receive,handleDisconnect:e.handleDisconnect}),isClient:n,isInitialised:r})},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;return t&&""!==t&&t!==e.rtc.peerID&&i(t,!0)};switch(Object(r.useEffect)((function(){"connect"===e.game.status&&(null===e.rtc.interface?i(e.rtc.peerID):e.rtc.isInitialised||(e.rtc.interface.init(),e.rtc.isClient&&e.rtc.interface.join()))}),[e]),e.game.status){case"choose":return a.a.createElement(Et,{title_:"select game type"},a.a.createElement(wt,null,a.a.createElement("p",null,"you want to play with"),a.a.createElement(Pt,null,a.a.createElement(gt,{autoFocus:!0,onClick:function(){e.selectType(!0)},text:"person",index:0}),a.a.createElement(gt,{onClick:function(){e.selectType(!1)},text:"computer",index:0}))));case"connect":return""===e.rtc.peerID?a.a.createElement(Et,{title_:"connect to remote player"},a.a.createElement(wt,null,"please wait")):a.a.createElement(Et,{title_:"connect to remote player"},a.a.createElement(wt,null,a.a.createElement("label",null,"share this code",a.a.createElement("br",null),"with someone",a.a.createElement("br",null),"you want to play:"),a.a.createElement(dt,{symbols:e.rtc.peerID.length,value:e.rtc.peerID,readonly:!0}),a.a.createElement("label",null,"or paste code that",a.a.createElement("br",null),"was shared to you:"),a.a.createElement(dt,{onInput:function(e){var t=e.target.value;return o(t)},submit:u,symbols:c.length}),a.a.createElement(Pt,null,a.a.createElement(gt,{onClick:function(){u()},text:"connect"}),a.a.createElement(gt,{onClick:function(){o(""),e.handleDisconnect()},text:"back"}))));default:return null}}));function St(){var e=Object(xe.a)(["\n  margin-top: -8px;\n  flex-grow: 1;\n  display: flex;\n  flex-flow: row;\n  align-items: center;\n"]);return St=function(){return e},e}function Dt(){var e=Object(xe.a)(["\n  width: 0;\n  height: 0;\n"]);return Dt=function(){return e},e}function xt(){var e=Object(xe.a)(["var(--white)"]);return xt=function(){return e},e}function It(){var e=Object(xe.a)(["var(--aqua)"]);return It=function(){return e},e}function Tt(){var e=Object(xe.a)(["\n      :after {\n        content: '';\n        width: 60%;\n        height: 50%;\n        background-color: ",";\n      }\n    "]);return Tt=function(){return e},e}function Ct(){var e=Object(xe.a)(["\n  width: calc(5vmin - 2px);\n  height: calc(5vmin - 2px);\n  min-width: 29px;\n  min-height: 29px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: var(--blue);\n\n  ","\n"]);return Ct=function(){return e},e}function Rt(){var e=Object(xe.a)(["\n  margin-top: 8px;\n  display: grid;\n  grid-gap: 1px;\n  grid-template: repeat(7, auto) / repeat(8, auto);\n"]);return Rt=function(){return e},e}function _t(){var e=Object(xe.a)(["\n  padding: 16px 0 0;\n  height: 100%;\n  box-sizing: border-box;\n  display: flex;\n  flex-flow: column;\n  align-items: center;\n  justify-content: flex-start;\n  border: 3px double var(--white);\n\n  hr {\n    margin: 8px 0;\n    border: 0;\n    outline: 0;\n    width: 100%;\n    height: 1px;\n    background-color: var(--white);\n  }\n"]);return _t=function(){return e},e}function At(){var e=Object(xe.a)(["\n  padding: 8px 4px;\n  margin: 0 16px 16px 0;\n  width: calc(50vmin - 36px);\n  height: calc(50vmin - 36px);\n  min-width: 276px;\n  min-height: 276px;\n  box-sizing: border-box;\n  position: relative;\n  background-color: var(--gray);\n  box-shadow: 16px 16px 0 var(--black);\n  color: var(--white);\n\n  :before {\n    content: '","';\n    padding: 0 8px;\n    position: absolute;\n    top: 2px;\n    left: 50%;\n    width: max-content;\n    height: 16px;\n    background-color: inherit;\n    color: inherit;\n    transform: translateX(-50%);\n    z-index: 1;\n  }\n"]);return At=function(){return e},e}var qt=Ie.b.div(At(),(function(e){return e.title_})),Lt=Ie.b.div(_t()),Nt=Ie.b.div(Rt()),Mt=Ie.b.div(Ct(),(function(e){return!e.isPlaced&&Object(Ie.a)(Tt(),e.isNext?Object(Ie.a)(It()):Object(Ie.a)(xt()))})),Ft=Ie.b.div(Dt()),zt=Ie.b.div(St()),Wt=Object(s.b)((function(e){return{game:e.game,sea:e.sea}}),(function(e){return{ready:function(){return e({type:"READY"})},random:function(){return e({type:"RANDOM"})}}}))((function(e){var t=function(t){var n=t.type,r=t.ship,a=t.deck;return null!==e.sea.squadron[n][r][a]},n=function(n){var r=n.type,c=n.ship,o=n.deck;return a.a.createElement(Mt,{isNext:e.sea.deckToPlace.type===r&&e.sea.deckToPlace.ship===c&&e.sea.deckToPlace.deck===o,isPlaced:t({type:r,ship:c,deck:o})})};return a.a.createElement(qt,{title_:"place your ships"},a.a.createElement(Lt,null,"click on field to place",a.a.createElement("br",null),"or delete ship deck",a.a.createElement("hr",null),"ships left:",a.a.createElement(Nt,null,Object(H.a)(Array(7)).reduce((function(t,r,c){return[].concat(Object(H.a)(t),c%2!==0?Object(H.a)(Object(H.a)(Array(8).keys()).map((function(e){return a.a.createElement(Ft,{key:"".concat(e,"-").concat(c)})}))):Object(H.a)(e.sea.squadron[c/2].reduce((function(t,r,o){for(var i=o>0?e.sea.squadron[c/2][o-1].length*o+o:o,u=0;u<r.length;u++)t[u+i]=a.a.createElement(n,{key:"".concat(c/2,"-").concat(o,"-").concat(u),type:c/2,ship:e.sea.squadron[c/2].length-o-1,deck:r.length-u-1});return t}),Object(H.a)(Array(8)).map((function(e,t){return a.a.createElement(Ft,{key:"".concat(t,"-").concat(c)})})))))}),[])),a.a.createElement("hr",null),a.a.createElement(zt,null,a.a.createElement(gt,{text:"random",index:0,onClick:e.random,autoFocus:!0}),a.a.createElement(gt,{text:"confirm",index:0,onClick:"confirm"===e.game.status&&e.ready}))))}));function Ut(){var e=Object(xe.a)(["\n"]);return Ut=function(){return e},e}function Vt(){var e=Object(xe.a)(["\n  margin-top: 4em;\n  width: 100%;\n  line-height: 2.5em;\n  text-align: center;\n"]);return Vt=function(){return e},e}function Ht(){var e=Object(xe.a)(["\n  padding: 16px 0;\n  height: 100%;\n  box-sizing: border-box;\n  display: flex;\n  flex-flow: column;\n  align-items: center;\n  justify-content: space-between;\n  border: 3px double var(--black);\n"]);return Ht=function(){return e},e}function Yt(){var e=Object(xe.a)(["\n  padding: 8px 4px;\n  margin: -16px 0 0 -16px;\n  width: 270px;\n  height: 270px;\n  box-sizing: border-box;\n  position: relative;\n  background-color: var(--teal);\n  box-shadow: 16px 16px 0 var(--black);\n  color: var(--black);\n\n  :before {\n    content: '","';\n    padding: 0 8px;\n    position: absolute;\n    top: 2px;\n    left: 50%;\n    width: max-content;\n    height: 16px;\n    background-color: inherit;\n    color: inherit;\n    transform: translateX(-50%);\n    z-index: 1;\n  }\n"]);return Yt=function(){return e},e}function Jt(){var e=Object(xe.a)(["\n  margin: 8px;\n  width: calc(50vmin - 20px);\n  height: calc(50vmin - 20px);\n  min-width: 292px;\n  min-height: 292px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return Jt=function(){return e},e}var Xt=Ie.b.div(Jt()),Gt=Ie.b.div(Yt(),(function(e){return e.title_})),Bt=Ie.b.div(Ht()),Kt=Ie.b.div(Vt()),Qt=Ie.b.div(Ut()),Zt=Object(s.b)((function(e){return{game:e.game}}),(function(e){return{repeat:function(){return e({type:"REPEAT"})},reset:function(){return e({type:"RESET"})}}}))((function(e){var t={victory:"you win!",defeat:"you loose!"};switch(e.game.status){case"defeat":case"victory":return e.game.isAllyWantRepeat?a.a.createElement(Xt,null,a.a.createElement(Gt,{title_:t[e.game.status]},a.a.createElement(Bt,null,a.a.createElement(Kt,null,"please wait for your opponent to answer")))):a.a.createElement(Xt,null,a.a.createElement(Gt,{title_:t[e.game.status]},a.a.createElement(Bt,null,a.a.createElement(Kt,null,!e.game.isAllyWantRepeat&&"play another round?",a.a.createElement("br",null),"pvp"===e.game.type&&e.game.isEnemyWantRepeat&&"your opponent insist"),a.a.createElement(Qt,null,a.a.createElement(gt,{text:"yes",index:0,onClick:e.repeat,autoFocus:!0}),a.a.createElement(gt,{text:"no",index:0,onClick:e.reset})))));case"wait":return a.a.createElement(Xt,null,a.a.createElement(Gt,{title_:"please wait"},a.a.createElement(Bt,null,a.a.createElement(Kt,null,"your opponent",a.a.createElement("br",null),"placing their ships"))));default:return null}})),$t=Object(s.b)((function(e){return{status:e.game.status}}))((function(e){switch(e.status){case"choose":case"connect":return a.a.createElement(kt,null);case"place":case"confirm":return a.a.createElement($e,null,a.a.createElement(Ke,null),a.a.createElement(Wt,null));case"victory":case"wait":return a.a.createElement($e,null,a.a.createElement(Ke,null),a.a.createElement(Zt,null));case"play":return a.a.createElement($e,null,a.a.createElement(Ke,null),a.a.createElement(Qe,null));case"defeat":return a.a.createElement($e,null,a.a.createElement(Zt,null),a.a.createElement(Qe,null));default:return null}})),en=Object(s.b)((function(e){return{game:e.game,rtc:e.rtc,sea:e.sea}}),(function(e){return{changeStatus:function(t){return e({type:"CHANGE_STATUS",payload:t})},setIsConnected:function(t){return e({type:"SET_IS_CONNECTED",payload:t})},selectType:function(t){return e({type:"SELECT_TYPE",payload:t})},setMove:function(t){return e({type:"SET_MOVE",payload:t})},receive:function(t){return e({type:"RECEIVE",payload:t})},setRTC:function(t){return e({type:"SET_RTC",payload:t})},clearMessage:function(){return e({type:"CLEAR_MESSAGE"})},send:function(t){return e({type:"SEND",payload:t})},newRound:function(){return e({type:"NEW_ROUND"})},random:function(){return e({type:"RANDOM"})},repeat:function(){return e({type:"REPEAT"})},ready:function(){return e({type:"READY"})},reset:function(){return e({type:"RESET"})}}}))((function(e){var t=function(t){var n=t.key.toLowerCase();switch(e.game.status){case"choose":"p"===n&&e.selectType(!0),"c"===n&&e.selectType(!1);break;case"place":"r"===n&&e.random();break;case"confirm":"r"===n&&e.random(),"c"===n&&e.ready();break;case"defeat":case"victory":"y"===n&&e.repeat(),"n"===n&&e.reset()}};return Object(r.useEffect)((function(){switch(document.removeEventListener("keypress",t),e.game.status){case"choose":document.addEventListener("keypress",t);break;case"connect":e.rtc.isConnected&&(e.setMove(e.rtc.isClient),e.changeStatus("place"));break;case"place":"comp"===e.game.type&&(null===e.rtc.interface?e.setRTC({interface:new De({setIsConnected:e.setIsConnected,receive:e.receive})}):e.rtc.isConnected||e.rtc.interface.init()),0===e.sea.shipsToPlace&&e.changeStatus("confirm"),document.addEventListener("keypress",t);break;case"confirm":if(0!==e.sea.shipsToPlace){e.changeStatus("place");break}if(e.game.isAllyReady){e.changeStatus(e.game.isEnemyReady?"play":"wait");break}document.addEventListener("keypress",t);break;case"wait":e.game.isEnemyReady&&e.changeStatus("play");break;case"play":break;case"defeat":case"victory":if(e.game.isAllyWantRepeat){e.game.isEnemyWantRepeat&&e.newRound();break}document.addEventListener("keypress",t)}return e.rtc.message?(e.rtc.interface.send(e.rtc.message),e.clearMessage()):e.sea.feedback&&e.send(e.sea.feedback),function(){return document.removeEventListener("keypress",t)}}),[e]),a.a.createElement($t,null)}));o.a.render(a.a.createElement(s.a,{store:ke},a.a.createElement(i.a,null,a.a.createElement(u.a,{path:"/",component:en}))),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.5b041faa.chunk.js.map