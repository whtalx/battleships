(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{36:function(e,t,n){e.exports=n(49)},41:function(e,t,n){},47:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=47},49:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),o=n(18),a=n.n(o),i=n(32),u=n(15),s=(n(41),n(6)),l=n(14),p=n(28),f=n(1);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var b=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{isAllyReady:!0})};function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var d=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{isAllyWantRepeat:!0})};function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var m=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{move:!e.move})};function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var h=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{status:t.payload?"connect":"place",type:t.payload?"pvp":"comp",isEnemyReady:!t.payload||e.isEnemyReady})};function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var w=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{status:t.payload})};function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var E=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{isEnemyReady:!0})};function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var k=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{isEnemyWantRepeat:!0})},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"connect",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{type:null,isAllyReady:!1,isEnemyReady:!1,isAllyWantRepeat:!1,isEnemyWantRepeat:!1,status:e,move:t}},I=function(e){return e.match(/\d+-/g).map((function(e){return parseInt(e)}))};function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=function(e,t){var n="fire"===t.payload.type?{type:"fire",data:I(t.payload.data)}:x({},t.payload);return e.interface.send(n),console.log("sent:     ",JSON.parse(JSON.stringify(n))),x({},e,{waitingForFeedback:"fire"===t.payload.type})};function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var _=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{},t.payload)};function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var N=function(e,t){return console.log("received: ",JSON.parse(JSON.stringify(t.payload))),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{waitingForFeedback:!1})};function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var M=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{peerID:t.payload})};function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var L=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{isConnected:t.payload})};function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var F=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{isInitialised:t.payload})},U=n(5),V=function(e){var t=Object(U.a)(Array(10).keys());return t.map((function(n){return t.map((function(t){return{id:"cell-".concat(t,"-").concat(n,"-").concat(e),hit:!1,miss:!1,ship:!1,sank:!1}}))}))},Y=n(11),J=function(e){return e.split("-").map((function(e){return parseInt(e)}))};function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var G=function(e){return e.map((function(e){return null===e[0]?1:1===e.length?0:e.reduce((function(e,t){return 1===e?1:null===t?1:0}))})).reduce((function(e,t){return e+t}))},X=function(e){var t={fourDecker:G(e.squadron[0]),threeDecker:G(e.squadron[1]),twoDecker:G(e.squadron[2]),singleDecker:G(e.squadron[3])},n=Object.values(t);return t.total=n.reduce((function(e,t){return e+t})),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{shipsToPlace:t,currentType:n.findIndex((function(e){return 0!==e}))})};function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var K=function(e,t,n,r,c,o){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},c);return o?(a.squadron[e][t].pop(),a.squadron[e][t].unshift(r)):a.squadron[e][t][n]=r,a.squadron[e][t].forEach((function(n,r){n&&(a.ally[n[1]][n[0]].ship="".concat(e,"-").concat(t,"-").concat(r))})),X(a)};function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Z=function(e,t,n,r,c){var o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},c);return o.squadron[e][t].splice(n,1),o.squadron[e][t].push(null),o.ally[r[1]][r[0]].ship=!1,o.squadron[e][t].forEach((function(n,r){n&&(o.ally[n[1]][n[0]].ship="".concat(e,"-").concat(t,"-").concat(r))})),X(o)},$=function(e,t){return e[t[1]][t[0]].ship};function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var te=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),r=I(t.payload),c=$(n.ally,r);if(c){var o=J(c),a=Object(Y.a)(o,3),i=a[0],u=a[1],s=a[2];return 0!==s&&n.squadron[i][u][s+1]?n:Z(i,u,s,r,n)}if(function(e,t){return e[t[1]-1]&&(e[t[1]-1][t[0]-1]&&e[t[1]-1][t[0]-1].ship||e[t[1]-1][t[0]+1]&&e[t[1]-1][t[0]+1].ship)||e[t[1]+1]&&(e[t[1]+1][t[0]-1]&&e[t[1]+1][t[0]-1].ship||e[t[1]+1][t[0]+1]&&e[t[1]+1][t[0]+1].ship)}(n.ally,r))return n;var l=function(e,t){return[e[t[1]-1]&&e[t[1]-1][t[0]]&&e[t[1]-1][t[0]].ship,e[t[1]+1]&&e[t[1]+1][t[0]]&&e[t[1]+1][t[0]].ship,e[t[1]][t[0]-1]&&e[t[1]][t[0]-1].ship,e[t[1]][t[0]+1]&&e[t[1]][t[0]+1].ship].filter((function(e){return e}))}(n.ally,r);if(1===l.length){for(var p=l[0].split("-").map((function(e){return parseInt(e)})),y=Object(Y.a)(p,2),b=y[0],O=y[1],d=1;d<n.squadron[b][O].length;d++)if(null===n.squadron[b][O][d]){var g=r[0]<n.squadron[b][O][0][0]||r[1]<n.squadron[b][O][0][1];return K(b,O,d,r,n,g)}return n}for(var m=0;m<n.squadron[n.currentType].length;m++){var j=n.squadron[n.currentType][m];if(!(j.filter((function(e){return e})).length===j.length))return null===j[0]?K(n.currentType,m,0,r,n,!1):n}return n},ne=function(e,t){var n=Object(U.a)(e),r=Object(U.a)(t),c=1===r.length?[3,3]:r[1][1]-r[0][1]===0?[r.length+2,3]:[3,r.length+2],o=Object(Y.a)(c,2),a=o[0],i=o[1];return Object(U.a)(Array(i).keys()).forEach((function(e){Object(U.a)(Array(a).keys()).forEach((function(t){(function(e,t){return 1===r.length?!(1===e&&1===t):r[1][1]-r[0][1]===0?!(e>0&&e<r.length+1&&1===t):!(t>0&&t<r.length+1&&1===e)})(t,e)&&function(e,t){var c=r[0];n[t-1+c[1]]&&n[t-1+c[1]][e-1+c[0]]&&(n[t-1+c[1]][e-1+c[0]].miss=!0)}(t,e)}))})),n};function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ce=function(e,t){var n,r=[],c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),o=Object(U.a)(t.payload.data),a=$(c.ally,o);if(a){c.ally[o[1]][o[0]].hit=!0;var i=J(a),u=Object(Y.a)(i,2),s=u[0],l=u[1];if(function(e,t,n){return n.squadron[e][t].reduce((function(e,t){return n.ally[t[1]][t[0]].hit&&e}),!0)}(s,l,c)){if(c.allyShipsLeft-=1,0===c.allyShipsLeft)return c.feedback={type:"defeat"},c;c.squadron[s][l].forEach((function(e){c.ally[e[1]][e[0]].sank=!0,r.push(e)})),c.ally=ne(c.ally,r),n="sank"}else n="hit"}else n="miss",c.ally[o[1]][o[0]].miss=!0;return 0===r.length&&r.push(o),c.feedback={type:"feedback",data:r,feedback:n},c};function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ae=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{feedback:{type:"victory",data:Object(U.a)(e.ally.map((function(e){return e.map((function(e){return e.miss?1:e.sank?2:e.hit?3:e.ship?4:0}))})))}})};function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ue=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{feedback:null})};function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pe=function(e){var t=le({},e),n=[[[-3,0],[0,-3]],[[-2,0],[0,-2]],[[-1,0],[0,-1]],[[0,0],[0,0]]];return function(e){var r=le({},e);try{return r.squadron.forEach((function(e,c){r.squadron[c].forEach((function(e,o){var a=Math.round(Math.random()),i=function e(r,c){var o=[Math.floor(Math.random()*(10+n[r][c][0])),Math.floor(Math.random()*(10+n[r][c][1]))];try{for(var a=-1;a<=t.squadron[r][0].length+1;a++)if(c&&void 0!==t.ally[o[1]+a]&&(void 0!==t.ally[o[1]+a][o[0]-1]&&t.ally[o[1]+a][o[0]-1].ship||void 0!==t.ally[o[1]+a][o[0]]&&t.ally[o[1]+a][o[0]].ship||void 0!==t.ally[o[1]+a][o[0]+1]&&t.ally[o[1]+a][o[0]+1].ship)||void 0!==t.ally[o[1]-1]&&void 0!==t.ally[o[1]-1][o[0]+a]&&t.ally[o[1]-1][o[0]+a].ship||void 0!==t.ally[o[1]][o[0]+a]&&t.ally[o[1]][o[0]+a].ship||void 0!==t.ally[o[1]+1]&&void 0!==t.ally[o[1]+1][o[0]+a]&&t.ally[o[1]+1][o[0]+a].ship)return e(r,c)}catch(i){return void console.error(i)}return o}(c,a);if(!i)throw new Error("javascript too weak for much recursion");r.squadron[c][o]=r.squadron[c][o].map((function(e,t){return 0===a?[i[0]+t,i[1]]:[i[0],i[1]+t]})),r.squadron[c][o].forEach((function(e,t){e&&(r.ally[e[1]][e[0]].ship="".concat(c,"-").concat(o,"-").concat(t))}))}))})),X(r)}catch(c){return console.error(c),e}}(t)};function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ye=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{enemy:Object(U.a)(t.payload.data.map((function(e,t){return e.map((function(e,n){return{id:"cell-".concat(n,"-").concat(t,"-enemy"),miss:1===e,sank:2===e,hit:3===e||2===e,ship:4===e||3===e||2===e}}))})))})};function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Oe=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),r=Object(U.a)(t.payload.data);switch(t.payload.feedback){case"miss":n.enemy[r[0][1]][r[0][0]].miss=!0;break;case"hit":n.enemy[r[0][1]][r[0][0]].ship=!0,n.enemy[r[0][1]][r[0][0]].hit=!0;break;case"sank":if(r.forEach((function(e){n.enemy[e[1]][e[0]].hit=!0,n.enemy[e[1]][e[0]].ship=!0,n.enemy[e[1]][e[0]].sank=!0})),n.enemy=ne(n.enemy,r),n.enemyShipsLeft-=1,0===n.enemyShipsLeft)return n.feedback={type:"victory",data:Object(U.a)(n.ally)},n}return n};function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var me=function(){return{ally:V("ally"),enemy:V("enemy"),squadron:Object(U.a)(Array(4).keys()).map((function(e){return Object(U.a)(Array(e+1)).map((function(t){return Object(U.a)(Array(4-e)).map((function(e){return null}))}))})),shipsToPlace:{fourDecker:1,threeDecker:2,twoDecker:3,singleDecker:4,total:10},currentType:0,allyShipsLeft:10,enemyShipsLeft:10,feedback:null}},je=Object(l.c)({game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_TYPE":return h(e,t);case"CHANGE_STATUS":return w(e,t);case"READY":return b(e);case"REPEAT":return d(e);case"SEND":switch(t.payload.type){case"feedback":return"miss"===t.payload.feedback?m(e):e;case"victory":return w(e,{payload:"victory"});default:return e}case"RECEIVE":switch(t.payload.type){case"ready":return E(e);case"repeat":return k(e);case"feedback":return"miss"===t.payload.feedback?m(e):e;case"victory":return w(e,{payload:"defeat"});default:return e}case"SET_MOVE":return t.payload?m(e):e;case"RESET":return S();case"NEW_ROUND":return S("place",!e.move);default:return e}},rtc:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{peerID:"",interface:null,isClient:!1,isConnected:!1,isInitialised:!1,waitingForFeedback:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_RTC":return _(e,t);case"SEND":return R(e,t);case"READY":return R(e,{payload:{type:"ready"}});case"REPEAT":return R(e,{payload:{type:"repeat"}});case"RECEIVE":return N(e,t);case"SET_PEER_ID":return M(e,t);case"SET_IS_CONNECTED":return L(e,t);case"SET_IS_INITIALISED":return F(e,t);case"RESET":return{peerID:"",interface:null,isClient:!1,isConnected:!1,isInitialised:!1,waitingForFeedback:!1};default:return e}},sea:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND":return"feedback"===t.payload.type||"defeat"===t.payload.type?ue(e):e;case"PLACE_SHIP":return te(e,t);case"RANDOM":return pe(ge({},e,{ally:V("ally")}));case"RECEIVE":switch(t.payload.type){case"fire":return ce(e,t);case"feedback":return Oe(e,t);case"victory":return ye(e,t);case"defeat":return ae(e);default:return e}case"RESET":case"NEW_ROUND":return me();default:return e}}}),he=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,ve=Object(l.e)(je,he(Object(l.a)(p.a))),we=n(2),Pe=n(3);function Ee(){var e=Object(we.a)(["\n  width: 100%;\n  height: 100%;\n  position: relative;\n  display: grid;\n  grid-gap: 1px;\n  grid-template: repeat(10, 1fr) / repeat(10, 1fr);\n"]);return Ee=function(){return e},e}function De(){var e=Object(we.a)(["\n  margin: 10px;\n  width: calc(50vmin - 26px);\n  height: calc(50vmin - 26px);\n  min-width: 300px;\n  min-height: 300px;\n  box-sizing: border-box;\n  border: 3px double ",";\n  overflow: hidden;\n  user-select: none;\n"]);return De=function(){return e},e}var ke=Pe.b.div(De(),(function(e){return e.border?e.move?"#555":"#aaa":"#000"})),Se=Pe.b.div(Ee()),Ie=function(e){return c.a.createElement(ke,e,c.a.createElement(Se,{grid:e.grid},e.children))};function Te(){var e=Object(we.a)(["\n      :hover {\n        background-image: var(--hover);\n      }\n    "]);return Te=function(){return e},e}function xe(){var e=Object(we.a)(["\n      background-image: var(--miss);\n    "]);return xe=function(){return e},e}function Re(){var e=Object(we.a)(["\n      outline: 1px solid #555;\n      background-image: var(--sank);\n      z-index: 1;\n    "]);return Re=function(){return e},e}function Ce(){var e=Object(we.a)(["\n      background-image: var(--hit);\n    "]);return Ce=function(){return e},e}function _e(){var e=Object(we.a)(["\n      outline: 1px solid #aaa;\n      z-index: 1;\n    "]);return _e=function(){return e},e}function Ae(){var e=Object(we.a)(["\n      outline: 1px dotted #222;\n    "]);return Ae=function(){return e},e}function Ne(){var e=Object(we.a)(["\n  box-sizing: border-box;\n  background-color: #000;\n  background-clip: content-box;\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: 110% 110%;\n\n  ","\n\n  ","\n\n  ","\n\n  ","\n\n  ","\n\n  ","\n"]);return Ne=function(){return e},e}var qe=Pe.b.div(Ne(),(function(e){return e.grid&&Object(Pe.a)(Ae())}),(function(e){return(e.ship&&!e.sank||e.place)&&Object(Pe.a)(_e())}),(function(e){return(e.hit&&!e.sank||e.times)&&Object(Pe.a)(Ce())}),(function(e){return e.sank&&Object(Pe.a)(Re())}),(function(e){return e.miss&&Object(Pe.a)(xe())}),(function(e){return e.enemy&&e.move&&!e.miss&&!e.hit&&!e.ship&&Object(Pe.a)(Te())})),Me=function(e){var t={move:e.move,enemy:e.enemy,place:e.place,times:e.times,children:e.children,className:e.className,hit:e.data&&e.data.hit,miss:e.data&&e.data.miss,sank:e.data&&e.data.sank,ship:e.data&&e.data.ship,grid:e.data&&!e.ship};return c.a.createElement(qe,Object.assign({onClick:function(){e.onClick&&e.enemy===e.move&&!e.data.hit&&!e.data.miss&&e.onClick(e.data.id)}},t))},ze=Object(s.b)((function(e){return{game:e.game,sea:e.sea}}),(function(e){return{place:function(t){return e({type:"PLACE_SHIP",payload:t})}}}))((function(e){return c.a.createElement(Ie,{border:!0,grid:!0,move:e.game.move},e.sea.ally.map((function(t){return t.map((function(t){return c.a.createElement(Me,{key:t.id,data:t,onClick:("place"===e.game.status||"confirm"===e.game.status)&&e.place})}))})))})),Le=Object(s.b)((function(e){return{game:e.game,rtc:e.rtc,sea:e.sea}}),(function(e){return{fire:function(t){return e({type:"SEND",payload:{type:"fire",data:t}})}}}))((function(e){return c.a.createElement(Ie,{border:!0,grid:!0,move:!e.game.move},e.sea.enemy.map((function(t){return t.map((function(t){return c.a.createElement(Me,{key:t.id,data:t,onClick:e.fire,move:"play"===e.game.status&&e.game.move&&!e.rtc.waitingForFeedback,enemy:!0})}))})))}));function We(){var e=Object(we.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-flow: row wrap;\n  align-items: center;\n  justify-content: center;\n"]);return We=function(){return e},e}var Fe=Pe.b.div(We()),Ue=n(31),Ve=n.n(Ue);function Ye(e){var t=this;this.lastPeerID=null,this.init=function(){t.peer=new Ve.a,t.connection=null,e.setIsInitialised(!0),t.peer.on("open",(function(){null===t.peer.id?t.peer.id=t.lastPeerID:t.lastPeerID=t.peer.id,e.setPeerID(t.peer.id)})),t.peer.on("connection",(function(e){t.connection?e.on("open",e.close):(t.connection=e,t.ready())})),t.peer.on("disconnected",(function(){t.peer.reconnect()})),t.peer.on("close",(function(){t.connection=null})),t.peer.on("error",(function(){e.handleDisconnect()})),t.peer.on("close",(function(){t.connection=null}))},this.ready=function(){e.setIsConnected(!0),t.connection.on("data",e.receive),t.connection.on("close",(function(){t.connection=null,e.handleDisconnect()}))},this.join=function(){t.connection&&t.connection.close(),t.connection=t.peer.connect(e.peerID,{reliable:!0,serialization:"json"}),t.connection.on("open",(function(){e.setIsConnected(!0)})),t.connection.on("close",(function(){t.connection=null,e.handleDisconnect()})),t.connection.on("data",e.receive)},this.send=function(e){t.connection&&t.connection.open&&t.connection.send(e)}}function Je(){var e=Object(we.a)(["\n  border-bottom: 1px dotted #444;\n  cursor: pointer;\n\n  :hover {\n    border-bottom: 1px solid #aaa;\n  }\n"]);return Je=function(){return e},e}var He=Pe.b.span(Je());function Ge(){var e=Object(we.a)(["\n  margin: 16px 16px;\n  width: 108px;\n  height: 64px;\n  font-family: 'Material Icons';\n"]);return Ge=function(){return e},e}function Xe(){var e=Object(we.a)(["\n  border-bottom: 1px solid #aaa;\n"]);return Xe=function(){return e},e}function Be(){var e=Object(we.a)(["\n  max-width: 90%;\n  min-height: 1.5em;\n  background-color: #000;\n  border: none;\n  border-radius: 0;\n  outline: none;\n  color: #ddd;\n  font-size: inherit;\n  font-weight: 300;\n  line-height: 1.5em;\n  text-align: center;\n"]);return Be=function(){return e},e}function Ke(){var e=Object(we.a)(["\n  width: 100%;\n  height: 100%;\n  flex-flow: column;\n  align-items: center;\n  justify-content: center;\n  font-size: 30px;\n  display: flex;\n\n  label {\n    text-align: center;\n    min-height: 1.2em;\n    line-height: 1.2em;\n    user-select: none;\n  }\n"]);return Ke=function(){return e},e}var Qe=Pe.b.div(Ke()),Ze=Pe.b.input.attrs({type:"text"})(Be()),$e=Object(Pe.b)(Ze)(Xe()),et=Pe.b.button(Ge()),tt=Object(s.b)((function(e){return{game:e.game,rtc:e.rtc}}),(function(e){return{setRTC:function(t){return e({type:"SET_RTC",payload:t})},receive:function(t){return e({type:"RECEIVE",payload:t})},setPeerID:function(t){return e({type:"SET_PEER_ID",payload:t})},selectType:function(t){return e({type:"SELECT_TYPE",payload:t})},setIsConnected:function(t){return e({type:"SET_IS_CONNECTED",payload:t})},setIsInitialised:function(t){return e({type:"SET_IS_INITIALISED",payload:t})},handleDisconnect:function(){return e({type:"RESET"})}}}))((function(e){var t=Object(r.useRef)(null),n=Object(r.useRef)(null),o=Object(r.useState)(!1),a=Object(Y.a)(o,2),i=a[0],u=a[1],s=Object(r.useState)(!1),l=Object(Y.a)(s,2),p=l[0],f=l[1],y=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.setRTC({interface:new Ye({peerID:t,setPeerID:e.setPeerID,setIsConnected:e.setIsConnected,setIsInitialised:e.setIsInitialised,receive:e.receive,handleDisconnect:e.handleDisconnect}),isClient:n,isInitialised:r})},b=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.current.value;return n&&""!==n&&n!==e.rtc.peerID&&y(n,!0)};switch(Object(r.useEffect)((function(){"connect"===e.game.status&&(null===e.rtc.interface?y(e.rtc.peerID):e.rtc.isInitialised?e.rtc.peerID&&!p&&n.current.select():(e.rtc.interface.init(),e.rtc.isClient&&e.rtc.interface.join()))}),[e]),e.game.status){case"choose":return c.a.createElement(Qe,null,c.a.createElement("label",null,"select game type:"),c.a.createElement("div",null,c.a.createElement(et,{onClick:function(){return e.selectType(!0)}},"\ue7fd\ue8d4\ue7fd")));case"connect":return c.a.createElement(Qe,null,c.a.createElement("label",null,"share this text",c.a.createElement("br",null),"with someone",c.a.createElement("br",null),"you want to play:"),c.a.createElement(Ze,{ref:n,onChange:function(e){e.preventDefault()},onSelect:function(){return f(!0)},value:e.rtc.peerID}),c.a.createElement("label",null,"or paste text that",c.a.createElement("br",null),"was shared to you:"),c.a.createElement($e,{ref:t,onChange:function(){return u(!0)},onKeyPress:function(e){"Enter"===e.key&&b()}}),c.a.createElement("label",null,i&&c.a.createElement(He,{onClick:function(){b()}},"connect")));default:return null}}));function nt(){var e=Object(we.a)(["\n  display: flex;\n  justify-content: center;\n  font-size: 20px;\n  font-weight: 200;\n  text-align: center;\n  user-select: none;\n"]);return nt=function(){return e},e}var rt=Pe.b.label(nt());function ct(){var e=Object(we.a)(["\n  & > div:after {\n    grid-column-start: 1;\n    grid-row-start: 3;\n    display: ",";\n    align-items: center;\n    justify-content: center;\n    transform: translateY(","%);\n    transition: transform .5s;\n    font-family: 'Material Icons';\n    font-size: 29px;\n    line-height: 29px;\n    content: '\ue315';\n  }\n"],["\n  & > div:after {\n    grid-column-start: 1;\n    grid-row-start: 3;\n    display: ",";\n    align-items: center;\n    justify-content: center;\n    transform: translateY(","%);\n    transition: transform .5s;\n    font-family: 'Material Icons';\n    font-size: 29px;\n    line-height: 29px;\n    content: '\\u{E315}';\n  }\n"]);return ct=function(){return e},e}function ot(){var e=Object(we.a)(["\n  grid-row-start: ",";\n  grid-column-start: 8;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 0;\n  font-size: 30px;\n  font-weight: 200;\n  line-height: 30px;\n\n  @media screen and (min-width: 600px) and (min-height: 600px) {\n    font-size: 5vmin;\n    line-height: 4vmin;\n  }\n"]);return ot=function(){return e},e}function at(){var e=Object(we.a)(["\n  grid-row-start: ",";\n  grid-column-start: 7;\n  border: 0;\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: 70% 70%;\n"]);return at=function(){return e},e}function it(){var e=Object(we.a)(["\n  grid-row-start: ",";\n  grid-column-start: ",";\n"]);return it=function(){return e},e}function ut(){var e=Object(we.a)(["\n  grid-column: 2 / span 8;\n  grid-row: ",";\n  display: grid;\n  grid-template: auto / repeat(8, 1fr);\n"]);return ut=function(){return e},e}function st(){var e=Object(we.a)(["\n  grid-row: 10;\n  grid-column: 1 / span 10;\n  align-items: center;\n"]);return st=function(){return e},e}function lt(){var e=Object(we.a)(["\n  grid-row: 1 / span 2;\n  grid-column: 1 / span 10;\n  text-align: center;\n"]);return lt=function(){return e},e}var pt=Pe.b.label(lt()),ft=Object(Pe.b)(rt)(st()),yt=Pe.b.div(ut(),(function(e){return e.row})),bt=Object(Pe.b)(Me)(it(),(function(e){return e.row}),(function(e){return e.column})),Ot=Object(Pe.b)(Me)(at(),(function(e){return e.row})),dt=Object(Pe.b)(Me)(ot(),(function(e){return e.row})),gt=Object(Pe.b)(Ie)(ct(),(function(e){return-1===e.currentType?"none":"flex"}),(function(e){return 200*e.currentType})),mt=function(e){var t=e.decks,n=e.row,r=e.number;return c.a.createElement(yt,{row:n},Object(U.a)(Array(t).keys()).map((function(e){return c.a.createElement(bt,{key:"placing-deck-".concat(t,"-").concat(e),column:e+1,place:!0})})),c.a.createElement(Ot,{times:!0}),c.a.createElement(dt,null,r))},jt=Object(s.b)((function(e){return{game:e.game,sea:e.sea}}),(function(e){return{ready:function(){return e({type:"READY"})},random:function(){return e({type:"RANDOM"})}}}))((function(e){return c.a.createElement(gt,{currentType:e.sea.currentType},c.a.createElement(pt,null,"click on field to place ship manually",c.a.createElement("br",null),"or place them ",c.a.createElement(He,{onClick:e.random},"randomly")),c.a.createElement(mt,{decks:4,row:3,number:e.sea.shipsToPlace.fourDecker}),c.a.createElement(mt,{decks:3,row:5,number:e.sea.shipsToPlace.threeDecker}),c.a.createElement(mt,{decks:2,row:7,number:e.sea.shipsToPlace.twoDecker}),c.a.createElement(mt,{decks:1,row:9,number:e.sea.shipsToPlace.singleDecker}),"confirm"===e.game.status&&c.a.createElement(ft,null,c.a.createElement(He,{onClick:e.ready},"confirm and proceed")))}));function ht(){var e=Object(we.a)(["\n  grid-row: 8;\n"]);return ht=function(){return e},e}function vt(){var e=Object(we.a)(["\n  grid-row: 6;\n  justify-content: space-around;\n"]);return vt=function(){return e},e}function wt(){var e=Object(we.a)(["\n  grid-row: 3 / span 3;\n  align-items: flex-start;\n"]);return wt=function(){return e},e}function Pt(){var e=Object(we.a)(["\n  grid-row: 4 / span 4;\n  grid-column: 1 / span 10;\n  align-items: center;\n  font-size: 25px;\n"]);return Pt=function(){return e},e}var Et=Object(Pe.b)(rt)(Pt()),Dt=Object(Pe.b)(Et)(wt()),kt=Object(Pe.b)(Et)(vt()),St=Object(Pe.b)(Et)(ht()),It={victory:"you win!",defeat:"you loose!"},Tt=Object(s.b)((function(e){return{game:e.game}}),(function(e){return{repeat:function(){return e({type:"REPEAT"})},reset:function(){return e({type:"RESET"})}}}))((function(e){switch(e.game.status){case"defeat":case"victory":return c.a.createElement(Ie,null,c.a.createElement(Dt,null,It[e.game.status],c.a.createElement("br",null),!e.game.isAllyWantRepeat&&"play another round?"),c.a.createElement(kt,null,e.game.isAllyWantRepeat?"waiting for yor opponent answer":[c.a.createElement(He,{key:"yes",onClick:e.repeat},"yes"),c.a.createElement(He,{key:"no",onClick:e.reset},"no")]),e.game.isEnemyWantRepeat&&c.a.createElement(St,null,"your opponent said \xabyes\xbb"));case"wait":return c.a.createElement(Ie,null,c.a.createElement(Et,null,"wait until opponent",c.a.createElement("br",null),"place their ships"));default:return null}})),xt=Object(s.b)((function(e){return{status:e.game.status}}))((function(e){switch(e.status){case"choose":case"connect":return c.a.createElement(tt,null);case"place":case"confirm":return c.a.createElement(Fe,null,c.a.createElement(ze,null),c.a.createElement(jt,null));case"victory":case"wait":return c.a.createElement(Fe,null,c.a.createElement(ze,null),c.a.createElement(Tt,null));case"play":return c.a.createElement(Fe,null,c.a.createElement(ze,null),c.a.createElement(Le,null));case"defeat":return c.a.createElement(Fe,null,c.a.createElement(Tt,null),c.a.createElement(Le,null));default:return null}})),Rt=Object(s.b)((function(e){return{game:e.game,rtc:e.rtc,sea:e.sea}}),(function(e){return{changeStatus:function(t){return e({type:"CHANGE_STATUS",payload:t})},setMove:function(t){return e({type:"SET_MOVE",payload:t})},send:function(t){return e({type:"SEND",payload:t})},newRound:function(){return e({type:"NEW_ROUND"})}}}))((function(e){return Object(r.useEffect)((function(){switch(e.game.status){case"connect":e.rtc.isConnected&&(e.changeStatus("place"),e.setMove(e.rtc.isClient));break;case"place":0===e.sea.shipsToPlace.total&&e.changeStatus("confirm");break;case"confirm":if(0!==e.sea.shipsToPlace.total){e.changeStatus("place");break}e.game.isAllyReady&&(e.game.isEnemyReady?e.changeStatus("play"):e.changeStatus("wait"));break;case"wait":e.game.isEnemyReady&&e.changeStatus("play");break;case"play":e.sea.feedback&&e.send(e.sea.feedback);break;case"defeat":case"victory":e.game.isAllyWantRepeat&&e.game.isEnemyWantRepeat&&e.newRound()}}),[e]),c.a.createElement(xt,null)}));a.a.render(c.a.createElement(s.a,{store:ve},c.a.createElement(i.a,null,c.a.createElement(u.a,{path:"/",component:Rt}))),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.8bab733b.chunk.js.map